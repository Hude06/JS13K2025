<!doctype html>
<title>Black Cat</title>
<script type="module">var e=e||{};e.VERSION="0.0.1",e.plugins=void 0,e.custom=void 0,e.create=function(t,a,i,r,s){var n,o={};if(o.canvas=document.createElement("canvas"),o.canvas.setAttribute("width",1*t),o.canvas.setAttribute("height",1*a),o.canvas.style.backgroundColor="black",document.body.appendChild(o.canvas),o.canvas.ctx=o.canvas.getContext("2d"),o.stage=(c(n={}),n.stage=!0,n.width=o.canvas.width,n.height=o.canvas.height,n.x=0,n.y=0,n.parent=void 0,n),o.pointer=(()=>{var e={_x:0,_y:0};return Object.defineProperties(e,{x:{get:()=>e._x/o.scale,enumerable:!0,configurable:!0},y:{get:()=>e._y/o.scale,enumerable:!0,configurable:!0},centerX:{get:()=>e.x,enumerable:!0,configurable:!0},centerY:{get:()=>e.y,enumerable:!0,configurable:!0},position:{get:()=>({x:e.x,y:e.y}),enumerable:!0,configurable:!0}}),e.isDown=!1,e.isUp=!0,e.tapped=!1,e.downTime=0,e.elapsedTime=0,e.press=void 0,e.release=void 0,e.tap=void 0,e.dragSprite=null,e.dragOffsetX=0,e.dragOffsetY=0,e.moveHandler=t=>{e._x=t.pageX-t.target.offsetLeft,e._y=t.pageY-t.target.offsetTop,t.preventDefault()},e.touchmoveHandler=t=>{e._x=t.targetTouches[0].pageX-o.canvas.offsetLeft,e._y=t.targetTouches[0].pageY-o.canvas.offsetTop,t.preventDefault()},e.downHandler=t=>{e._x=t.pageX-t.target.offsetLeft,e._y=t.pageY-t.target.offsetTop,e.isDown=!0,e.isUp=!1,e.tapped=!1,e.downTime=Date.now(),e.press&&e.press(),t.preventDefault()},e.touchstartHandler=t=>{e._x=t.targetTouches[0].pageX-o.canvas.offsetLeft,e._y=t.targetTouches[0].pageY-o.canvas.offsetTop,e.isDown=!0,e.isUp=!1,e.tapped=!1,e.downTime=Date.now(),e.press&&e.press(),t.preventDefault()},e.upHandler=t=>{e.elapsedTime=Math.abs(e.downTime-Date.now()),200>=e.elapsedTime&&(e.tapped=!0,e.tap&&e.tap()),e.isUp=!0,e.isDown=!1,e.release&&e.release(),t.preventDefault()},o.canvas.addEventListener("mousemove",e.moveHandler.bind(e),!1),o.canvas.addEventListener("mousedown",e.downHandler.bind(e),!1),window.addEventListener("mouseup",e.upHandler.bind(e),!1),o.canvas.addEventListener("touchmove",e.touchmoveHandler.bind(e),!1),o.canvas.addEventListener("touchstart",e.touchstartHandler.bind(e),!1),window.addEventListener("touchend",e.upHandler.bind(e),!1),o.canvas.style.touchAction="none",e.hitTestSprite=t=>{var a=!1;if(t.circular){var i=e.x-(t.gx+t.halfWidth),r=e.y-(t.gy+t.halfHeight);a=t.radius>Math.sqrt(i*i+r*r)}else a=e.x>t.gx&&t.gx+t.width>e.x&&e.y>t.gy&&t.gy+t.height>e.y;return a},e.updateDragAndDrop=()=>{if(e.isDown)if(null===e.dragSprite)for(var t=o.draggableSprites.length-1;t>-1;t--){var a=o.draggableSprites[t];if(a.draggable&&e.hitTestSprite(a)){e.dragOffsetX=e.x-a.gx,e.dragOffsetY=e.y-a.gy,e.dragSprite=a;var i=a.parent.children;i.splice(i.indexOf(a),1),i.push(a),o.draggableSprites.splice(o.draggableSprites.indexOf(a),1),o.draggableSprites.push(a);break}}else e.dragSprite.x=e.x-e.dragOffsetX,e.dragSprite.y=e.y-e.dragOffsetY;e.isUp&&(e.dragSprite=null),o.draggableSprites.some(t=>t.draggable&&e.hitTestSprite(t)?(o.canvas.style.cursor="pointer",!0):(o.canvas.style.cursor="auto",!1))},e})(),o.key=(()=>{var e={};return e.leftArrow=y(37),e.upArrow=y(38),e.rightArrow=y(39),e.downArrow=y(40),e.space=y(32),e.a=y(65),e.d=y(68),e.w=y(87),e.s=y(83),e.q=y(81),e.r=y(82),e})(),o.buttons=[],o.dragAndDrop=!1,o.draggableSprites=[],o.tweens=[],o.state=void 0,o.load=s||void 0,o.setup=i||void 0,void 0===o.setup)throw Error("Please supply the setup function in the constructor");function l(){if(requestAnimationFrame(l,o.canvas),void 0===o._fps)d(),o.render(o.canvas,0);else{var e=Date.now(),t=e-o._startTime;for(t>1e3&&(t=o._frameDuration),o._startTime=e,o._lag+=t;o._lag>=o._frameDuration;)h(),d(),o._lag-=o._frameDuration;o.render(o.canvas,o._lag/o._frameDuration)}}function h(){function e(t){t._previousX=t.x,t._previousY=t.y,t.children&&t.children.length>0&&t.children.forEach(t=>{e(t)})}o.stage.children.forEach(t=>{e(t)})}function d(){if(o.buttons.length>0){o.canvas.style.cursor="auto";for(var e=o.buttons.length-1;e>=0;e--){var t=o.buttons[e];t.update(o.pointer,o.canvas),("over"===t.state||"down"===t.state)&&(t.stage||(o.canvas.style.cursor="pointer"))}}if(o.dragAndDrop&&o.pointer.updateDragAndDrop(),o.state&&!o.paused&&o.state(),0!==o.updateFunctions.length)for(var a=0;o.updateFunctions.length>a;a++)(0,o.updateFunctions[a])()}function c(e){e.x=0,e.y=0,e.vx=0,e.vy=0,e.width=0,e.height=0,e.scaleX=1,e.scaleY=1,e.pivotX=.5,e.pivotY=.5,e.rotation=0,e.visible=!0,e.parent=void 0,e.stage=!1,e.shadow=!1,e.shadowColor="rgba(100, 100, 100, 0.5)",e.shadowOffsetX=3,e.shadowOffsetY=3,e.shadowBlur=3,e.blendMode=void 0,e._alpha=1,e._draggable=void 0,e._layer=0,e._circular=!1,e._interactive=!1,e._previousX=void 0,e._previousY=void 0,e.children=[],e.addChild=t=>{t.parent&&t.parent.removeChild(t),t.parent=e,e.children.push(t)},e.removeChild=t=>{if(t.parent!==e)throw Error(t+"is not a child of "+e);e.children.splice(e.children.indexOf(t),1)},e.swapChildren=(t,a)=>{var i=e.children.indexOf(t),r=e.children.indexOf(a);if(-1===i||-1===r)throw Error(child+" Both objects must be a child of the caller "+e);t.childIndex=r,a.childIndex=i,e.children[i]=a,e.children[r]=t},e.add=function(t){var a=[].slice.call(arguments);a.length>1?a.forEach(t=>{e.addChild(t)}):e.addChild(a[0])},e.remove=function(t){var a=[].slice.call(arguments);a.length>1?a.forEach(t=>{e.removeChild(t)}):e.removeChild(a[0])},e.setPosition=(t,a)=>{e.x=t,e.y=a};var t=e;e.putCenter=(a,i,r)=>{r=r||0,a.x=t.x+t.halfWidth-a.halfWidth+(i=i||0),a.y=t.y+t.halfHeight-a.halfHeight+r,e.compensateForParentPosition(t,a)},e.putTop=(a,i,r)=>{r=r||0,a.x=t.x+t.halfWidth-a.halfWidth+(i=i||0),a.y=t.y-a.height+r,e.compensateForParentPosition(t,a)},e.putRight=(a,i,r)=>{r=r||0,a.x=t.x+t.width+(i=i||0),a.y=t.y+t.halfHeight-a.halfHeight+r,e.compensateForParentPosition(t,a)},e.putBottom=(a,i,r)=>{r=r||0,a.x=t.x+t.halfWidth-a.halfWidth+(i=i||0),a.y=t.y+t.height+r,e.compensateForParentPosition(t,a)},e.putLeft=(a,i,r)=>{r=r||0,a.x=t.x-a.width+(i=i||0),a.y=t.y+t.halfHeight-a.halfHeight+r,e.compensateForParentPosition(t,a)},e.compensateForParentPosition=(e,t)=>{(0!==t.parent.gx||0!==t.parent.gy)&&(t.x-=e.gx,t.y-=e.gy)},Object.defineProperties(e,{gx:{get(){return this.parent?this.x+this.parent.gx:this.x},enumerable:!0,configurable:!0},gy:{get(){return this.parent?this.y+this.parent.gy:this.y},enumerable:!0,configurable:!0},position:{get:()=>({x:e.x,y:e.y}),enumerable:!0,configurable:!0},alpha:{get:()=>e.parent._alpha*e._alpha,set(t){e._alpha=t},enumerable:!0,configurable:!0},halfWidth:{get:()=>e.width/2,enumerable:!0,configurable:!0},halfHeight:{get:()=>e.height/2,enumerable:!0,configurable:!0},centerX:{get:()=>e.x+e.halfWidth,enumerable:!0,configurable:!0},centerY:{get:()=>e.y+e.halfHeight,enumerable:!0,configurable:!0},layer:{get:()=>e._layer,set(t){e._layer=t,e.parent.children.sort(p)},enumerable:!0,configurable:!0},circular:{get:()=>e._circular,set(t){!0===t&&!1===e._circular&&(g(e),e._circular=!0),!1===t&&!0===e._circular&&(delete e.diameter,delete e.radius,e._circular=!1)},enumerable:!0,configurable:!0},draggable:{get:()=>e._draggable,set(t){!0===t&&(o.draggableSprites.push(e),e._draggable=!0,!1===o.dragAndDrop&&(o.dragAndDrop=!0)),!1===t&&o.draggableSprites.splice(o.draggableSprites.indexOf(e),1)},enumerable:!0,configurable:!0},interactive:{get:()=>e._interactive,set(t){!0===t&&(u(e),e._interactive=!0),!1===t&&(o.buttons.splice(o.buttons.indexOf(e),1),e._interactive=!1)},enumerable:!0,configurable:!0},localBounds:{get:()=>({x:0,y:0,width:e.width,height:e.height}),enumerable:!0,configurable:!0},globalBounds:{get:()=>(rectangle={x:e.gx,y:e.gy,width:e.gx+e.width,height:e.gy+e.height},rectangle),enumerable:!0,configurable:!0},empty:{get:()=>0===e.children.length,enumerable:!0,configurable:!0}})}function g(e){Object.defineProperties(e,{diameter:{get:()=>e.width,set(t){e.width=t,e.height=t},enumerable:!0,configurable:!0},radius:{get:()=>e.width/2,set(t){e.width=2*t,e.height=2*t},enumerable:!0,configurable:!0}})}function u(e){e.press=e.press||void 0,e.release=e.release||void 0,e.over=e.over||void 0,e.out=e.out||void 0,e.tap=e.tap||void 0,e.state="up",e.action="",e.pressed=!1,e.enabled=!0,e.hoverOver=!1,o.buttons.push(e),e.update=t=>{if(e.enabled){var a=o.pointer.hitTestSprite(e);t.isUp&&(e.state="up","button"===e.subtype&&e.show(0)),a&&(e.state="over",e.frames&&3===e.frames.length&&"button"===e.subtype&&e.show(1),t.isDown&&(e.state="down","button"===e.subtype&&e.show(3===e.frames.length?2:1))),"down"===e.state&&(e.pressed||(e.press&&e.press(),e.pressed=!0,e.action="pressed")),"over"===e.state&&(e.pressed&&(e.release&&e.release(),e.pressed=!1,e.action="released",o.pointer.tapped&&e.tap&&e.tap()),e.hoverOver||(e.over&&e.over(),e.hoverOver=!0)),"up"===e.state&&(e.pressed&&(e.release&&e.release(),e.pressed=!1,e.action="released"),e.hoverOver&&(e.out&&e.out(),e.hoverOver=!1))}}}function y(e){var t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=e=>{e.keyCode===t.code&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1),e.preventDefault()},t.upHandler=e=>{e.keyCode===t.code&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0),e.preventDefault()},window.addEventListener("keydown",t.downHandler.bind(t),!1),window.addEventListener("keyup",t.upHandler.bind(t),!1),t}function p(e,t){return t.layer>e.layer?-1:1}return o.assetFilePaths=r||void 0,o.paused=!1,o._fps=60,o._startTime=Date.now(),o._frameDuration=1e3/o._fps,o._lag=0,o.interpolate=!0,o.updateFunctions=[],o.scale=1,o.start=()=>{o.assetFilePaths?(o.assets.whenLoaded=()=>{o.state=void 0,o.setup()},o.assets.load(o.assetFilePaths),o.load&&(o.state=o.load)):o.setup(),l()},o.pause=()=>{o.paused=!0},o.resume=()=>{o.paused=!1},o.hidePointer=()=>{o.canvas.style.cursor="none"},o.showPointer=()=>{o.canvas.style.cursor="auto"},Object.defineProperties(o,{fps:{get:()=>o._fps,set(e){o._fps=e,o._startTime=Date.now(),o._frameDuration=1e3/o._fps},enumerable:!0,configurable:!0},backgroundColor:{set(e){o.canvas.style.backgroundColor=e},enumerable:!0,configurable:!0}}),o.remove=function(e){var t=[].slice.call(arguments);if(t[0]instanceof Array){var a=t[0];if(a.length>0)for(var i=a.length-1;i>=0;i--){var r=a[i];r.parent.removeChild(r),a.splice(a.indexOf(r),1)}}else t.length>1?t.forEach(e=>{e.parent.removeChild(e)}):t[0].parent.removeChild(t[0])},o.group=function(e){var t={};return c(t),t.addChild=e=>{e.parent&&e.parent.removeChild(e),e.parent=t,t.children.push(e),t.calculateSize()},t.removeChild=e=>{if(e.parent!==t)throw Error(e+"is not a child of "+t);t.children.splice(t.children.indexOf(e),1),t.calculateSize()},t.calculateSize=()=>{t.children.length>0&&(t._newWidth=0,t._newHeight=0,t.children.forEach(e=>{e.x+e.width>t._newWidth&&(t._newWidth=e.x+e.width),e.y+e.height>t._newHeight&&(t._newHeight=e.y+e.height)}),t.width=t._newWidth,t.height=t._newHeight)},o.stage.addChild(t),e&&[].slice.call(arguments).forEach(e=>{t.addChild(e)}),t},o.rectangle=(e,t,a,i,r,s,n)=>{var l={};return c(l),l.mask=!1,l.width=e||32,l.height=t||32,l.fillStyle=a||"red",l.strokeStyle=i||"none",l.lineWidth=r||0,l.x=s||0,l.y=n||0,o.stage.addChild(l),l.render=e=>{e.strokeStyle=l.strokeStyle,e.lineWidth=l.lineWidth,e.fillStyle=l.fillStyle,e.beginPath(),e.rect(-l.width*l.pivotX,-l.height*l.pivotY,l.width,l.height),!0===l.mask?e.clip():("none"!==l.strokeStyle&&e.stroke(),"none"!==l.fillStyle&&e.fill())},l},o.circle=(e,t,a,i,r,s)=>{var n={};return c(n),n.mask=!1,n.width=e||32,n.height=e||32,n.fillStyle=t||"red",n.strokeStyle=a||"none",n.lineWidth=i||"none",n.x=r||0,n.y=s||0,o.stage.addChild(n),g(n),n.render=e=>{e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.fillStyle=n.fillStyle,e.beginPath(),e.arc(n.radius+-n.diameter*n.pivotX,n.radius+-n.diameter*n.pivotY,n.radius,0,2*Math.PI,!1),!0===n.mask?e.clip():("none"!==n.strokeStyle&&e.stroke(),"none"!==n.fillStyle&&e.fill())},n},o.line=(e,t,a,i,r,s)=>{var n={};return c(n),!a&&0!==a&&(a=0),!i&&0!==i&&(i=0),!r&&0!==r&&(r=32),!s&&0!==s&&(s=32),n.ax=a,n.ay=i,n.bx=r,n.by=s,n.strokeStyle=e||"red",n.lineWidth=t||1,n.lineJoin="round",o.stage.addChild(n),n.render=e=>{e.strokeStyle=n.strokeStyle,e.lineWidth=n.lineWidth,e.lineJoin=n.lineJoin,e.beginPath(),e.moveTo(n.ax,n.ay),e.lineTo(n.bx,n.by),"none"!==n.strokeStyle&&e.stroke(),"none"!==n.fillStyle&&e.fill()},n},o.frames=(e,t,a,i)=>{var r={};return r.image=e,r.data=t,r.width=a,r.height=i,r},o.sprite=e=>{var t={};if(void 0===e)throw Error("Sprites require a source");return c(t),t.frames=[],t.loop=!0,t._currentFrame=0,t.setTexture=e=>{if(e.image)if(e.image&&!e.data){if(!(o.assets[e.image].source instanceof Image))throw Error(e.image+" is not an image file");t.source=o.assets[e.image].source,t.sourceX=e.x,t.sourceY=e.y,t.width=e.width,t.height=e.height,t.sourceWidth=e.width,t.sourceHeight=e.height}else e.image&&e.data&&(t.source=o.assets[e.image].source,t.frames=e.data,t.sourceX=t.frames[0][0],t.sourceY=t.frames[0][1],t.width=e.width,t.height=e.height,t.sourceWidth=e.width,t.sourceHeight=e.height);else e instanceof Array?(t.frames=e,t.source=o.assets[e[0]].source,t.sourceX=o.assets[e[0]].frame.x,t.sourceY=o.assets[e[0]].frame.y,t.width=o.assets[e[0]].frame.w,t.height=o.assets[e[0]].frame.h,t.sourceWidth=o.assets[e[0]].frame.w,t.sourceHeight=o.assets[e[0]].frame.h):(t.tilesetFrame=o.assets[e],t.source=t.tilesetFrame.source,t.sourceX=t.tilesetFrame.frame.x,t.sourceY=t.tilesetFrame.frame.y,t.width=t.tilesetFrame.frame.w,t.height=t.tilesetFrame.frame.h,t.sourceWidth=t.tilesetFrame.frame.w,t.sourceHeight=t.tilesetFrame.frame.h)},t.setTexture(e),t.gotoAndStop=e=>{if(0>=t.frames.length)throw Error("Frame number "+e+"doesn't exist");t.frames[0]instanceof Array?(t.sourceX=t.frames[e][0],t.sourceY=t.frames[e][1]):o.assets[t.frames[e]].frame&&(t.source=o.assets[t.frames[e]].source,t.sourceX=o.assets[t.frames[e]].frame.x,t.sourceY=o.assets[t.frames[e]].frame.y,t.sourceWidth=o.assets[t.frames[e]].frame.w,t.sourceHeight=o.assets[t.frames[e]].frame.h,t.width=o.assets[t.frames[e]].frame.w,t.height=o.assets[t.frames[e]].frame.h),t._currentFrame=e},t.x=0,t.y=0,t.frames.length>0&&(o.addStatePlayer(t),Object.defineProperty(t,"currentFrame",{get:()=>t._currentFrame,enumerable:!1,configurable:!1})),o.stage.addChild(t),t.render=e=>{e.drawImage(t.source,t.sourceX,t.sourceY,t.sourceWidth,t.sourceHeight,-t.width*t.pivotX,-t.height*t.pivotY,t.width,t.height)},t},o.button=e=>{var t=o.sprite(e);return t.subtype="button",u(t),t},o.image=e=>o.assets[e],o.json=e=>o.assets[e],o.addStatePlayer=function(e){var t=0,a=0,i=0,r=void 0,s=!1;function n(n){l(),a=n[1]-(i=n[0]),0===i&&(a+=1,t+=1),1===a&&(a=2,t+=1),e.fps||(e.fps=12);var h=1e3/e.fps;e.gotoAndStop(i),s||(r=setInterval(o.bind(this),h),s=!0)}function o(){a>t?(e.gotoAndStop(e.currentFrame+1),t+=1):e.loop&&(e.gotoAndStop(i),t=1)}function l(){void 0!==r&&!0===s&&(s=!1,t=0,i=0,a=0,clearInterval(r))}e.show=t=>{l(),e.gotoAndStop("string"!=typeof t?t:e.frames.indexOf(t))},e.play=()=>{n([0,e.frames.length-1])},e.stop=()=>{l(),e.gotoAndStop(e.currentFrame)},e.playing=s,e.playSequence=n},o.render=(e,t)=>{var a=e.ctx;a.clearRect(0,0,e.width,e.height);for(var i=0;o.stage.children.length>i;i++)r(o.stage.children[i]);function r(i){if(i.visible&&e.width+i.width>i.gx&&i.gx+i.width>=-i.width&&e.height+i.height>i.gy&&i.gy+i.height>=-i.height){if(a.save(),o.interpolate?(i.renderX=void 0!==i._previousX?(i.x-i._previousX)*t+i._previousX:i.x,i.renderY=void 0!==i._previousY?(i.y-i._previousY)*t+i._previousY:i.y):(i.renderX=i.x,i.renderY=i.y),a.translate(i.renderX+i.width*i.pivotX,i.renderY+i.height*i.pivotY),a.globalAlpha=i.alpha,a.rotate(i.rotation),a.scale(i.scaleX,i.scaleY),i.shadow&&(a.shadowColor=i.shadowColor,a.shadowOffsetX=i.shadowOffsetX,a.shadowOffsetY=i.shadowOffsetY,a.shadowBlur=i.shadowBlur),i.blendMode&&(a.globalCompositeOperation=i.blendMode),i.render&&i.render(a),i.children&&i.children.length>0){a.translate(-i.width*i.pivotX,-i.height*i.pivotY);for(var s=0;i.children.length>s;s++)r(i.children[s])}a.restore()}}},o.assets={toLoad:0,loaded:0,imageExtensions:["png","jpg","gif","webp"],fontExtensions:["ttf","otf","ttc","woff"],audioExtensions:["mp3","ogg","wav","webm"],jsonExtensions:["json"],whenLoaded:void 0,load(e){var t=this;t.toLoad=e.length,e.forEach(e=>{var a=e.split(".").pop();if(-1!==t.imageExtensions.indexOf(a)){var i=new Image;i.addEventListener("load",()=>{i.name=e,t[i.name]={source:i,frame:{x:0,y:0,w:i.width,h:i.height}},t.loadHandler()},!1),i.src=e}else if(-1!==t.fontExtensions.indexOf(a)){var r=e.split("/").pop().split(".")[0],s=document.createElement("style");s.appendChild(document.createTextNode("@font-face {font-family: '"+r+"'; src: url('"+e+"');}")),document.head.appendChild(s),t.loadHandler()}else if(-1!==t.audioExtensions.indexOf(a)){var n=o.makeSound(e,t.loadHandler.bind(t));n.name=e,t[n.name]=n}else if(-1!==t.jsonExtensions.indexOf(a)){var l=new XMLHttpRequest,h={};l.open("GET",e,!0),l.addEventListener("readystatechange",()=>{200===l.status&&4===l.readyState&&((h=JSON.parse(l.responseText)).name=e,t[h.name]=h,h.frames?t.createTilesetFrames(h,e):t.loadHandler())}),l.send()}})},createTilesetFrames(e,t){var a=this,i=t.replace(/[^\/]*$/,""),r=new Image;r.addEventListener("load",()=>{a[i+e.meta.image]={source:r,frame:{x:0,y:0,w:r.width,h:r.height}},Object.keys(e.frames).forEach(t=>{a[t]=e.frames[t],a[t].source=r}),a.loadHandler()},!1),r.src=i+e.meta.image},loadHandler(){var e=this;e.loaded+=1,e.toLoad===e.loaded&&(e.toLoad=0,e.loaded=0,e.whenLoaded())}},o.keyboard=y,o.makeDisplayObject=c,void 0!==e.plugins&&e.plugins(o),void 0!==e.custom&&e.custom(o),o},window.ga=e.create;let t,a=new AudioContext,i=(e=1,t=.05,i=220,r=0,s=0,n=.1,o=0,l=1,h=0,d=0,c=0,g=0,u=0,y=0,p=0,f=0,v=0,m=1,x=0,w=0,b=0)=>{let S=Math,M=2*S.PI,C=44100,_=h*=500*M/C/C,k=i*=(1-t+2*t*S.random(t=[]))*M/C,H=0,T=0,O=0,W=1,X=0,E=0,L=0,Y=0>b?-1:1,D=M*Y*b*2/C,F=S.cos(D),P=S.sin,A=P(D)/4,R=1+A,B=-2*F/R,j=(1-A)/R,I=(1+Y*F)/2/R,q=-(Y+F)/R,U=I,z=0,J=0,N=0,G=0;for(d*=500*M/C**3,p*=M/C,c*=M/C,g*=C,u=C*u|0,e*=.3,Y=(r=C*r+9)+(x*=C)+(s*=C)+(n*=C)+(v*=C)|0;Y>O;t[O++]=L*e)++E%(100*f|0)||(L=o?o>1?o>2?o>3?P(H**3):S.max(S.min(S.tan(H),1),-1):1-(2*H/M%2+2)%2:1-4*S.abs(S.round(H/M)-H/M):P(H),L=(u?1-w+w*P(M*O/u):1)*(0>L?-1:1)*S.abs(L)**l*(r>O?O/r:r+x>O?1-(O-r)/x*(1-m):r+x+s>O?m:Y-v>O?(Y-O-v)/n*m:0),L=v?L/2+(v>O?0:(Y-v>O?1:(Y-O)/v)*t[O-v|0]/2/e):L,b&&(L=G=U*z+q*(z=J)+I*(J=L)-j*N-B*(N=G))),D=(i+=h+=d)*S.cos(p*T++),H+=D+D*y*P(O**5),W&&++W>g&&(i+=c,k+=c,W=0),!u||++X%u||(i=k,h=_,W=W||1);(e=a.createBuffer(1,Y,C)).getChannelData(0).set(t),(i=a.createBufferSource()).buffer=e,i.connect(a.destination),i.start()},r=0;class s{constructor(e){this.g=e,this.player=null,this.game=null,this.buildings=null,this.dropPoint=void 0,this.mouses=null,this.camera=void 0,this.gravity=.4,this.stars=null,this.topTowers=[],this.worldWidth=0,this.menuStage=1,this.menuText=void 0,this.menuBackground=void 0}destroy(){try{this.player&&o.remove(this.player)}catch{}try{this.mouses&&o.remove(this.mouses)}catch{}try{this.buildings&&o.remove(this.buildings)}catch{}try{this.stars&&o.remove(this.stars)}catch{}try{this.dropPoint&&o.remove(this.dropPoint)}catch{}try{this.timeLimitSprite&&o.remove(this.timeLimitSprite)}catch{}this.camera=null,this.player=null,this.mouses=null,this.buildings=null,this.stars=null,this.dropPoint=null,this.game=null,this.camera&&(this.camera=null)}setup(){const e=this.g;this.game=e.group(),this.buildings=e.group(),this.mouses=e.group(),this.stars=e.group(),this.player=e.sprite("./Cat.png"),this.player.width=40,this.player.height=32,this.player.lastDropTime=0,this.player.dropCooldown=200,this.player.grounded=!1,this.player.canDropMice=!1,this.player.moveSpeed=3,this.player.speed=3,this.player.hurt=150,this.player.fallSpeed=0,this.player.x=e.canvas.width/2-this.player.width/2,this.levelTimeLimit=30,this.dropPoint=e.sprite("./Elevator.png"),this.player.layingMouses=e.group(),this.player.dropingElevator=!1,this.timeLimitSprite=y("30",e.canvas.width-200,16,32,32),h(r),e.stage.addChild(this.timeLimitSprite),((e,t,a,i,r,s)=>{for(let e=0;20>e;e++)a.push(p(64*e,o.canvas.height,Math.floor(2*Math.random())+1));for(let e=0;5>e;e++){let t=c(64*e,a[e].y-22);i.addChild(t)}const n=Math.floor(s.x/64),l=Math.max(0,n-10),h=Math.min(a.length-1,n+10);let d=!1,g=null;for(;!d;){let e=Math.floor(Math.random()*(h-l+1))+l;5>e-n||(g=a[e],1>=g.height||(d=!0))}r.x=g.x+g.width/2-r.width/2,r.y=g.y-r.height})(0,0,this.topTowers,this.mouses,this.dropPoint,this.player);const t=(e=>{let t=null;for(let a=0;n.buildings.children.length>a;a++){const i=n.buildings.children[a];e>=i.x&&i.x+i.width>=e&&(!t||t.y>i.y)&&(t=i)}return t})(this.player.x);this.player.y=t.y,this.worldWidth=64*this.topTowers.length,e.stage.width=this.worldWidth,e.stage.height=100*e.canvas.height,((e,t=100)=>{let a=[];for(let i=0;e>i;i++){let e,i=0;for(;50>i;){let r=Math.floor(Math.random()*(10*o.canvas.width-64))-500,s=Math.floor(Math.random()*(5*o.canvas.height/2-64))-700;if(!a.some(e=>{let a=e.x-r,i=e.y-s;return t>Math.sqrt(a*a+i*i)})){e=o.sprite("./Star.png"),e.width=12,e.height=12,e.x=r,e.y=s,n.stars.addChild(e),a.push(e);break}i++}}})(100,100),this.game.addChild(this.stars),this.player.addChild(this.player.layingMouses),this.game.addChild(this.buildings),this.game.addChild(this.dropPoint),this.game.addChild(this.mouses),this.game.addChild(this.player),this.camera=e.worldCamera(this.game,e.canvas),this.camera.y=400,this.keyboard(),e.state=f}keyboard(){const e=this.g;e.key.a.press=()=>{m()},e.key.a.release=()=>{e.key.d.isDown||(this.player.vx=0)},e.key.d.press=()=>{v()},e.key.d.release=()=>{e.key.a.isDown||(this.player.vx=0)},e.key.leftArrow.press=()=>{m()},e.key.leftArrow.release=()=>{e.key.rightArrow.isDown||(this.player.vx=0)},e.key.rightArrow.press=()=>{v()},e.key.rightArrow.release=()=>{e.key.leftArrow.isDown||(this.player.vx=0)},e.key.upArrow.press=()=>{x()},e.key.space.press=()=>{e.state===w?x():e.state===f&&(n.menuStage+=1)},e.key.w.press=()=>{x()},e.key.r.press=()=>{d()},e.key.q.release=async()=>{if(this.player.dropingElevator)this.player.layingMouses.removeChild(this.player.layingMouses.children[this.player.layingMouses.children.length-1]),this.player.canDropMice=!1,this.player.moveSpeed=Math.round(this.player.speed-this.player.layingMouses.children.length/6),l(),r+=1,h(r),0===this.mouses.children.length&&0===this.player.layingMouses.children.length&&d();else if(this.player.layingMouses.children.length>0){await u(this.player),this.player.layingMouses.removeChild(this.player.layingMouses.children[0]);let e=c(this.player.x-25,u(this.player).y-22);n.mouses.addChild(e),this.player.moveSpeed=Math.round(this.player.speed-this.player.layingMouses.children.length/6)}}}}let n=null;const o=e.create(800,512,()=>{n&&"function"==typeof n.setup&&n.setup()},["./Cat.png","./Mouse_Stand.png","./Mouse_Lay.png","./Roof1.png","./Roof2.png","./Star.png","./WhiteFont.png","./Elevator.png"]);function l(){i(void 0,void 0,488,.02,.01,.07,void 0,.7,void 0,162,void 0,void 0,void 0,void 0,void 0,void 0,void 0,.82,.04)}function h(e){if("u">typeof t&&t)try{o.remove(t)}catch{}t=y(e+" money",o.canvas.width-800,16,32,32),o.stage.addChild(t)}function d(){o.state=f,n.destroy(),n=new s(o),n.setup()}function c(e,t){let a=o.sprite("./Mouse_Stand.png");return a.width=22,a.height=22,a.x=e,a.y=t,a}function u(e){let t=null;for(let a=0;n.buildings.children.length>a;a++){let i=n.buildings.children[a];e.x+e.width>i.x&&i.x+i.width>e.x&&(!t||t.y>i.y)&&(t=i)}return t}function y(e,t,a,i,r){const s=i,n=r;let l=o.group();for(let i=0;e.length>i;i++){let r=e[i].toUpperCase(),h="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(r);if(-1===h)continue;let d=o.sprite("./WhiteFont.png");d.sourceX=5*h,d.sourceY=0,d.sourceWidth=5,d.sourceHeight=5,d.width=s,d.height=n,d.x=t+i*s,d.y=a,l.addChild(d)}return l}function p(e,t,a){let i=1===a?"Roof1.png":"Roof2.png",r=null,s=Math.floor(10*Math.random()),l=n.buildings.lastHeight||10,h=Math.max(1,l-2),d=l+3;20===d&&(d=l-3);let c=Math.floor(Math.random()*(d-h+1))+h;for(;1===c;)h=Math.max(1,l-2),d=l+2,c=Math.floor(Math.random()*(d-h+1))+h;3===s&&(c=1);for(let a=0;c>a;a++){let s=o.sprite("./"+i);s.width=64,s.height=32,s.x=e,s.y=t-32*a,n.buildings.addChild(s),(!r||r.y>s.y)&&(r=s)}return 3!==s&&(n.buildings.lastHeight=c),r}function f(){!n.menuBackground&&!n.menuText&&(n.menuBackground=o.rectangle(50*o.canvas.width,100*o.canvas.height,"black","none",0,-1e3,-500),o.stage.addChild(n.menuBackground),n.menuText=y("PRESS SPACE!",220,220,32,32),o.stage.addChild(n.menuText)),2===n.menuStage&&(o.remove(n.menuText),n.menuText=y("CATS CARGO",240,220,32,32)),3===n.menuStage&&(o.remove(n.menuText),n.menuText=y("JS13K By JUDE HILL",110,220,32,32)),4===n.menuStage&&(o.remove(n.menuText),o.stage.remove(n.menuBackground),n.menuBackground=null,n.menuText=null,n.menuStage=1,o.state=w)}function v(){if(n.player.vx=n.player.moveSpeed,n.player.scaleX=1,n.player.layingMouses.children.length>0)for(let e=0;n.player.layingMouses.children.length>e;e++)n.player.layingMouses.children[e].scaleX=1,n.player.layingMouses.children[e].offset=5}function m(){if(n.player.vx=-n.player.moveSpeed,n.player.scaleX=-1,n.player.layingMouses.children.length>0)for(let e=0;n.player.layingMouses.children.length>e;e++)n.player.layingMouses.children[e].scaleX=-1,n.player.layingMouses.children[e].offset=20}function x(){l(),n.player.grounded&&(n.player.vy-=10,n.player.grounded=!1)}function w(){n.player.vy+=n.gravity,o.move(n.player),n.levelTimeLimit-=.01,o.remove(n.timeLimitSprite),n.timeLimitSprite=y(n.levelTimeLimit+"",o.canvas.width-90,16,32,32),0>n.levelTimeLimit&&(d(),r=0,h(r));for(let e=0;n.buildings.children.length>e;e++){let t=n.buildings.children[e];o.hit(n.player,t,!0,!1,!1,e=>{"top"===e?n.player.vy=0:"bottom"!==e||0>n.player.vy?("left"===e||"right"===e)&&(n.player.vx=0):(n.player.vy=0,n.player.grounded=!0,n.player.fallSpeed>15&&(n.player.hurt+=Math.floor(10*n.player.fallSpeed),0>n.player.hurt&&(n.player.hurt=0),n.player.hurt>150&&(r=0,h(r),d()),i(void 0,void 0,50,.1,.2,.6,4,1.5)),n.player.y=t.y-n.player.height,n.player.vy=-n.gravity),"bottom"!==e&&n.player.vy>0&&(n.player.grounded=!1)})}n.player.dropingElevator=!!o.hit(n.player,n.dropPoint,!1,!1,!1),n.player.fallSpeed=n.player.vy;for(let e=0;n.mouses.children.length>e;e++){const t=n.mouses.children[e];o.hit(n.player,t,!0,!1,!1,()=>{const e=o.sprite("./Mouse_Lay.png");e.width=20,e.height=20,e.x=n.player.x,e.y=n.player.y-20,e.layer=2,e.offset=0,n.player.layingMouses.addChild(e),n.mouses.removeChild(t),n.player.moveSpeed=Math.round(n.player.speed-n.player.layingMouses.children.length/6)})}for(let e=0;n.player.layingMouses.children.length>e;e++){const t=n.player.layingMouses.children[e];t.x=(1===n.player.scaleX?3:19)-n.player.layingMouses.children[e].offset,t.y=n.player.height-10*e-25}for(let e=0;n.stars.children.length>e;e++)n.stars.children[e].x-=.05;n.game.x=o.canvas.width/2-n.player.x,n.game.y=o.canvas.height/2-n.player.y}n=new s(o),function(e){function t(e){e.x+=0|e.vx,e.y+=0|e.vy}e.move=e=>{if(e instanceof Array)for(var a=0;e.length>a;a++)t(e[a]);else t(e)},e.distance=(e,t)=>{var a=t.centerX-e.centerX,i=t.centerY-e.centerY;return Math.sqrt(a*a+i*i)},e.randomInt=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,e.randomFloat=(e,t)=>e+Math.random()*(t-e),e.wait=(e,t)=>setTimeout(t,e),e.worldCamera=function(e,t){return{width:t.width,height:t.height,_x:0,_y:0,get x(){return this._x},set x(t){this._x=t,e.x=-this._x,e._previousX=e.x},get y(){return this._y},set y(t){this._y=t,e.y=-this._y,e._previousY=e.y},get centerX(){return this.x+this.width/2},get centerY(){return this.y+this.height/2},get rightInnerBoundary(){return this.x+this.width/2+this.width/4},get leftInnerBoundary(){return this.x+this.width/2-this.width/4},get topInnerBoundary(){return this.y+this.height/2-this.height/4},get bottomInnerBoundary(){return this.y+this.height/2+this.height/4},follow(t){this.leftInnerBoundary>t.x&&(this.x=t.x-this.width/4),this.topInnerBoundary>t.y&&(this.y=t.y-this.height/4),t.x+t.width>this.rightInnerBoundary&&(this.x=t.x+t.width-this.width/4*3),t.y+t.height>this.bottomInnerBoundary&&(this.y=t.y+t.height-this.height/4*3),0>this.x&&(this.x=0),0>this.y&&(this.y=0),this.x+this.width>e.width&&(this.x=e.width-this.width),this.y+this.height>e.height&&(this.y=e.height-this.height)},centerOver(e){state.game.x=-e.x+g.canvas.width/2,state.game.y=-e.y+g.canvas.height/2}}},e.scaleToWindow=t=>{var a,i,r,s,n;t=t||"#2C3539",a=window.innerWidth/e.canvas.width,i=window.innerHeight/e.canvas.height,r=Math.min(a,i),e.canvas.style.transformOrigin="0 0",e.canvas.style.transform="scale("+r+")","horizontally"==(s=e.canvas.width>e.canvas.height?e.canvas.width*r<window.innerWidth?"horizontally":"vertically":e.canvas.height*r<window.innerHeight?"vertically":"horizontally")&&(n=(window.innerWidth-e.canvas.width*r)/2,e.canvas.style.marginLeft=n+"px",e.canvas.style.marginRight=n+"px"),"vertically"===s&&(n=(window.innerHeight-e.canvas.height*r)/2,e.canvas.style.marginTop=n+"px",e.canvas.style.marginBottom=n+"px"),e.canvas.style.paddingLeft=0,e.canvas.style.paddingRight=0,e.canvas.style.paddingTop=0,e.canvas.style.paddingBottom=0,e.canvas.style.display="block",document.body.style.backgroundColor=t,e.pointer.scale=r,e.scale=r,e.canvas.scaled=!0;var o=navigator.userAgent.toLowerCase();-1!=o.indexOf("safari")&&(o.indexOf("chrome")>-1||(e.canvas.style.maxHeight="100%",e.canvas.style.minHeight="100%"))},e.scaleToFit=(t,a)=>{var i,r,s;"width"===t&&(i=e.canvas.width/window.innerWidth,r=e.canvas.height/window.innerHeight),"height"===t&&(i=window.innerWidth/e.canvas.width,r=window.innerHeight/e.canvas.height),s=Math.min(i,r),e.canvas.style.transformOrigin="0 0",e.canvas.style.transform="scale("+s+")",document.body.style.backgroundColor=a,e.canvas.style.paddingLeft=0,e.canvas.style.paddingRight=0,e.canvas.style.marginLeft="auto",e.canvas.style.marginRight="auto",e.canvas.style.display="block",e.canvas.style.minHeight="100%";var n=navigator.userAgent.toLowerCase();-1!=n.indexOf("safari")&&(n.indexOf("chrome")>-1||(e.canvas.style.maxHeight="100%",e.canvas.style.minHeight="100%")),e.scale=s},e.hitTestPoint=(e,t)=>{var a,i,r,s;return"rectangle"==(a=t.radius?"circle":"rectangle")&&(s=e.x>t.x&&t.x+t.width>e.x&&e.y>t.y&&t.y+t.height>e.y),"circle"===a&&(s=t.radius>Math.sqrt((i=e.x-t.centerX)*i+(r=e.y-t.centerY)*r)),s},e.hitTestCircle=(e,t,a)=>{var i,r;return void 0===a&&(a=!1),a?(i=t.gx+t.radius-(e.gx+e.radius),r=t.gy+t.radius-(e.gy+e.radius)):(i=t.centerX-e.centerX,r=t.centerY-e.centerY),e.radius+t.radius>Math.sqrt(i*i+r*r)},e.hitTestRectangle=(e,t,a)=>{var i,r,s;return void 0===a&&(a=!1),a?(r=e.gx+e.halfWidth-(t.gx+t.halfWidth),s=e.gy+e.halfHeight-(t.gy+t.halfHeight)):(r=e.centerX-t.centerX,s=e.centerY-t.centerY),i=e.halfHeight+t.halfHeight,e.halfWidth+t.halfWidth>Math.abs(r)&&i>Math.abs(s)},e.hitTestCircleRectangle=(t,a,i)=>{var r,s,n,o,l,h;if(void 0===i&&(i=!1),i?(n=t.gx,o=t.gy,l=a.gx,h=a.gy):(n=t.x,o=t.y,l=a.x,h=a.y),"topMiddle"==(r=h-a.halfHeight>o?l-1-a.halfWidth>n?"topLeft":n>l+1+a.halfWidth?"topRight":"topMiddle":o>h+a.halfHeight?l-1-a.halfWidth>n?"bottomLeft":n>l+1+a.halfWidth?"bottomRight":"bottomMiddle":l-a.halfWidth>n?"leftMiddle":"rightMiddle")||"bottomMiddle"===r||"leftMiddle"===r||"rightMiddle"===r)s=e.hitTestRectangle(t,a,i);else{var d={};switch(r){case"topLeft":d.x=l,d.y=h;break;case"topRight":d.x=l+a.width,d.y=h;break;case"bottomLeft":d.x=l,d.y=h+a.height;break;case"bottomRight":d.x=l+a.width,d.y=h+a.height}s=e.hitTestCirclePoint(t,d,i)}return s&&r},e.hitTestCirclePoint=(t,a,i)=>(void 0===i&&(i=!1),a.diameter=1,a.radius=.5,a.centerX=a.x,a.centerY=a.y,a.gx=a.x,a.gy=a.y,e.hitTestCircle(t,a,i)),e.rectangleCollision=(e,t,a,i)=>{var r,s,n,o,l,h,d;return void 0===a&&(a=!1),void 0===i&&(i=!1),i?(h=e.gx+e.halfWidth-(t.gx+t.halfWidth),d=e.gy+e.halfHeight-(t.gy+t.halfHeight)):(h=e.centerX-t.centerX,d=e.centerY-t.centerY),n=e.halfHeight+t.halfHeight,(s=e.halfWidth+t.halfWidth)>Math.abs(h)&&n>Math.abs(d)&&(o=s-Math.abs(h),(l=n-Math.abs(d))>o?(h>0?(r="left",e.x=e.x+o):(r="right",e.x=e.x-o),a&&(e.vx*=-1)):(d>0?(r="top",e.y=e.y+l):(r="bottom",e.y=e.y-l),a&&(e.vy*=-1))),r},e.circleCollision=(e,t,a,i)=>{var r,s,n,o,l,h,d={},c=!1;return void 0===a&&(a=!0),void 0===i&&(i=!1),i?(o=t.gx+t.radius-(e.gx+e.radius),l=t.gy+t.radius-(e.gy+e.radius)):(o=t.centerX-e.centerX,l=t.centerY-e.centerY),(s=e.radius+t.radius)>(r=Math.sqrt(o*o+l*l))&&(c=!0,n=s-r,h=l/r,e.x-=(n+=.3)*(o/r),e.y-=n*h,a&&(d.x=l,d.y=-o,((e,t)=>{var a,i,r={},s={},n={},o=e.mass||1;t.lx=t.y,t.ly=-t.x,t.magnitude=Math.sqrt(t.x*t.x+t.y*t.y),t.dx=t.x/t.magnitude,t.dy=t.y/t.magnitude,r.vx=(a=e.vx*t.dx+e.vy*t.dy)*t.dx,r.vy=a*t.dy,s.vx=(i=e.vx*(t.lx/t.magnitude)+e.vy*(t.ly/t.magnitude))*(t.lx/t.magnitude),s.vy=i*(t.ly/t.magnitude),s.vx*=-1,s.vy*=-1,n.x=r.vx+s.vx,n.y=r.vy+s.vy,e.vx=n.x/o,e.vy=n.y/o})(e,d))),c},e.movingCircleCollision=(e,t,a)=>{var i,r,s,n,o={},l={},h={},d={},c={},g=!1;if(e.mass=e.mass||1,t.mass=t.mass||1,void 0===a&&(a=!1),a?(o.vx=t.gx+t.radius-(e.gx+e.radius),o.vy=t.gy+t.radius-(e.gy+e.radius)):(o.vx=t.centerX-e.centerX,o.vy=t.centerY-e.centerY),o.magnitude=Math.sqrt(o.vx*o.vx+o.vy*o.vy),(i=e.radius+t.radius)>o.magnitude){g=!0,r=i-o.magnitude,r+=.3,o.dx=o.vx/o.magnitude,o.dy=o.vy/o.magnitude,o.vxHalf=Math.abs(o.dx*r/2),o.vyHalf=Math.abs(o.dy*r/2),n=e.y>t.y?1:-1,e.x=e.x+o.vxHalf*(s=e.x>t.x?1:-1),e.y=e.y+o.vyHalf*n,t.x=t.x+o.vxHalf*-s,t.y=t.y+o.vyHalf*-n,o.lx=o.vy,o.ly=-o.vx;var u=e.vx*o.dx+e.vy*o.dy;l.x=u*o.dx,l.y=u*o.dy;var y=e.vx*(o.lx/o.magnitude)+e.vy*(o.ly/o.magnitude);h.x=y*(o.lx/o.magnitude),h.y=y*(o.ly/o.magnitude);var p=t.vx*o.dx+t.vy*o.dy;d.x=p*o.dx,d.y=p*o.dy;var f=t.vx*(o.lx/o.magnitude)+t.vy*(o.ly/o.magnitude);c.x=f*(o.lx/o.magnitude),c.y=f*(o.ly/o.magnitude),e.bounce={},e.bounce.x=h.x+d.x,e.bounce.y=h.y+d.y,t.bounce={},t.bounce.x=l.x+c.x,t.bounce.y=l.y+c.y,e.vx=e.bounce.x/e.mass,e.vy=e.bounce.y/e.mass,t.vx=t.bounce.x/t.mass,t.vy=t.bounce.y/t.mass}return g},e.multipleCircleCollision=(t,a)=>{void 0===a&&(a=!1);for(var i=0;t.length>i;i++)for(var r=t[i],s=i+1;t.length>s;s++)e.movingCircleCollision(r,t[s],a)},e.circlePointCollision=(t,a,i,r)=>(void 0===r&&(r=!1),void 0===i&&(i=!1),a.diameter=1,a.radius=.5,a.centerX=a.x,a.centerY=a.y,a.gx=a.x,a.gy=a.y,e.circleCollision(t,a,i,r)),e.circleRectangleCollision=(t,a,i,r)=>{var s,n,o,l,h,d;if(void 0===r&&(r=!1),void 0===i&&(i=!1),r?(o=t.gx,l=t.gy,h=a.gx,d=a.gy):(o=t.x,l=t.y,h=a.x,d=a.y),"topMiddle"==(s=d-a.halfHeight>l?h-1-a.halfWidth>o?"topLeft":o>h+1+a.halfWidth?"topRight":"topMiddle":l>d+a.halfHeight?h-1-a.halfWidth>o?"bottomLeft":o>h+1+a.halfWidth?"bottomRight":"bottomMiddle":h-a.halfWidth>o?"leftMiddle":"rightMiddle")||"bottomMiddle"===s||"leftMiddle"===s||"rightMiddle"===s)n=e.rectangleCollision(t,a,i,r);else{var c={};switch(s){case"topLeft":c.x=h,c.y=d;break;case"topRight":c.x=h+a.width,c.y=d;break;case"bottomLeft":c.x=h,c.y=d+a.height;break;case"bottomRight":c.x=h+a.width,c.y=d+a.height}n=e.circlePointCollision(t,c,i,r)}return n&&s},e.hit=(t,a,i,r,s,n)=>{var o;return i=i||!1,r=r||!1,s=s||!1,a instanceof Array||t instanceof Array?(()=>{t instanceof Array&&(a=t);for(var e=a.length-1;e>=0;e--){var i=a[e];(o=l(t,i))&&n&&n(o,i)}})():(o=l(t,a))&&n&&n(o),o;function l(t,a){var n=void 0!==a.parent;if(void 0!==t.parent&&n)return t.diameter&&a.diameter?((t,a)=>i?t.vx+t.vy!==0&&a.vx+a.vy!==0?e.movingCircleCollision(t,a,s):e.circleCollision(t,a,r,s):e.hitTestCircle(t,a,s))(t,a):t.diameter&&!a.diameter?((t,a)=>i?e.circleRectangleCollision(t,a,r,s):e.hitTestCircleRectangle(t,a,s))(t,a):((t,a)=>i?e.rectangleCollision(t,a,!!r,s):e.hitTestRectangle(t,a,s))(t,a);if(n&&void 0!==t.x&&void 0!==t.y)return e.hitTestPoint(t,a);throw Error("I'm sorry, "+t+" and "+a+" cannot be use together in a collision test.")}},e.requestFullScreen=()=>{document.fullscreenEnabled||e.canvas.requestFullscreen()},e.exitFullScreen=()=>{document.fullscreenEnabled&&document.exitFullscreen()},e.alignFullscreen=()=>{var t,a;if(t=screen.width/e.canvas.width,a=screen.height/e.canvas.height,e.fullscreenScale=Math.min(t,a),0===document.styleSheets.length){var i=document.createElement("div");i.innerHTML="<style></style>",document.body.appendChild(i)}var r=navigator.userAgent.toLowerCase();e.canvas.width>e.canvas.height?-1!==r.indexOf("safari")||-1!==r.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain}",0):-1!==r.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==r.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==r.indexOf("explorer")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==r.indexOf("safari")||-1!==r.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==r.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==r.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==r.indexOf("msie")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {height: 100%; margin: 0 auto; object-fit: contain;}",0)},e.enableFullscreen=function(t){t&&(t=[].slice.call(arguments)),e.alignFullscreen(),e.canvas.addEventListener("mouseup",e.requestFullScreen,!1),e.canvas.addEventListener("touchend",e.requestFullScreen,!1),t&&t.forEach(t=>{window.addEventListener("keyup",a=>{a.keyCode===t&&e.exitFullScreen(),a.preventDefault()},!1)})},e.launchFullscreen=t=>{e.hitTestPoint(e.pointer.position,t)&&e.enableFullscreen()},e.scaleFullscreen=()=>{document.fullscreenEnabled?(e.scale=e.fullscreenScale,e.pointer.scale=e.fullscreenScale):e.canvas.scaled||(e.scale=1,e.pointer.scale=1)}}(o),o.start(),o.scaleToWindow(),o.canvas.ctx.imageSmoothingEnabled=!1,o.canvas.style.border="2px black solid",o.backgroundColor="black",window.addEventListener("resize",()=>{o.scaleToWindow()});</script>

<body>
</body>
