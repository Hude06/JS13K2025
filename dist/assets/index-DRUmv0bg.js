!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var e=e||{};e.VERSION="0.0.1",e.plugins=void 0,e.custom=void 0,e.create=function(t,n,r,i,a){var o,s={};if(s.canvas=document.createElement("canvas"),s.canvas.setAttribute("width",1*t),s.canvas.setAttribute("height",1*n),s.canvas.style.backgroundColor="black",document.body.appendChild(s.canvas),s.canvas.ctx=s.canvas.getContext("2d"),s.stage=(l(o={}),o.stage=!0,o.width=s.canvas.width,o.height=s.canvas.height,o.x=0,o.y=0,o.parent=void 0,o),s.pointer=function(){var e={_x:0,_y:0};return Object.defineProperties(e,{x:{get:function(){return e._x/s.scale},enumerable:!0,configurable:!0},y:{get:function(){return e._y/s.scale},enumerable:!0,configurable:!0},centerX:{get:function(){return e.x},enumerable:!0,configurable:!0},centerY:{get:function(){return e.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:e.x,y:e.y}},enumerable:!0,configurable:!0}}),e.isDown=!1,e.isUp=!0,e.tapped=!1,e.downTime=0,e.elapsedTime=0,e.press=void 0,e.release=void 0,e.tap=void 0,e.dragSprite=null,e.dragOffsetX=0,e.dragOffsetY=0,e.moveHandler=function(t){e._x=t.pageX-t.target.offsetLeft,e._y=t.pageY-t.target.offsetTop,t.preventDefault()},e.touchmoveHandler=function(t){e._x=t.targetTouches[0].pageX-s.canvas.offsetLeft,e._y=t.targetTouches[0].pageY-s.canvas.offsetTop,t.preventDefault()},e.downHandler=function(t){e._x=t.pageX-t.target.offsetLeft,e._y=t.pageY-t.target.offsetTop,e.isDown=!0,e.isUp=!1,e.tapped=!1,e.downTime=Date.now(),e.press&&e.press(),t.preventDefault()},e.touchstartHandler=function(t){e._x=t.targetTouches[0].pageX-s.canvas.offsetLeft,e._y=t.targetTouches[0].pageY-s.canvas.offsetTop,e.isDown=!0,e.isUp=!1,e.tapped=!1,e.downTime=Date.now(),e.press&&e.press(),t.preventDefault()},e.upHandler=function(t){e.elapsedTime=Math.abs(e.downTime-Date.now()),e.elapsedTime<=200&&(e.tapped=!0,e.tap&&e.tap()),e.isUp=!0,e.isDown=!1,e.release&&e.release(),t.preventDefault()},s.canvas.addEventListener("mousemove",e.moveHandler.bind(e),!1),s.canvas.addEventListener("mousedown",e.downHandler.bind(e),!1),window.addEventListener("mouseup",e.upHandler.bind(e),!1),s.canvas.addEventListener("touchmove",e.touchmoveHandler.bind(e),!1),s.canvas.addEventListener("touchstart",e.touchstartHandler.bind(e),!1),window.addEventListener("touchend",e.upHandler.bind(e),!1),s.canvas.style.touchAction="none",e.hitTestSprite=function(t){var n=!1;if(t.circular){var r=e.x-(t.gx+t.halfWidth),i=e.y-(t.gy+t.halfHeight);n=Math.sqrt(r*r+i*i)<t.radius}else{var a=t.gx,o=t.gx+t.width,s=t.gy,h=t.gy+t.height;n=e.x>a&&e.x<o&&e.y>s&&e.y<h}return n},e.updateDragAndDrop=function(){if(e.isDown)if(null===e.dragSprite)for(var t=s.draggableSprites.length-1;t>-1;t--){var n=s.draggableSprites[t];if(n.draggable&&e.hitTestSprite(n)){e.dragOffsetX=e.x-n.gx,e.dragOffsetY=e.y-n.gy,e.dragSprite=n;var r=n.parent.children;r.splice(r.indexOf(n),1),r.push(n),s.draggableSprites.splice(s.draggableSprites.indexOf(n),1),s.draggableSprites.push(n);break}}else e.dragSprite.x=e.x-e.dragOffsetX,e.dragSprite.y=e.y-e.dragOffsetY;e.isUp&&(e.dragSprite=null),s.draggableSprites.some((function(t){return t.draggable&&e.hitTestSprite(t)?(s.canvas.style.cursor="pointer",!0):(s.canvas.style.cursor="auto",!1)}))},e}(),s.key=function(){var e={};return e.leftArrow=f(37),e.upArrow=f(38),e.rightArrow=f(39),e.downArrow=f(40),e.space=f(32),e}(),s.buttons=[],s.dragAndDrop=!1,s.draggableSprites=[],s.tweens=[],s.state=void 0,s.load=a||void 0,s.setup=r||void 0,void 0===s.setup)throw new Error("Please supply the setup function in the constructor");function h(){if(requestAnimationFrame(h,s.canvas),void 0===s._fps)d(),s.render(s.canvas,0);else{var e=Date.now(),t=e-s._startTime;for(t>1e3&&(t=s._frameDuration),s._startTime=e,s._lag+=t;s._lag>=s._frameDuration;)s.stage.children.forEach((function(e){!function e(t){t._previousX=t.x,t._previousY=t.y,t.children&&t.children.length>0&&t.children.forEach((function(t){e(t)}))}(e)})),d(),s._lag-=s._frameDuration;var n=s._lag/s._frameDuration;s.render(s.canvas,n)}}function d(){if(s.buttons.length>0){s.canvas.style.cursor="auto";for(var e=s.buttons.length-1;e>=0;e--){var t=s.buttons[e];t.update(s.pointer,s.canvas),"over"!==t.state&&"down"!==t.state||t.stage||(s.canvas.style.cursor="pointer")}}if(s.dragAndDrop&&s.pointer.updateDragAndDrop(),s.state&&!s.paused&&s.state(),0!==s.updateFunctions.length)for(var n=0;n<s.updateFunctions.length;n++)(0,s.updateFunctions[n])()}function l(e){e.x=0,e.y=0,e.vx=0,e.vy=0,e.width=0,e.height=0,e.scaleX=1,e.scaleY=1,e.pivotX=.5,e.pivotY=.5,e.rotation=0,e.visible=!0,e.parent=void 0,e.stage=!1,e.shadow=!1,e.shadowColor="rgba(100, 100, 100, 0.5)",e.shadowOffsetX=3,e.shadowOffsetY=3,e.shadowBlur=3,e.blendMode=void 0,e._alpha=1,e._draggable=void 0,e._layer=0,e._circular=!1,e._interactive=!1,e._previousX=void 0,e._previousY=void 0,e.children=[],e.addChild=function(t){t.parent&&t.parent.removeChild(t),t.parent=e,e.children.push(t)},e.removeChild=function(t){if(t.parent!==e)throw new Error(t+"is not a child of "+e);e.children.splice(e.children.indexOf(t),1)},e.swapChildren=function(t,n){var r=e.children.indexOf(t),i=e.children.indexOf(n);if(-1===r||-1===i)throw new Error(child+" Both objects must be a child of the caller "+e);t.childIndex=i,n.childIndex=r,e.children[r]=n,e.children[i]=t},e.add=function(t){var n=Array.prototype.slice.call(arguments);n.length>1?n.forEach((function(t){e.addChild(t)})):e.addChild(n[0])},e.remove=function(t){var n=Array.prototype.slice.call(arguments);n.length>1?n.forEach((function(t){e.removeChild(t)})):e.removeChild(n[0])},e.setPosition=function(t,n){e.x=t,e.y=n};var t=e;e.putCenter=function(n,r,i){r=r||0,i=i||0,n.x=t.x+t.halfWidth-n.halfWidth+r,n.y=t.y+t.halfHeight-n.halfHeight+i,e.compensateForParentPosition(t,n)},e.putTop=function(n,r,i){r=r||0,i=i||0,n.x=t.x+t.halfWidth-n.halfWidth+r,n.y=t.y-n.height+i,e.compensateForParentPosition(t,n)},e.putRight=function(n,r,i){r=r||0,i=i||0,n.x=t.x+t.width+r,n.y=t.y+t.halfHeight-n.halfHeight+i,e.compensateForParentPosition(t,n)},e.putBottom=function(n,r,i){r=r||0,i=i||0,n.x=t.x+t.halfWidth-n.halfWidth+r,n.y=t.y+t.height+i,e.compensateForParentPosition(t,n)},e.putLeft=function(n,r,i){r=r||0,i=i||0,n.x=t.x-n.width+r,n.y=t.y+t.halfHeight-n.halfHeight+i,e.compensateForParentPosition(t,n)},e.compensateForParentPosition=function(e,t){0===t.parent.gx&&0===t.parent.gy||(t.x-=e.gx,t.y-=e.gy)},Object.defineProperties(e,{gx:{get:function(){return this.parent?this.x+this.parent.gx:this.x},enumerable:!0,configurable:!0},gy:{get:function(){return this.parent?this.y+this.parent.gy:this.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:e.x,y:e.y}},enumerable:!0,configurable:!0},alpha:{get:function(){return e.parent._alpha*e._alpha},set:function(t){e._alpha=t},enumerable:!0,configurable:!0},halfWidth:{get:function(){return e.width/2},enumerable:!0,configurable:!0},halfHeight:{get:function(){return e.height/2},enumerable:!0,configurable:!0},centerX:{get:function(){return e.x+e.halfWidth},enumerable:!0,configurable:!0},centerY:{get:function(){return e.y+e.halfHeight},enumerable:!0,configurable:!0},layer:{get:function(){return e._layer},set:function(t){e._layer=t,e.parent.children.sort(g)},enumerable:!0,configurable:!0},circular:{get:function(){return e._circular},set:function(t){!0===t&&!1===e._circular&&(c(e),e._circular=!0),!1===t&&!0===e._circular&&(delete e.diameter,delete e.radius,e._circular=!1)},enumerable:!0,configurable:!0},draggable:{get:function(){return e._draggable},set:function(t){!0===t&&(s.draggableSprites.push(e),e._draggable=!0,!1===s.dragAndDrop&&(s.dragAndDrop=!0)),!1===t&&s.draggableSprites.splice(s.draggableSprites.indexOf(e),1)},enumerable:!0,configurable:!0},interactive:{get:function(){return e._interactive},set:function(t){!0===t&&(u(e),e._interactive=!0),!1===t&&(s.buttons.splice(s.buttons.indexOf(e),1),e._interactive=!1)},enumerable:!0,configurable:!0},localBounds:{get:function(){return{x:0,y:0,width:e.width,height:e.height}},enumerable:!0,configurable:!0},globalBounds:{get:function(){return rectangle={x:e.gx,y:e.gy,width:e.gx+e.width,height:e.gy+e.height},rectangle},enumerable:!0,configurable:!0},empty:{get:function(){return 0===e.children.length},enumerable:!0,configurable:!0}})}function c(e){Object.defineProperties(e,{diameter:{get:function(){return e.width},set:function(t){e.width=t,e.height=t},enumerable:!0,configurable:!0},radius:{get:function(){return e.width/2},set:function(t){e.width=2*t,e.height=2*t},enumerable:!0,configurable:!0}})}function u(e){e.press=e.press||void 0,e.release=e.release||void 0,e.over=e.over||void 0,e.out=e.out||void 0,e.tap=e.tap||void 0,e.state="up",e.action="",e.pressed=!1,e.enabled=!0,e.hoverOver=!1,s.buttons.push(e),e.update=function(t,n){if(e.enabled){var r=s.pointer.hitTestSprite(e);t.isUp&&(e.state="up","button"===e.subtype&&e.show(0)),r&&(e.state="over",e.frames&&3===e.frames.length&&"button"===e.subtype&&e.show(1),t.isDown&&(e.state="down","button"===e.subtype&&(3===e.frames.length?e.show(2):e.show(1)))),"down"===e.state&&(e.pressed||(e.press&&e.press(),e.pressed=!0,e.action="pressed")),"over"===e.state&&(e.pressed&&(e.release&&e.release(),e.pressed=!1,e.action="released",s.pointer.tapped&&e.tap&&e.tap()),e.hoverOver||(e.over&&e.over(),e.hoverOver=!0)),"up"===e.state&&(e.pressed&&(e.release&&e.release(),e.pressed=!1,e.action="released"),e.hoverOver&&(e.out&&e.out(),e.hoverOver=!1))}}}function f(e){var t={};return t.code=e,t.isDown=!1,t.isUp=!0,t.press=void 0,t.release=void 0,t.downHandler=function(e){e.keyCode===t.code&&(t.isUp&&t.press&&t.press(),t.isDown=!0,t.isUp=!1),e.preventDefault()},t.upHandler=function(e){e.keyCode===t.code&&(t.isDown&&t.release&&t.release(),t.isDown=!1,t.isUp=!0),e.preventDefault()},window.addEventListener("keydown",t.downHandler.bind(t),!1),window.addEventListener("keyup",t.upHandler.bind(t),!1),t}function g(e,t){return e.layer<t.layer?-1:(e.layer,t.layer,1)}return s.assetFilePaths=i||void 0,s.paused=!1,s._fps=60,s._startTime=Date.now(),s._frameDuration=1e3/s._fps,s._lag=0,s.interpolate=!0,s.updateFunctions=[],s.scale=1,s.start=function(){s.assetFilePaths?(s.assets.whenLoaded=function(){s.state=void 0,s.setup()},s.assets.load(s.assetFilePaths),s.load&&(s.state=s.load)):s.setup(),h()},s.pause=function(){s.paused=!0},s.resume=function(){s.paused=!1},s.hidePointer=function(){s.canvas.style.cursor="none"},s.showPointer=function(){s.canvas.style.cursor="auto"},Object.defineProperties(s,{fps:{get:function(){return s._fps},set:function(e){s._fps=e,s._startTime=Date.now(),s._frameDuration=1e3/s._fps},enumerable:!0,configurable:!0},backgroundColor:{set:function(e){s.canvas.style.backgroundColor=e},enumerable:!0,configurable:!0}}),s.remove=function(e){var t=Array.prototype.slice.call(arguments);if(t[0]instanceof Array){var n=t[0];if(n.length>0)for(var r=n.length-1;r>=0;r--){var i=n[r];i.parent.removeChild(i),n.splice(n.indexOf(i),1)}}else t.length>1?t.forEach((function(e){e.parent.removeChild(e)})):t[0].parent.removeChild(t[0])},s.group=function(e){var t={};if(l(t),t.addChild=function(e){e.parent&&e.parent.removeChild(e),e.parent=t,t.children.push(e),t.calculateSize()},t.removeChild=function(e){if(e.parent!==t)throw new Error(e+"is not a child of "+t);t.children.splice(t.children.indexOf(e),1),t.calculateSize()},t.calculateSize=function(){t.children.length>0&&(t._newWidth=0,t._newHeight=0,t.children.forEach((function(e){e.x+e.width>t._newWidth&&(t._newWidth=e.x+e.width),e.y+e.height>t._newHeight&&(t._newHeight=e.y+e.height)})),t.width=t._newWidth,t.height=t._newHeight)},s.stage.addChild(t),e){var n=Array.prototype.slice.call(arguments);n.forEach((function(e){t.addChild(e)}))}return t},s.rectangle=function(e,t,n,r,i,a,o){var h={};return l(h),h.mask=!1,h.width=e||32,h.height=t||32,h.fillStyle=n||"red",h.strokeStyle=r||"none",h.lineWidth=i||0,h.x=a||0,h.y=o||0,s.stage.addChild(h),h.render=function(e){e.strokeStyle=h.strokeStyle,e.lineWidth=h.lineWidth,e.fillStyle=h.fillStyle,e.beginPath(),e.rect(-h.width*h.pivotX,-h.height*h.pivotY,h.width,h.height),!0===h.mask?e.clip():("none"!==h.strokeStyle&&e.stroke(),"none"!==h.fillStyle&&e.fill())},h},s.circle=function(e,t,n,r,i,a){var o={};return l(o),o.mask=!1,o.width=e||32,o.height=e||32,o.fillStyle=t||"red",o.strokeStyle=n||"none",o.lineWidth=r||"none",o.x=i||0,o.y=a||0,s.stage.addChild(o),c(o),o.render=function(e){e.strokeStyle=o.strokeStyle,e.lineWidth=o.lineWidth,e.fillStyle=o.fillStyle,e.beginPath(),e.arc(o.radius+-o.diameter*o.pivotX,o.radius+-o.diameter*o.pivotY,o.radius,0,2*Math.PI,!1),!0===o.mask?e.clip():("none"!==o.strokeStyle&&e.stroke(),"none"!==o.fillStyle&&e.fill())},o},s.line=function(e,t,n,r,i,a){var o={};return l(o),n||0===n||(n=0),r||0===r||(r=0),i||0===i||(i=32),a||0===a||(a=32),o.ax=n,o.ay=r,o.bx=i,o.by=a,o.strokeStyle=e||"red",o.lineWidth=t||1,o.lineJoin="round",s.stage.addChild(o),o.render=function(e){e.strokeStyle=o.strokeStyle,e.lineWidth=o.lineWidth,e.lineJoin=o.lineJoin,e.beginPath(),e.moveTo(o.ax,o.ay),e.lineTo(o.bx,o.by),"none"!==o.strokeStyle&&e.stroke(),"none"!==o.fillStyle&&e.fill()},o},s.text=function(e,t,n,r,i){var a={};return l(a),a.content=e||"Hello!",a.font=t||"12px sans-serif",a.fillStyle=n||"red",a.textBaseline="top",Object.defineProperties(a,{width:{get:function(){return s.canvas.ctx.measureText(a.content).width},enumerable:!0,configurable:!0},height:{get:function(){return s.canvas.ctx.measureText("M").width},enumerable:!0,configurable:!0}}),s.stage.addChild(a),a.x=r||0,a.y=i||0,a.render=function(e){e.strokeStyle=a.strokeStyle,e.lineWidth=a.lineWidth,e.fillStyle=a.fillStyle,0===a.width&&(a.width=e.measureText(a.content).width),0===a.height&&(a.height=e.measureText("M").width),e.translate(-a.width*a.pivotX,-a.height*a.pivotY),e.font=a.font,e.textBaseline=a.textBaseline,e.fillText(a.content,0,0)},a},s.frame=function(e,t,n,r,i){var a={};return a.image=e,a.x=t,a.y=n,a.width=r,a.height=i,a},s.frames=function(e,t,n,r){var i={};return i.image=e,i.data=t,i.width=n,i.height=r,i},s.filmstrip=function(e,t,n,r){for(var i=s.assets[e].source,a=[],o=i.width/t,h=o*(i.height/n),d=0;d<h;d++){var l,c;l=d%o*t,c=Math.floor(d/o)*n,r&&r>0&&(l+=r+r*d%o,c+=r+r*Math.floor(d/o)),a.push([l,c])}return s.frames(e,a,t,n)},s.sprite=function(e){var t={};if(void 0===e)throw new Error("Sprites require a source");return l(t),t.frames=[],t.loop=!0,t._currentFrame=0,t.setTexture=function(e){if(e.image)if(e.image&&!e.data){if(!(s.assets[e.image].source instanceof Image))throw new Error(e.image+" is not an image file");t.source=s.assets[e.image].source,t.sourceX=e.x,t.sourceY=e.y,t.width=e.width,t.height=e.height,t.sourceWidth=e.width,t.sourceHeight=e.height}else e.image&&e.data&&(t.source=s.assets[e.image].source,t.frames=e.data,t.sourceX=t.frames[0][0],t.sourceY=t.frames[0][1],t.width=e.width,t.height=e.height,t.sourceWidth=e.width,t.sourceHeight=e.height);else e instanceof Array?(t.frames=e,t.source=s.assets[e[0]].source,t.sourceX=s.assets[e[0]].frame.x,t.sourceY=s.assets[e[0]].frame.y,t.width=s.assets[e[0]].frame.w,t.height=s.assets[e[0]].frame.h,t.sourceWidth=s.assets[e[0]].frame.w,t.sourceHeight=s.assets[e[0]].frame.h):(t.tilesetFrame=s.assets[e],t.source=t.tilesetFrame.source,t.sourceX=t.tilesetFrame.frame.x,t.sourceY=t.tilesetFrame.frame.y,t.width=t.tilesetFrame.frame.w,t.height=t.tilesetFrame.frame.h,t.sourceWidth=t.tilesetFrame.frame.w,t.sourceHeight=t.tilesetFrame.frame.h)},t.setTexture(e),t.gotoAndStop=function(e){if(!(t.frames.length>0))throw new Error("Frame number "+e+"doesn't exist");t.frames[0]instanceof Array?(t.sourceX=t.frames[e][0],t.sourceY=t.frames[e][1]):s.assets[t.frames[e]].frame&&(t.source=s.assets[t.frames[e]].source,t.sourceX=s.assets[t.frames[e]].frame.x,t.sourceY=s.assets[t.frames[e]].frame.y,t.sourceWidth=s.assets[t.frames[e]].frame.w,t.sourceHeight=s.assets[t.frames[e]].frame.h,t.width=s.assets[t.frames[e]].frame.w,t.height=s.assets[t.frames[e]].frame.h),t._currentFrame=e},t.x=0,t.y=0,t.frames.length>0&&(s.addStatePlayer(t),Object.defineProperty(t,"currentFrame",{get:function(){return t._currentFrame},enumerable:!1,configurable:!1})),s.stage.addChild(t),t.render=function(e){e.drawImage(t.source,t.sourceX,t.sourceY,t.sourceWidth,t.sourceHeight,-t.width*t.pivotX,-t.height*t.pivotY,t.width,t.height)},t},s.button=function(e){var t=s.sprite(e);return t.subtype="button",u(t),t},s.image=function(e){return s.assets[e]},s.json=function(e){return s.assets[e]},s.addStatePlayer=function(e){var t=0,n=0,r=0,i=0,a=void 0,o=!1;function s(s){d(),r=s[0],i=s[1],n=i-r,0===r&&(n+=1,t+=1),1===n&&(n=2,t+=1),e.fps||(e.fps=12);var l=1e3/e.fps;e.gotoAndStop(r),o||(a=setInterval(h.bind(this),l),o=!0)}function h(){t<n?(e.gotoAndStop(e.currentFrame+1),t+=1):e.loop&&(e.gotoAndStop(r),t=1)}function d(){void 0!==a&&!0===o&&(o=!1,t=0,r=0,i=0,n=0,clearInterval(a))}e.show=function(t){d(),"string"!=typeof t?e.gotoAndStop(t):e.gotoAndStop(e.frames.indexOf(t))},e.play=function(){s([0,e.frames.length-1])},e.stop=function(){d(),e.gotoAndStop(e.currentFrame)},e.playing=o,e.playSequence=s},s.render=function(e,t){var n=e.ctx;n.clearRect(0,0,e.width,e.height);for(var r=0;r<s.stage.children.length;r++)i(s.stage.children[r]);function i(r){if(r.visible&&r.gx<e.width+r.width&&r.gx+r.width>=-r.width&&r.gy<e.height+r.height&&r.gy+r.height>=-r.height){if(n.save(),s.interpolate?(void 0!==r._previousX?r.renderX=(r.x-r._previousX)*t+r._previousX:r.renderX=r.x,void 0!==r._previousY?r.renderY=(r.y-r._previousY)*t+r._previousY:r.renderY=r.y):(r.renderX=r.x,r.renderY=r.y),n.translate(r.renderX+r.width*r.pivotX,r.renderY+r.height*r.pivotY),n.globalAlpha=r.alpha,n.rotate(r.rotation),n.scale(r.scaleX,r.scaleY),r.shadow&&(n.shadowColor=r.shadowColor,n.shadowOffsetX=r.shadowOffsetX,n.shadowOffsetY=r.shadowOffsetY,n.shadowBlur=r.shadowBlur),r.blendMode&&(n.globalCompositeOperation=r.blendMode),r.render&&r.render(n),r.children&&r.children.length>0){n.translate(-r.width*r.pivotX,-r.height*r.pivotY);for(var a=0;a<r.children.length;a++)i(r.children[a])}n.restore()}}},s.assets={toLoad:0,loaded:0,imageExtensions:["png","jpg","gif","webp"],fontExtensions:["ttf","otf","ttc","woff"],audioExtensions:["mp3","ogg","wav","webm"],jsonExtensions:["json"],whenLoaded:void 0,load:function(e){var t=this;t.toLoad=e.length,e.forEach((function(e){var n=e.split(".").pop();if(-1!==t.imageExtensions.indexOf(n)){var r=new Image;r.addEventListener("load",(function(){r.name=e,t[r.name]={source:r,frame:{x:0,y:0,w:r.width,h:r.height}},t.loadHandler()}),!1),r.src=e}else if(-1!==t.fontExtensions.indexOf(n)){var i=e.split("/").pop().split(".")[0],a=document.createElement("style"),o="@font-face {font-family: '"+i+"'; src: url('"+e+"');}";a.appendChild(document.createTextNode(o)),document.head.appendChild(a),t.loadHandler()}else if(-1!==t.audioExtensions.indexOf(n)){var h=s.makeSound(e,t.loadHandler.bind(t));h.name=e,t[h.name]=h}else if(-1!==t.jsonExtensions.indexOf(n)){var d=new XMLHttpRequest,l={};d.open("GET",e,!0),d.addEventListener("readystatechange",(function(){200===d.status&&4===d.readyState&&((l=JSON.parse(d.responseText)).name=e,t[l.name]=l,l.frames?t.createTilesetFrames(l,e):t.loadHandler())})),d.send()}}))},createTilesetFrames:function(e,t){var n=this,r=t.replace(/[^\/]*$/,""),i=new Image;i.addEventListener("load",(function(){n[r+e.meta.image]={source:i,frame:{x:0,y:0,w:i.width,h:i.height}},Object.keys(e.frames).forEach((function(t){n[t]=e.frames[t],n[t].source=i})),n.loadHandler()}),!1),i.src=r+e.meta.image},loadHandler:function(){this.loaded+=1,this.toLoad===this.loaded&&(this.toLoad=0,this.loaded=0,this.whenLoaded())}},s.keyboard=f,s.makeDisplayObject=l,void 0!==e.plugins&&e.plugins(s),void 0!==e.custom&&e.custom(s),s},window.ga=e.create,e.plugins=function(e){function t(e){e.x+=0|e.vx,e.y+=0|e.vy}e.move=function(e){if(e instanceof Array==0)t(e);else for(var n=0;n<e.length;n++)t(e[n])},e.contain=function(e,t,n,r){var i,a=t.x,o=t.y,s=t.width,h=t.height;return n=n||!1,e.x<a&&(n&&(e.vx*=-1),e.mass&&(e.vx/=e.mass),e.x=a,i="left"),e.y<o&&(n&&(e.vy*=-1),e.mass&&(e.vy/=e.mass),e.y=o,i="top"),e.x+e.width>s&&(n&&(e.vx*=-1),e.mass&&(e.vx/=e.mass),e.x=s-e.width,i="right"),e.y+e.height>h&&(n&&(e.vy*=-1),e.mass&&(e.vy/=e.mass),e.y=h-e.height,i="bottom"),i&&r&&r(i),i},e.rectangleCollision=function(e,t,n,r){var i,a,o,s,h,d,l;return void 0===n&&(n=!1),void 0===r&&(r=!1),r?(d=e.gx+e.halfWidth-(t.gx+t.halfWidth),l=e.gy+e.halfHeight-(t.gy+t.halfHeight)):(d=e.centerX-t.centerX,l=e.centerY-t.centerY),a=e.halfWidth+t.halfWidth,o=e.halfHeight+t.halfHeight,Math.abs(d)<a&&Math.abs(l)<o&&((s=a-Math.abs(d))>=(h=o-Math.abs(l))?(l>0?(i="top",e.y=e.y+h):(i="bottom",e.y=e.y-h),n&&(e.vy*=-1)):(d>0?(i="left",e.x=e.x+s):(i="right",e.x=e.x-s),n&&(e.vx*=-1))),i},e.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.worldCamera=function(e,t){return{width:t.width,height:t.height,_x:0,_y:0,get x(){return this._x},set x(t){this._x=t,e.x=-this._x,e._previousX=e.x},get y(){return this._y},set y(t){this._y=t,e.y=-this._y,e._previousY=e.y},get centerX(){return this.x+this.width/2},get centerY(){return this.y+this.height/2},get rightInnerBoundary(){return this.x+this.width/2+this.width/4},get leftInnerBoundary(){return this.x+this.width/2-this.width/4},get topInnerBoundary(){return this.y+this.height/2-this.height/4},get bottomInnerBoundary(){return this.y+this.height/2+this.height/4},follow:function(t){t.x<this.leftInnerBoundary&&(this.x=t.x-this.width/4),t.y<this.topInnerBoundary&&(this.y=t.y-this.height/4),t.x+t.width>this.rightInnerBoundary&&(this.x=t.x+t.width-this.width/4*3),t.y+t.height>this.bottomInnerBoundary&&(this.y=t.y+t.height-this.height/4*3),this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x+this.width>e.width&&(this.x=e.width-this.width),this.y+this.height>e.height&&(this.y=e.height-this.height)},centerOver:function(e){this.x=e.x+e.halfWidth-this.width/2,this.y=e.y+e.halfHeight-this.height/2}}},e.hit=function(t,n,r,i,a,o){var s;return r=r||!1,i=i||!1,a=a||!1,n instanceof Array||t instanceof Array?function(){t instanceof Array&&(n=t,t=t);for(var e=n.length-1;e>=0;e--){var r=n[e];(s=h(t,r))&&o&&o(s,r)}}():(s=h(t,n))&&o&&o(s),s;function h(t,n){var o=void 0!==t.parent,s=void 0!==n.parent;if(o&&s)return t.diameter&&n.diameter?function(t,n){return r?t.vx+t.vy!==0&&n.vx+n.vy!==0?e.movingCircleCollision(t,n,a):e.circleCollision(t,n,i,a):e.hitTestCircle(t,n,a)}(t,n):t.diameter&&!n.diameter?function(t,n){return r?e.circleRectangleCollision(t,n,i,a):e.hitTestCircleRectangle(t,n,a)}(t,n):function(t,n){return r?i?e.rectangleCollision(t,n,!0,a):e.rectangleCollision(t,n,!1,a):e.hitTestRectangle(t,n,a)}(t,n);if(s&&void 0!==t.x&&void 0!==t.y)return e.hitTestPoint(t,n);throw new Error("I'm sorry, "+t+" and "+n+" cannot be use together in a collision test.")}},e.hitTestRectangle=function(e,t,n){var r,i,a,o;return void 0===n&&(n=!1),n?(a=e.gx+e.halfWidth-(t.gx+t.halfWidth),o=e.gy+e.halfHeight-(t.gy+t.halfHeight)):(a=e.centerX-t.centerX,o=e.centerY-t.centerY),r=e.halfWidth+t.halfWidth,i=e.halfHeight+t.halfHeight,Math.abs(a)<r&&Math.abs(o)<i},e.scaleToWindow=function(t){var n,r,i,a,o;t=t||"#2C3539",n=window.innerWidth/e.canvas.width,r=window.innerHeight/e.canvas.height,i=Math.min(n,r),e.canvas.style.transformOrigin="0 0",e.canvas.style.transform="scale("+i+")","horizontally"==(a=e.canvas.width>e.canvas.height?e.canvas.width*i<window.innerWidth?"horizontally":"vertically":e.canvas.height*i<window.innerHeight?"vertically":"horizontally")&&(o=(window.innerWidth-e.canvas.width*i)/2,e.canvas.style.marginLeft=o+"px",e.canvas.style.marginRight=o+"px"),"vertically"===a&&(o=(window.innerHeight-e.canvas.height*i)/2,e.canvas.style.marginTop=o+"px",e.canvas.style.marginBottom=o+"px"),e.canvas.style.paddingLeft=0,e.canvas.style.paddingRight=0,e.canvas.style.paddingTop=0,e.canvas.style.paddingBottom=0,e.canvas.style.display="block",document.body.style.backgroundColor=t,e.pointer.scale=i,e.scale=i,e.canvas.scaled=!0;var s=navigator.userAgent.toLowerCase();-1!=s.indexOf("safari")&&(s.indexOf("chrome")>-1||(e.canvas.style.maxHeight="100%",e.canvas.style.minHeight="100%"))}};let t,n,r,i,a,o,s=e.create(800,512,(function(){s.stage.width=2*s.canvas.width,s.stage.height=s.canvas.height,a=s.group(),r=s.group(),n=s.group(t),s.group(),s.canvas.ctx.imageSmoothingEnabled=!1,s.canvas.style.border="2px black solid",s.backgroundColor="white";for(let e=0;e<100;e++)d(64*e,s.canvas.height,Math.floor(2*Math.random())+1);n.addChild(r);for(let e=0;e<5;e++){let t=h(20*e,r.children[0].gy-25);a.addChild(t)}n.addChild(a),i=s.rectangle(25,25,"yellow"),i.x=s.canvas.width-25,i.y=r.children[r.children.length-1].gy,n.addChild(i),t=s.sprite("../public/Cat.png"),t.width=40,t.height=32,t.lastDropTime=0,t.dropCooldown=200,t.grounded=!1,t.x=s.canvas.width/2-t.width/2,t.mouses=s.group(),o=s.worldCamera(n,s.canvas),s.key.leftArrow.press=function(){if(t.vx=-2,t.scaleX=-1,a.children.length>0)for(let e=0;e<a.children.length;e++)a.children[e].scaleX=-1,a.children[e].offset=-5},s.key.leftArrow.release=function(){s.key.rightArrow.isDown||(t.vx=0)},s.key.rightArrow.press=function(){if(t.vx=2,t.scaleX=1,a.children.length>0)for(let e=0;e<a.children.length;e++)a.children[e].scaleX=1,a.children[e].offset=5},s.key.rightArrow.release=function(){s.key.leftArrow.isDown||(t.vx=0)},s.key.upArrow.press=function(){t.grounded,t.grounded&&(t.vy-=6,t.grounded=!1)},s.state=l}),["../public/Cat.png","../public/Mouse_Stand.png","../public/Mouse_Lay.png","../public/Roof1.png","../public/Roof2.png"]);function h(e,t){let n=s.sprite("../public/Mouse_Stand.png");return n.width=22,n.height=22,n.x=e,n.y=t,n}function d(e,t,n){let i=1===n?"Roof1.png":"Roof2.png";for(let a=0;a<10*Math.random();a++){let n=s.sprite("../public/"+i);n.width=64,n.height=32,n.x=e,n.y=t-100-32*a,r.addChild(n)}}function l(){s.move(t),t.grounded||(t.vy+=.2);for(let e=0;e<a.children.length;e++){const n=a.children[e];s.hit(t,n,!1,!1,!0,()=>{const r=s.sprite("../public/Mouse_Lay.png");r.width=20,r.height=20,r.offset=n.offset||5,t.mouses.addChild(r),s.remove(n),a.removeChild(n),e--})}t.grounded=!1;for(let e=0;e<r.children.length;e++){let n=r.children[e];s.hit(t,n,!0,!1,!0,e=>{"top"===e?(t.grounded=!0,t.vy=0,t.y=n.y-t.height):"bottom"===e?t.vy=0:"left"!==e&&"right"!==e||(t.vx=0)})}o.centerOver(t)}e.plugins(s),s.start(),s.scaleToWindow(),window.addEventListener("resize",(function(e){s.scaleToWindow()}));
