(()=>{function v(b){var k;b.ep||(b.ep=!0,k={},b.integrity&&(k.integrity=b.integrity),b.referrerPolicy&&(k.referrerPolicy=b.referrerPolicy),k.credentials="use-credentials"===b.crossOrigin?"include":"anonymous"===b.crossOrigin?"omit":"same-origin",fetch(b.href,k))}let N=document.createElement("link").relList;if(!(N&&N.supports&&N.supports("modulepreload"))){for(let b of document.querySelectorAll('link[rel="modulepreload"]'))v(b);(new MutationObserver(b=>{for(var k of b)if("childList"===k.type)for(let m of k.addedNodes)"LINK"===
m.tagName&&"modulepreload"===m.rel&&v(m)})).observe(document,{childList:!0,subtree:!0})}})();var e=e||{};e.VERSION="0.0.1";e.plugins=void 0;e.custom=void 0;
e.create=function(v,N,b,k,m){function x(){if(requestAnimationFrame(x,y.canvas),void 0===y._fps)z(),y.render(y.canvas,0);else{var q=Date.now(),w=q-y._startTime;1E3<w&&(w=y._frameDuration);y._startTime=q;for(y._lag+=w;y._lag>=y._frameDuration;)y.stage.children.forEach(function(A){!function E(L){L._previousX=L.x;L._previousY=L.y;L.children&&0<L.children.length&&L.children.forEach(function(G){E(G)})}(A)}),z(),y._lag-=y._frameDuration;q=y._lag/y._frameDuration;y.render(y.canvas,q)}}function z(){if(0<y.buttons.length){y.canvas.style.cursor=
"auto";for(var q=y.buttons.length-1;0<=q;q--){var w=y.buttons[q];w.update(y.pointer,y.canvas);"over"!==w.state&&"down"!==w.state||w.stage||(y.canvas.style.cursor="pointer")}}if(y.dragAndDrop&&y.pointer.updateDragAndDrop(),y.state&&!y.paused&&y.state(),0!==y.updateFunctions.length)for(q=0;q<y.updateFunctions.length;q++)(0,y.updateFunctions[q])()}function C(q){q.x=0;q.y=0;q.vx=0;q.vy=0;q.width=0;q.height=0;q.scaleX=1;q.scaleY=1;q.pivotX=.5;q.pivotY=.5;q.rotation=0;q.visible=!0;q.parent=void 0;q.stage=
!1;q.shadow=!1;q.shadowColor="rgba(100, 100, 100, 0.5)";q.shadowOffsetX=3;q.shadowOffsetY=3;q.shadowBlur=3;q.blendMode=void 0;q._alpha=1;q._draggable=void 0;q._layer=0;q._circular=!1;q._interactive=!1;q._previousX=void 0;q._previousY=void 0;q.children=[];q.addChild=function(w){w.parent&&w.parent.removeChild(w);(w.parent=q).children.push(w)};q.removeChild=function(w){if(w.parent!==q)throw Error(w+"is not a child of "+q);q.children.splice(q.children.indexOf(w),1)};q.swapChildren=function(w,A){var F=
q.children.indexOf(w),L=q.children.indexOf(A);if(-1===F||-1===L)throw Error(child+" Both objects must be a child of the caller "+q);w.childIndex=L;A.childIndex=F;q.children[F]=A;q.children[L]=w};q.add=function(w){var A=Array.prototype.slice.call(arguments);1<A.length?A.forEach(function(F){q.addChild(F)}):q.addChild(A[0])};q.remove=function(w){var A=Array.prototype.slice.call(arguments);1<A.length?A.forEach(function(F){q.removeChild(F)}):q.removeChild(A[0])};q.setPosition=function(w,A){q.x=w;q.y=A};
q.putCenter=function(w,A,F){w.x=q.x+q.halfWidth-w.halfWidth+(A||0);w.y=q.y+q.halfHeight-w.halfHeight+(F||0);q.compensateForParentPosition(q,w)};q.putTop=function(w,A,F){w.x=q.x+q.halfWidth-w.halfWidth+(A||0);w.y=q.y-w.height+(F||0);q.compensateForParentPosition(q,w)};q.putRight=function(w,A,F){w.x=q.x+q.width+(A||0);w.y=q.y+q.halfHeight-w.halfHeight+(F||0);q.compensateForParentPosition(q,w)};q.putBottom=function(w,A,F){w.x=q.x+q.halfWidth-w.halfWidth+(A||0);w.y=q.y+q.height+(F||0);q.compensateForParentPosition(q,
w)};q.putLeft=function(w,A,F){w.x=q.x-w.width+(A||0);w.y=q.y+q.halfHeight-w.halfHeight+(F||0);q.compensateForParentPosition(q,w)};q.compensateForParentPosition=function(w,A){0===A.parent.gx&&0===A.parent.gy||(A.x-=w.gx,A.y-=w.gy)};Object.defineProperties(q,{gx:{get:function(){return this.parent?this.x+this.parent.gx:this.x},enumerable:!0,configurable:!0},gy:{get:function(){return this.parent?this.y+this.parent.gy:this.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:q.x,y:q.y}},
enumerable:!0,configurable:!0},alpha:{get:function(){return q.parent._alpha*q._alpha},set:function(w){q._alpha=w},enumerable:!0,configurable:!0},halfWidth:{get:function(){return q.width/2},enumerable:!0,configurable:!0},halfHeight:{get:function(){return q.height/2},enumerable:!0,configurable:!0},centerX:{get:function(){return q.x+q.halfWidth},enumerable:!0,configurable:!0},centerY:{get:function(){return q.y+q.halfHeight},enumerable:!0,configurable:!0},layer:{get:function(){return q._layer},set:function(w){q._layer=
w;q.parent.children.sort(J)},enumerable:!0,configurable:!0},circular:{get:function(){return q._circular},set:function(w){!0===w&&!1===q._circular&&(B(q),q._circular=!0);!1===w&&!0===q._circular&&(delete q.diameter,delete q.radius,q._circular=!1)},enumerable:!0,configurable:!0},draggable:{get:function(){return q._draggable},set:function(w){!0===w&&(y.draggableSprites.push(q),!(q._draggable=!0)===y.dragAndDrop)&&(y.dragAndDrop=!0);!1===w&&y.draggableSprites.splice(y.draggableSprites.indexOf(q),1)},
enumerable:!0,configurable:!0},interactive:{get:function(){return q._interactive},set:function(w){!0===w&&(H(q),q._interactive=!0);!1===w&&(y.buttons.splice(y.buttons.indexOf(q),1),q._interactive=!1)},enumerable:!0,configurable:!0},localBounds:{get:function(){return{x:0,y:0,width:q.width,height:q.height}},enumerable:!0,configurable:!0},globalBounds:{get:function(){return rectangle={x:q.gx,y:q.gy,width:q.gx+q.width,height:q.gy+q.height}},enumerable:!0,configurable:!0},empty:{get:function(){return 0===
q.children.length},enumerable:!0,configurable:!0}})}function B(q){Object.defineProperties(q,{diameter:{get:function(){return q.width},set:function(w){q.width=w;q.height=w},enumerable:!0,configurable:!0},radius:{get:function(){return q.width/2},set:function(w){q.width=2*w;q.height=2*w},enumerable:!0,configurable:!0}})}function H(q){q.press=q.press||void 0;q.release=q.release||void 0;q.over=q.over||void 0;q.out=q.out||void 0;q.tap=q.tap||void 0;q.state="up";q.action="";q.pressed=!1;q.enabled=!0;q.hoverOver=
!1;y.buttons.push(q);q.update=function(w,A){var F;q.enabled&&(F=y.pointer.hitTestSprite(q),w.isUp&&(q.state="up","button"===q.subtype)&&q.show(0),F&&(q.state="over",q.frames&&3===q.frames.length&&"button"===q.subtype&&q.show(1),w.isDown)&&(q.state="down","button"===q.subtype)&&(3===q.frames.length?q.show(2):q.show(1)),"down"!==q.state||q.pressed||(q.press&&q.press(),q.pressed=!0,q.action="pressed"),"over"===q.state&&(q.pressed&&(q.release&&q.release(),q.pressed=!1,q.action="released",y.pointer.tapped)&&
q.tap&&q.tap(),q.hoverOver||(q.over&&q.over(),q.hoverOver=!0)),"up"===q.state)&&(q.pressed&&(q.release&&q.release(),q.pressed=!1,q.action="released"),q.hoverOver)&&(q.out&&q.out(),q.hoverOver=!1)}}function I(q){var w={};return w.code=q,w.isDown=!1,w.isUp=!0,w.press=void 0,w.release=void 0,w.downHandler=function(A){A.keyCode===w.code&&(w.isUp&&w.press&&w.press(),w.isDown=!0,w.isUp=!1);A.preventDefault()},w.upHandler=function(A){A.keyCode===w.code&&(w.isDown&&w.release&&w.release(),w.isDown=!1,w.isUp=
!0);A.preventDefault()},window.addEventListener("keydown",w.downHandler.bind(w),!1),window.addEventListener("keyup",w.upHandler.bind(w),!1),w}function J(q,w){return q.layer<w.layer?-1:(q.layer,w.layer,1)}var D,y={};if(y.canvas=document.createElement("canvas"),y.canvas.setAttribute("width",+v),y.canvas.setAttribute("height",+N),y.canvas.style.backgroundColor="black",document.body.appendChild(y.canvas),y.canvas.ctx=y.canvas.getContext("2d"),y.stage=(C(v={}),v.stage=!0,v.width=y.canvas.width,v.height=
y.canvas.height,v.x=0,v.y=0,v.parent=void 0,v),y.pointer=(D={_x:0,_y:0},Object.defineProperties(D,{x:{get:function(){return D._x/y.scale},enumerable:!0,configurable:!0},y:{get:function(){return D._y/y.scale},enumerable:!0,configurable:!0},centerX:{get:function(){return D.x},enumerable:!0,configurable:!0},centerY:{get:function(){return D.y},enumerable:!0,configurable:!0},position:{get:function(){return{x:D.x,y:D.y}},enumerable:!0,configurable:!0}}),D.isDown=!1,D.isUp=!0,D.tapped=!1,D.downTime=0,D.elapsedTime=
0,D.press=void 0,D.release=void 0,D.tap=void 0,D.dragSprite=null,D.dragOffsetX=0,D.dragOffsetY=0,D.moveHandler=function(q){D._x=q.pageX-q.target.offsetLeft;D._y=q.pageY-q.target.offsetTop;q.preventDefault()},D.touchmoveHandler=function(q){D._x=q.targetTouches[0].pageX-y.canvas.offsetLeft;D._y=q.targetTouches[0].pageY-y.canvas.offsetTop;q.preventDefault()},D.downHandler=function(q){D._x=q.pageX-q.target.offsetLeft;D._y=q.pageY-q.target.offsetTop;D.isDown=!0;D.isUp=!1;D.tapped=!1;D.downTime=Date.now();
D.press&&D.press();q.preventDefault()},D.touchstartHandler=function(q){D._x=q.targetTouches[0].pageX-y.canvas.offsetLeft;D._y=q.targetTouches[0].pageY-y.canvas.offsetTop;D.isDown=!0;D.isUp=!1;D.tapped=!1;D.downTime=Date.now();D.press&&D.press();q.preventDefault()},D.upHandler=function(q){D.elapsedTime=Math.abs(D.downTime-Date.now());D.elapsedTime<=200&&(D.tapped=!0,D.tap)&&D.tap();D.isUp=!0;D.isDown=!1;D.release&&D.release();q.preventDefault()},y.canvas.addEventListener("mousemove",D.moveHandler.bind(D),
!1),y.canvas.addEventListener("mousedown",D.downHandler.bind(D),!1),window.addEventListener("mouseup",D.upHandler.bind(D),!1),y.canvas.addEventListener("touchmove",D.touchmoveHandler.bind(D),!1),y.canvas.addEventListener("touchstart",D.touchstartHandler.bind(D),!1),window.addEventListener("touchend",D.upHandler.bind(D),!1),y.canvas.style.touchAction="none",D.hitTestSprite=function(q){var w,A;return q.circular?(A=D.x-(q.gx+q.halfWidth),w=D.y-(q.gy+q.halfHeight),Math.sqrt(A*A+w*w)<q.radius):(A=q.gx,
D.x>A&&D.x<q.gx+q.width&&D.y>q.gy&&D.y<q.gy+q.height)},D.updateDragAndDrop=function(){if(D.isDown)if(null===D.dragSprite)for(var q=y.draggableSprites.length-1;-1<q;q--){var w=y.draggableSprites[q];if(w.draggable&&D.hitTestSprite(w)){D.dragOffsetX=D.x-w.gx;D.dragOffsetY=D.y-w.gy;q=(D.dragSprite=w).parent.children;q.splice(q.indexOf(w),1);q.push(w);y.draggableSprites.splice(y.draggableSprites.indexOf(w),1);y.draggableSprites.push(w);break}}else D.dragSprite.x=D.x-D.dragOffsetX,D.dragSprite.y=D.y-D.dragOffsetY;
D.isUp&&(D.dragSprite=null);y.draggableSprites.some(function(A){return A.draggable&&D.hitTestSprite(A)?(y.canvas.style.cursor="pointer",!0):!(y.canvas.style.cursor="auto")})},D),y.key=((N={}).leftArrow=I(37),N.upArrow=I(38),N.rightArrow=I(39),N.downArrow=I(40),N.space=I(32),N.a=I(65),N.d=I(68),N.w=I(87),N.s=I(83),N),y.buttons=[],y.dragAndDrop=!1,y.draggableSprites=[],y.tweens=[],y.state=void 0,y.load=m||void 0,y.setup=b||void 0,void 0===y.setup)throw Error("Please supply the setup function in the constructor");
return y.assetFilePaths=k||void 0,y.paused=!1,y._fps=60,y._startTime=Date.now(),y._frameDuration=1E3/y._fps,y._lag=0,y.interpolate=!0,y.updateFunctions=[],y.scale=1,y.start=function(){y.assetFilePaths?(y.assets.whenLoaded=function(){y.state=void 0;y.setup()},y.assets.load(y.assetFilePaths),y.load&&(y.state=y.load)):y.setup();x()},y.pause=function(){y.paused=!0},y.resume=function(){y.paused=!1},y.hidePointer=function(){y.canvas.style.cursor="none"},y.showPointer=function(){y.canvas.style.cursor="auto"},
Object.defineProperties(y,{fps:{get:function(){return y._fps},set:function(q){y._fps=q;y._startTime=Date.now();y._frameDuration=1E3/y._fps},enumerable:!0,configurable:!0},backgroundColor:{set:function(q){y.canvas.style.backgroundColor=q},enumerable:!0,configurable:!0}}),y.remove=function(q){var w=Array.prototype.slice.call(arguments);if(w[0]instanceof Array){if(w=w[0],0<w.length)for(var A=w.length-1;0<=A;A--){var F=w[A];F.parent.removeChild(F);w.splice(w.indexOf(F),1)}}else 1<w.length?w.forEach(function(L){L.parent.removeChild(L)}):
w[0].parent.removeChild(w[0])},y.group=function(q){var w={};return C(w),w.addChild=function(A){A.parent&&A.parent.removeChild(A);(A.parent=w).children.push(A);w.calculateSize()},w.removeChild=function(A){if(A.parent!==w)throw Error(A+"is not a child of "+w);w.children.splice(w.children.indexOf(A),1);w.calculateSize()},w.calculateSize=function(){0<w.children.length&&(w._newWidth=0,w._newHeight=0,w.children.forEach(function(A){A.x+A.width>w._newWidth&&(w._newWidth=A.x+A.width);A.y+A.height>w._newHeight&&
(w._newHeight=A.y+A.height)}),w.width=w._newWidth,w.height=w._newHeight)},y.stage.addChild(w),q&&Array.prototype.slice.call(arguments).forEach(function(A){w.addChild(A)}),w},y.rectangle=function(q,w,A,F,L,E,G){var K={};return C(K),K.mask=!1,K.width=q||32,K.height=w||32,K.fillStyle=A||"red",K.strokeStyle=F||"none",K.lineWidth=L||0,K.x=E||0,K.y=G||0,y.stage.addChild(K),K.render=function(O){O.strokeStyle=K.strokeStyle;O.lineWidth=K.lineWidth;O.fillStyle=K.fillStyle;O.beginPath();O.rect(-K.width*K.pivotX,
-K.height*K.pivotY,K.width,K.height);!0===K.mask?O.clip():("none"!==K.strokeStyle&&O.stroke(),"none"!==K.fillStyle&&O.fill())},K},y.circle=function(q,w,A,F,L,E){var G={};return C(G),G.mask=!1,G.width=q||32,G.height=q||32,G.fillStyle=w||"red",G.strokeStyle=A||"none",G.lineWidth=F||"none",G.x=L||0,G.y=E||0,y.stage.addChild(G),B(G),G.render=function(K){K.strokeStyle=G.strokeStyle;K.lineWidth=G.lineWidth;K.fillStyle=G.fillStyle;K.beginPath();K.arc(G.radius+-G.diameter*G.pivotX,G.radius+-G.diameter*G.pivotY,
G.radius,0,2*Math.PI,!1);!0===G.mask?K.clip():("none"!==G.strokeStyle&&K.stroke(),"none"!==G.fillStyle&&K.fill())},G},y.line=function(q,w,A,F,L,E){var G={};return C(G),F||0===F||(F=0),L||0===L||(L=32),E||0===E||(E=32),G.ax=A=A||0===A?A:0,G.ay=F,G.bx=L,G.by=E,G.strokeStyle=q||"red",G.lineWidth=w||1,G.lineJoin="round",y.stage.addChild(G),G.render=function(K){K.strokeStyle=G.strokeStyle;K.lineWidth=G.lineWidth;K.lineJoin=G.lineJoin;K.beginPath();K.moveTo(G.ax,G.ay);K.lineTo(G.bx,G.by);"none"!==G.strokeStyle&&
K.stroke();"none"!==G.fillStyle&&K.fill()},G},y.text=function(q,w,A,F,L){var E={};return C(E),E.content=q||"Hello!",E.font=w||"12px sans-serif",E.fillStyle=A||"red",E.textBaseline="top",Object.defineProperties(E,{width:{get:function(){return y.canvas.ctx.measureText(E.content).width},enumerable:!0,configurable:!0},height:{get:function(){return y.canvas.ctx.measureText("M").width},enumerable:!0,configurable:!0}}),y.stage.addChild(E),E.x=F||0,E.y=L||0,E.render=function(G){G.strokeStyle=E.strokeStyle;
G.lineWidth=E.lineWidth;G.fillStyle=E.fillStyle;0===E.width&&(E.width=G.measureText(E.content).width);0===E.height&&(E.height=G.measureText("M").width);G.translate(-E.width*E.pivotX,-E.height*E.pivotY);G.font=E.font;G.textBaseline=E.textBaseline;G.fillText(E.content,0,0)},E},y.frame=function(q,w,A,F,L){var E={};return E.image=q,E.x=w,E.y=A,E.width=F,E.height=L,E},y.frames=function(q,w,A,F){var L={};return L.image=q,L.data=w,L.width=A,L.height=F,L},y.filmstrip=function(q,w,A,F){var L=y.assets[q].source,
E=[],G=L.width/w;L=L.height/A*G;for(var K=0;K<L;K++){var O=K%G*w,Q=Math.floor(K/G)*A;F&&0<F&&(O+=F+F*K%G,Q+=F+F*Math.floor(K/G));E.push([O,Q])}return y.frames(q,E,w,A)},y.sprite=function(q){var w={};if(void 0===q)throw Error("Sprites require a source");return C(w),w.frames=[],w.loop=!0,w._currentFrame=0,w.setTexture=function(A){if(A.image)if(A.image,A.data)A.image&&A.data&&(w.source=y.assets[A.image].source,w.frames=A.data,w.sourceX=w.frames[0][0],w.sourceY=w.frames[0][1],w.width=A.width,w.height=
A.height,w.sourceWidth=A.width,w.sourceHeight=A.height);else{if(!(y.assets[A.image].source instanceof Image))throw Error(A.image+" is not an image file");w.source=y.assets[A.image].source;w.sourceX=A.x;w.sourceY=A.y;w.width=A.width;w.height=A.height;w.sourceWidth=A.width;w.sourceHeight=A.height}else A instanceof Array?(w.frames=A,w.source=y.assets[A[0]].source,w.sourceX=y.assets[A[0]].frame.x,w.sourceY=y.assets[A[0]].frame.y,w.width=y.assets[A[0]].frame.w,w.height=y.assets[A[0]].frame.h,w.sourceWidth=
y.assets[A[0]].frame.w,w.sourceHeight=y.assets[A[0]].frame.h):(w.tilesetFrame=y.assets[A],w.source=w.tilesetFrame.source,w.sourceX=w.tilesetFrame.frame.x,w.sourceY=w.tilesetFrame.frame.y,w.width=w.tilesetFrame.frame.w,w.height=w.tilesetFrame.frame.h,w.sourceWidth=w.tilesetFrame.frame.w,w.sourceHeight=w.tilesetFrame.frame.h)},w.setTexture(q),w.gotoAndStop=function(A){if(!(0<w.frames.length))throw Error("Frame number "+A+"doesn't exist");w.frames[0]instanceof Array?(w.sourceX=w.frames[A][0],w.sourceY=
w.frames[A][1]):y.assets[w.frames[A]].frame&&(w.source=y.assets[w.frames[A]].source,w.sourceX=y.assets[w.frames[A]].frame.x,w.sourceY=y.assets[w.frames[A]].frame.y,w.sourceWidth=y.assets[w.frames[A]].frame.w,w.sourceHeight=y.assets[w.frames[A]].frame.h,w.width=y.assets[w.frames[A]].frame.w,w.height=y.assets[w.frames[A]].frame.h);w._currentFrame=A},w.x=0,(w.y=0)<w.frames.length&&(y.addStatePlayer(w),Object.defineProperty(w,"currentFrame",{get:function(){return w._currentFrame},enumerable:!1,configurable:!1})),
y.stage.addChild(w),w.render=function(A){A.drawImage(w.source,w.sourceX,w.sourceY,w.sourceWidth,w.sourceHeight,-w.width*w.pivotX,-w.height*w.pivotY,w.width,w.height)},w},y.button=function(q){q=y.sprite(q);return q.subtype="button",H(q),q},y.image=function(q){return y.assets[q]},y.json=function(q){return y.assets[q]},y.addStatePlayer=function(q){function w(O){A();E=O[0];L=O[1]-E;0===E&&(L+=1,F+=1);1===L&&(L=2,F+=1);q.fps||(q.fps=12);O=1E3/q.fps;q.gotoAndStop(E);K||(G=setInterval(function(){F<L?(q.gotoAndStop(q.currentFrame+
1),F+=1):q.loop&&(q.gotoAndStop(E),F=1)}.bind(this),O),K=!0)}function A(){void 0!==G&&!0===K&&(K=!1,L=E=F=0,clearInterval(G))}var F=0,L=0,E=0,G=void 0,K=!1;q.show=function(O){A();"string"!=typeof O?q.gotoAndStop(O):q.gotoAndStop(q.frames.indexOf(O))};q.play=function(){w([0,q.frames.length-1])};q.stop=function(){A();q.gotoAndStop(q.currentFrame)};q.playing=K;q.playSequence=w},y.render=function(q,w){var A=q.ctx;A.clearRect(0,0,q.width,q.height);for(var F=0;F<y.stage.children.length;F++)!function G(E){if(E.visible&&
E.gx<q.width+E.width&&E.gx+E.width>=-E.width&&E.gy<q.height+E.height&&E.gy+E.height>=-E.height){if(A.save(),y.interpolate?(void 0!==E._previousX?E.renderX=(E.x-E._previousX)*w+E._previousX:E.renderX=E.x,void 0!==E._previousY?E.renderY=(E.y-E._previousY)*w+E._previousY:E.renderY=E.y):(E.renderX=E.x,E.renderY=E.y),A.translate(E.renderX+E.width*E.pivotX,E.renderY+E.height*E.pivotY),A.globalAlpha=E.alpha,A.rotate(E.rotation),A.scale(E.scaleX,E.scaleY),E.shadow&&(A.shadowColor=E.shadowColor,A.shadowOffsetX=
E.shadowOffsetX,A.shadowOffsetY=E.shadowOffsetY,A.shadowBlur=E.shadowBlur),E.blendMode&&(A.globalCompositeOperation=E.blendMode),E.render&&E.render(A),E.children&&0<E.children.length){A.translate(-E.width*E.pivotX,-E.height*E.pivotY);for(var K=0;K<E.children.length;K++)G(E.children[K])}A.restore()}}(y.stage.children[F])},y.assets={toLoad:0,loaded:0,imageExtensions:["png","jpg","gif","webp"],fontExtensions:["ttf","otf","ttc","woff"],audioExtensions:["mp3","ogg","wav","webm"],jsonExtensions:["json"],
whenLoaded:void 0,load:function(q){var w=this;w.toLoad=q.length;q.forEach(function(A){var F,L,E,G,K,O=A.split(".").pop();-1!==w.imageExtensions.indexOf(O)?((F=new Image).addEventListener("load",function(){F.name=A;w[F.name]={source:F,frame:{x:0,y:0,w:F.width,h:F.height}};w.loadHandler()},!1),F.src=A):-1!==w.fontExtensions.indexOf(O)?(E=A.split("/").pop().split(".")[0],(L=document.createElement("style")).appendChild(document.createTextNode("@font-face {font-family: '"+E+"'; src: url('"+A+"');}")),
document.head.appendChild(L),w.loadHandler()):-1!==w.audioExtensions.indexOf(O)?((E=y.makeSound(A,w.loadHandler.bind(w))).name=A,w[E.name]=E):-1!==w.jsonExtensions.indexOf(O)&&(G=new XMLHttpRequest,K={},G.open("GET",A,!0),G.addEventListener("readystatechange",function(){200===G.status&&4===G.readyState&&((K=JSON.parse(G.responseText)).name=A,(w[K.name]=K).frames?w.createTilesetFrames(K,A):w.loadHandler())}),G.send())})},createTilesetFrames:function(q,w){var A=this,F=w.replace(/[^\/]*$/,""),L=new Image;
L.addEventListener("load",function(){A[F+q.meta.image]={source:L,frame:{x:0,y:0,w:L.width,h:L.height}};Object.keys(q.frames).forEach(function(E){A[E]=q.frames[E];A[E].source=L});A.loadHandler()},!1);L.src=F+q.meta.image},loadHandler:function(){this.loaded+=1;this.toLoad===this.loaded&&(this.toLoad=0,this.loaded=0,this.whenLoaded())}},y.keyboard=I,y.makeDisplayObject=C,void 0!==e.plugins&&e.plugins(y),void 0!==e.custom&&e.custom(y),y};window.ga=e.create;
(v=>{function N(z,C){var B=v.createEvent("Event");B.initEvent(z,!0,!1);C.dispatchEvent(B)}var b,k={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreen",
element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},m=k.w3;for(b in k)if(k[b].enabled in v){var x=k[b];break}m.enabled in v||!x||(v.addEventListener(x.events.change,function(z){v[m.enabled]=v[x.enabled];v[m.element]=
v[x.element];N(m.events.change,z.target)},!1),v.addEventListener(x.events.error,function(z){N(m.events.error,z.target)},!1),v[m.enabled]=v[x.enabled],v[m.element]=v[x.element],v[m.exit]=v[x.exit],Element.prototype[m.request]=function(){return this[x.request].apply(this,arguments)})})(document);
e.plugins=function(v){v.move=function(b){if(b instanceof Array==0)b.x+=0|b.vx,b.y+=0|b.vy;else for(var k=0;k<b.length;k++){var m=b[k];m.x+=0|m.vx;m.y+=0|m.vy}};v.distance=function(b,k){var m=k.centerX-b.centerX;k=k.centerY-b.centerY;return Math.sqrt(m*m+k*k)};v.followEase=function(b,k,m){var x=k.centerX-b.centerX;k=k.centerY-b.centerY;1<=Math.sqrt(x*x+k*k)&&(b.x+=x*m,b.y+=k*m)};v.followConstant=function(b,k,m){var x=k.centerX-b.centerX;k=k.centerY-b.centerY;var z=Math.sqrt(x*x+k*k);m<=z&&(b.x+=x/
z*m,b.y+=k/z*m)};v.rotateAroundSprite=function(b,k,m,x){b.x=k.centerX-b.parent.x+m*Math.cos(x)-b.halfWidth;b.y=k.centerY-b.parent.y+m*Math.sin(x)-b.halfWidth};v.rotateAroundPoint=function(b,k,m,x,z){var C={};return C.x=b+Math.cos(z)*m,C.y=k+Math.sin(z)*x,C};v.angle=function(b,k){return Math.atan2(k.centerY-b.centerY,k.centerX-b.centerX)};v.randomInt=function(b,k){return Math.floor(Math.random()*(k-b+1))+b};v.randomFloat=function(b,k){return b+Math.random()*(k-b)};v.wait=function(b,k){return setTimeout(k,
b)};v.worldCamera=function(b,k){return{width:k.width,height:k.height,_x:0,_y:0,get x(){return this._x},set x(m){this._x=m;b.x=-this._x;b._previousX=b.x},get y(){return this._y},set y(m){this._y=m;b.y=-this._y;b._previousY=b.y},get centerX(){return this.x+this.width/2},get centerY(){return this.y+this.height/2},get rightInnerBoundary(){return this.x+this.width/2+this.width/4},get leftInnerBoundary(){return this.x+this.width/2-this.width/4},get topInnerBoundary(){return this.y+this.height/2-this.height/
4},get bottomInnerBoundary(){return this.y+this.height/2+this.height/4},follow:function(m){m.x<this.leftInnerBoundary&&(this.x=m.x-this.width/4);m.y<this.topInnerBoundary&&(this.y=m.y-this.height/4);m.x+m.width>this.rightInnerBoundary&&(this.x=m.x+m.width-this.width/4*3);m.y+m.height>this.bottomInnerBoundary&&(this.y=m.y+m.height-this.height/4*3);this.x<0&&(this.x=0);this.y<0&&(this.y=0);this.x+this.width>b.width&&(this.x=b.width-this.width);this.y+this.height>b.height&&(this.y=b.height-this.height)},
centerOver:function(m){this.x=m.x+m.halfWidth-this.width/2;this.y=m.y+m.halfHeight-this.height/2}}};v.scaleToWindow=function(b){var k=window.innerWidth/v.canvas.width;x=window.innerHeight/v.canvas.height;k=Math.min(k,x);v.canvas.style.transformOrigin="0 0";v.canvas.style.transform="scale("+k+")";"horizontally"==(x=v.canvas.width>v.canvas.height?v.canvas.width*k<window.innerWidth?"horizontally":"vertically":v.canvas.height*k<window.innerHeight?"vertically":"horizontally")&&(m=(window.innerWidth-v.canvas.width*
k)/2,v.canvas.style.marginLeft=m+"px",v.canvas.style.marginRight=m+"px");"vertically"==x&&(m=(window.innerHeight-v.canvas.height*k)/2,v.canvas.style.marginTop=m+"px",v.canvas.style.marginBottom=m+"px");v.canvas.style.paddingLeft=0;v.canvas.style.paddingRight=0;v.canvas.style.paddingTop=0;v.canvas.style.paddingBottom=0;v.canvas.style.display="block";document.body.style.backgroundColor=b||"#2C3539";v.pointer.scale=k;v.scale=k;v.canvas.scaled=!0;var m,x=navigator.userAgent.toLowerCase();-1==x.indexOf("safari")||
-1<x.indexOf("chrome")||(v.canvas.style.maxHeight="100%",v.canvas.style.minHeight="100%")};v.scaleToFit=function(b,k){"width"===b&&(x=v.canvas.width/window.innerWidth,m=v.canvas.height/window.innerHeight);"height"===b&&(x=window.innerWidth/v.canvas.width,m=window.innerHeight/v.canvas.height);b=Math.min(x,m);v.canvas.style.transformOrigin="0 0";v.canvas.style.transform="scale("+b+")";document.body.style.backgroundColor=k;v.canvas.style.paddingLeft=0;v.canvas.style.paddingRight=0;v.canvas.style.marginLeft=
"auto";v.canvas.style.marginRight="auto";v.canvas.style.display="block";v.canvas.style.minHeight="100%";var m,x=navigator.userAgent.toLowerCase();-1==x.indexOf("safari")||-1<x.indexOf("chrome")||(v.canvas.style.maxHeight="100%",v.canvas.style.minHeight="100%");v.scale=b};v.shakingSprites=[];v.updateShakingSprites=function(){if(0<v.shakingSprites.length)for(var b=v.shakingSprites.length-1;0<=b;b--){var k=v.shakingSprites[b];k.updateShake&&k.updateShake()}};v.updateFunctions.push(v.updateShakingSprites);
v.shake=function(b,k,m){function x(D,y){return Math.floor(Math.random()*(y-D+1))+D}void 0===k&&(k=16);void 0===m&&(m=!1);var z=1,C=b.x,B=b.y,H=b.rotation,I=k/10,J=(-1===v.shakingSprites.indexOf(b)&&(v.shakingSprites.push(b),b.updateShake=function(){m?(z<10&&(b.rotation=H,k-=I,b.rotation=k*J,z+=1,J*=-1),10<=z&&(b.rotation=H,v.shakingSprites.splice(v.shakingSprites.indexOf(b),1))):(z<10&&(b.x=C,b.y=B,k-=I,b.x+=x(-k,k),b.y+=x(-k,k),z+=1),10<=z&&(b.x=C,b.y=B,v.shakingSprites.splice(v.shakingSprites.indexOf(b),
1)))}),1)};v.tweens=[];v.updateTweens=function(){if(0<v.tweens.length)for(var b=v.tweens.length-1;0<=b;b--){var k=v.tweens[b];k&&k.update()}};v.updateFunctions.push(v.updateTweens);v.cubicBezier=function(b,k,m,x,z){var C=b*b;return k+(3*-k+b*(3*k-k*b))*b+(3*m+b*(-6*m+3*m*b))*b+(3*x-3*x*b)*C+C*b*z};var N={linear:function(b){return b},smoothstep:function(b){return b*b*(3-2*b)},smoothstepSquared:function(b){return Math.pow(b*b*(3-2*b),2)},smoothstepCubed:function(b){return Math.pow(b*b*(3-2*b),3)},acceleration:function(b){return b*
b},accelerationCubed:function(b){return Math.pow(b*b,3)},deceleration:function(b){return 1-Math.pow(1-b,2)},decelerationCubed:function(b){return 1-Math.pow(1-b,3)},sine:function(b){return Math.sin(b*Math.PI/2)},sineSquared:function(b){return Math.pow(Math.sin(b*Math.PI/2),2)},sineCubed:function(b){return Math.pow(Math.sin(b*Math.PI/2),2)},inverseSine:function(b){return 1-Math.sin((1-b)*Math.PI/2)},inverseSineSquared:function(b){return 1-Math.pow(Math.sin((1-b)*Math.PI/2),2)},inverseSineCubed:function(b){return 1-
Math.pow(Math.sin((1-b)*Math.PI/2),3)},spline:function(b,k,m,x,z){return.5*(2*m+(-k+x)*b+(2*k-5*m+4*x-z)*b*b+(3*m-k-3*x+z)*b*b*b)}};v.tweenProperty=function(b,k,m,x,z,C,B,H){void 0===z&&(z=60);void 0===B&&(B=!1);void 0===H&&(H=0);var I={},J=(C=void 0===C?"smoothstep":C).split(" ");return"bounce"===J[0]&&(I.startMagnitude=parseInt(J[1]),I.endMagnitude=parseInt(J[2])),I.start=function(D,y){I.startValue=JSON.parse(JSON.stringify(D));I.endValue=JSON.parse(JSON.stringify(y));I.playing=!0;I.totalFrames=
z;I.frameCounter=0;v.tweens.push(I)},I.start(m,x),I.update=function(){var D;I.playing&&(I.frameCounter<I.totalFrames?(D=I.frameCounter/I.totalFrames,D="bounce"!==J[0]?N[C](D):N.spline(D,I.startMagnitude,0,1,I.endMagnitude),b[k]=I.endValue*D+I.startValue*(1-D),I.frameCounter+=1):I.end())},I.end=function(){I.playing=!1;I.onComplete&&I.onComplete();v.tweens.splice(v.tweens.indexOf(I),1);B&&v.wait(H,function(){I.start(I.endValue,I.startValue)})},I.play=function(){I.playing=!0},I.pause=function(){I.playing=
!1},I};v.fadeOut=function(b,k){return v.tweenProperty(b,"alpha",b.alpha,0,void 0===k?60:k,"sine")};v.fadeIn=function(b,k){return v.tweenProperty(b,"alpha",b.alpha,1,void 0===k?60:k,"sine")};v.pulse=function(b,k,m){return v.tweenProperty(b,"alpha",b.alpha,void 0===m?0:m,void 0===k?60:k,"smoothstep",!0)};v.makeTween=function(b){var k={tweens:[]},m=(b.forEach(function(x){x=v.tweenProperty(x[0],x[1],x[2],x[3],x[4],x[5],x[6],x[7]);k.tweens.push(x)}),0);return k.completed=function(){(m+=1)===k.tweens.length&&
(k.onComplete&&k.onComplete(),m=0)},k.tweens.forEach(function(x){x.onComplete=function(){k.completed()}}),k.pause=function(){k.tweens.forEach(function(x){x.playing=!1})},k.play=function(){k.tweens.forEach(function(x){x.playing=!0})},k};v.slide=function(b,k,m,x,z,C,B){return v.makeTween([[b,"x",b.x,k,x=void 0===x?60:x,z=void 0===z?"smoothstep":z,C=void 0===C?!1:C,B=void 0===B?0:B],[b,"y",b.y,m,x,z,C,B]])};v.breathe=function(b,k,m,x,z,C){return v.makeTween([[b,"scaleX",b.scaleX,k,x=void 0===x?60:x,
"smoothstepSquared",z=void 0===z?!0:z,C=void 0===C?0:C],[b,"scaleY",b.scaleY,m,x,"smoothstepSquared",z,C]])};v.scale=function(b,k,m,x){return v.makeTween([[b,"scaleX",b.scaleX,k,x=void 0===x?60:x,"smoothstep",!1],[b,"scaleY",b.scaleY,m,x,"smoothstep",!1]])};v.strobe=function(b,k,m,x,z,C,B){m="bounce "+(m=void 0===m?10:m)+" "+(void 0===x?20:x);return v.makeTween([[b,"scaleX",b.scaleX,k=void 0===k?1.3:k,z=void 0===z?10:z,m,C=void 0===C?!0:C,B=void 0===B?0:B],[b,"scaleY",b.scaleY,k,z,m,C,B]])};v.wobble=
function(b,k,m,x,z,C,B,H,I,J,D){void 0===I&&(I=.98);k=v.makeTween([[b,"scaleX",b.scaleX,k=void 0===k?1.2:k,x=void 0===x?10:x,"bounce "+(z=void 0===z?10:z)+" "+(C=void 0===C?10:C),J=void 0===J?!0:J,D=void 0===D?0:D],[b,"scaleY",b.scaleY,m=void 0===m?1.2:m,x,"bounce "+(B=void 0===B?-10:B)+" "+(H=void 0===H?-10:H),J,D]]);return k.tweens.forEach(function(y){y.onComplete=function(){1<y.endValue&&(y.endValue*=I,y.endValue<=1)&&(y.endValue=1,v.removeTween(y))}}),k};v.removeTween=function(b){b.tweens?(b.pause(),
b.tweens.forEach(function(k){v.tweens.splice(v.tweens.indexOf(k),1)})):(b.pause(),v.tweens.splice(v.tweens.indexOf(b),1))};v.followCurve=function(b,k,m,x,z,C){void 0===z&&(z=!1);void 0===C&&(C=0);var B={},H=(x=void 0===x?"smoothstep":x).split(" ");return"bounce"===H[0]&&(B.startMagnitude=parseInt(H[1]),B.endMagnitude=parseInt(H[2])),B.start=function(I){B.playing=!0;B.totalFrames=m;B.frameCounter=0;B.pointsArray=JSON.parse(JSON.stringify(I));v.tweens.push(B)},B.start(k),B.update=function(){var I,J=
B.pointsArray;B.playing&&(B.frameCounter<B.totalFrames?(I=B.frameCounter/B.totalFrames,I="bounce"!==H[0]?N[x](I):N.spline(I,B.startMagnitude,0,1,B.endMagnitude),b.x=v.cubicBezier(I,J[0][0],J[1][0],J[2][0],J[3][0]),b.y=v.cubicBezier(I,J[0][1],J[1][1],J[2][1],J[3][1]),B.frameCounter+=1):B.end())},B.end=function(){B.playing=!1;B.onComplete&&B.onComplete();v.tweens.splice(v.tweens.indexOf(B),1);z&&v.wait(C,function(){B.pointsArray=B.pointsArray.reverse();B.start(B.pointsArray)})},B.pause=function(){B.playing=
!1},B.play=function(){B.playing=!0},B};v.walkPath=function(b,k,m,x,z,C,B){void 0===m&&(m=300);void 0===x&&(x="smoothstep");void 0===z&&(z=!1);void 0===C&&(C=!1);void 0===B&&(B=0);var H=JSON.parse(JSON.stringify(k)),I=m/H.length;return function y(D){var q=v.makeTween([[b,"x",H[D][0],H[D+1][0],I,x],[b,"y",H[D][1],H[D+1][1],I,x]]);return q.onComplete=function(){(D+=1)<H.length-1?v.wait(B,function(){q=y(D)}):z&&(C&&H.reverse(),v.wait(B,function(){D=0;b.x=H[0][0];b.y=H[0][1];q=y(D)}))},q}(0)};v.walkCurve=
function(b,k,m,x,z,C,B){void 0===x&&(x="smoothstep");void 0===z&&(z=!1);void 0===C&&(C=!1);void 0===B&&(B=0);var H=(m=void 0===m?300:m)/k.length;return function D(J){var y=v.followCurve(b,k[J],H,x);return y.onComplete=function(){(J+=1)<k.length?v.wait(B,function(){y=D(J)}):z&&(C&&(k.reverse(),k.forEach(function(q){q.reverse()})),v.wait(B,function(){J=0;b.x=k[0][0];b.y=k[0][1];y=D(J)}))},y}(0)};v.shoot=function(b,k,m,x,z,C){C=C();return C.x=b.centerX-C.halfWidth+m*Math.cos(k),C.y=b.centerY-C.halfHeight+
m*Math.sin(k),C.vx=Math.cos(k)*x,C.vy=Math.sin(k)*x,z.push(C),C};v.grid=function(b,k,m,x,z,C,B,H,I){void 0===b&&(b=0);void 0===k&&(k=0);void 0===m&&(m=32);void 0===x&&(x=32);void 0===C&&(C=0);void 0===B&&(B=0);void 0===z&&(z=!1);var J=v.group();return J.createGrid=function(){for(var D=b*k,y=0;y<D;y++){var q=y%b*m,w=Math.floor(y/b)*x,A=H();J.addChild(A);z?(A.x=q+m/2-A.halfWidth+C,A.y=w+x/2-A.halfHeight+B):(A.x=q+C,A.y=w+B);I&&I(A)}},J.createGrid(),v.stage.addChild(J),J};v.progressBar={maxWidth:0,height:0,
backgroundColor:"gray",foregroundColor:"cyan",backBar:null,frontBar:null,percentage:null,assets:null,initialized:!1,create:function(b,k){this.initialized||(this.assets=k,this.maxWidth=v.canvas.width/2,this.backBar=v.rectangle(this.maxWidth,32,this.backgroundColor),this.backBar.x=v.canvas.width/2-this.maxWidth/2,this.backBar.y=v.canvas.height/2-16,this.frontBar=v.rectangle(this.maxWidth,32,this.foregroundColor),this.frontBar.x=v.canvas.width/2-this.maxWidth/2,this.frontBar.y=v.canvas.height/2-16,this.percentage=
v.text("0%","28px sans-serif","black"),this.percentage.x=v.canvas.width/2-this.maxWidth/2+12,this.percentage.y=v.canvas.height/2-12,this.initialized=!0)},update:function(){var b=(v.assets.loaded+1)/v.assets.toLoad;this.frontBar.width=this.maxWidth*b;this.percentage.content=Math.floor(100*b)+"%"},remove:function(){v.remove(this.frontBar);v.remove(this.backBar);v.remove(this.percentage)}};v.particles=[];v.particleEffect=function(b,k,m,x,z,C,B,H,I,J,D,y,q,w,A,F,L,E){void 0===b&&(b=0);void 0===k&&(k=
0);void 0===m&&(m=function(){return v.circle(10,"red")});void 0===z&&(z=0);void 0===C&&(C=!0);void 0===I&&(I=4);void 0===J&&(J=16);void 0===D&&(D=.1);void 0===y&&(y=1);void 0===q&&(q=.01);void 0===w&&(w=.05);void 0===A&&(A=.02);void 0===F&&(F=.02);void 0===L&&(L=.01);void 0===E&&(E=.03);for(var G,K=[],O=((H=void 0===H?6.28:H)-(B=void 0===B?0:B))/((x=void 0===x?10:x)-1),Q=0;Q<x;Q++)C?(G=B+Math.random()*(H-B),K.push(G)):(void 0===G&&(G=B),K.push(G),G+=O);K.forEach(function(P){var M;0<(M=m()).frames.length&&
M.gotoAndStop(Math.floor(Math.random()*(M.frames.length-1+1))+0);M.x=b-M.halfWidth;M.y=k-M.halfHeight;var R=Math.floor(Math.random()*(J-I+1))+I;M.width=R;M.height=R;M.scaleSpeed=q+Math.random()*(w-q);M.alphaSpeed=A+Math.random()*(F-A);M.rotationSpeed=L+Math.random()*(E-L);R=D+Math.random()*(y-D);M.vx=R*Math.cos(P);M.vy=R*Math.sin(P);M.updateParticle=function(){M.vy+=z;M.x+=M.vx;M.y+=M.vy;0<M.scaleX-M.scaleSpeed&&(M.scaleX-=M.scaleSpeed);0<M.scaleY-M.scaleSpeed&&(M.scaleY-=M.scaleSpeed);M.rotation+=
M.rotationSpeed;M.alpha-=M.alphaSpeed;M.alpha<=0&&(v.remove(M),v.particles.splice(v.particles.indexOf(M),1))};v.particles.push(M)})};v.updateParticles=function(){if(0<v.particles.length)for(var b=v.particles.length-1;0<=b;b--)v.particles[b].updateParticle()};v.updateFunctions.push(v.updateParticles);v.emitter=function(b,k){var m={},x=void 0;return m.playing=!1,m.play=function(){m.playing||(k(),x=setInterval(function(){k()}.bind(this),b),m.playing=!0)},m.stop=function(){m.playing&&(clearInterval(x),
m.playing=!1)},m};v.tilingSprite=function(b,k,m,x,z){void 0===x&&(x=0);void 0===z&&(z=0);var C=v.assets[m].frame?(I=v.assets[m].frame.w,v.assets[m].frame.h):(I=v.assets[m].width,v.assets[m].height);var B=I<=b?Math.round(b/I)+1:2;var H=C<=k?Math.round(k/C)+1:2;var I,J=v.grid(B,H,I,C,!1,0,0,function(){return v.sprite(m)});b=(J._tileX=0,J._tileY=0,v.rectangle(b,k,"none","none"));return b.x=x,b.y=z,b.mask=!0,b.addChild(J),Object.defineProperties(b,{tileX:{get:function(){return J._tileX},set:function(D){J.children.forEach(function(y){var q=
D-J._tileX;y.x+=q;(B-1)*I<y.x&&(y.x=0-I+q);y.x<0-I-q&&(y.x=(B-1)*I)});J._tileX=D},enumerable:!0,configurable:!0},tileY:{get:function(){return J._tileY},set:function(D){J.children.forEach(function(y){var q=D-J._tileY;y.y+=q;(H-1)*C<y.y&&(y.y=0-C+q);y.y<0-C-q&&(y.y=(H-1)*C)});J._tileY=D},enumerable:!0,configurable:!0}}),b};v.burst=function(b,k,m,x,z,C,B,H,I,J,D,y,q,w){var A;b=b||0;k=k||0;m=m||function(){return v.circle(10,"red")};z=z||4;C=C||16;x=x||10;B=B||.1;H=H||1;I=I||.01;J=J||.05;D=D||.02;y=y||
.02;q=q||.01;w=w||.03;for(A=0;A<360;A+=Math.round(360/x))(()=>{var F=m(),L=(F.x=b-F.halfWidth,F.y=k-F.halfHeight,v.randomFloat(z,C));L=(F.width=L,F.height=L,F.scaleSpeed=v.randomFloat(I,J),F.alphaSpeed=v.randomFloat(D,y),F.rotationSpeed=v.randomFloat(q,w),v.randomFloat(B,H));F.vx=L*Math.cos(A*Math.PI/180);F.vy=L*Math.sin(A*Math.PI/180);F.update=function(){F.x+=F.vx;F.y+=F.vy;0<F.scaleX-F.scaleSpeed&&(F.scaleX-=F.scaleSpeed);0<F.scaleY-F.scaleSpeed&&(F.scaleY-=F.scaleSpeed);F.rotation+=F.rotationSpeed;
F.alpha-=F.alphaSpeed;F.alpha<=0&&(v.remove(F),v.particles.splice(v.particles.indexOf(F),1))};v.particles.push(F)})()};v.outsideBounds=function(b,k,m){var x;return b.x<k.x-b.width&&(x="left"),b.y<k.y-b.height&&(x="top"),k.width<b.x&&(x="right"),(x=k.height<b.y?"bottom":x)&&m&&m(x),x};v.contain=function(b,k,m,x){var z,C=k.x,B=k.y,H=k.width;k=k.height;return m=m||!1,b.x<C&&(m&&(b.vx*=-1),b.mass&&(b.vx/=b.mass),b.x=C,z="left"),b.y<B&&(m&&(b.vy*=-1),b.mass&&(b.vy/=b.mass),b.y=B,z="top"),H<b.x+b.width&&
(m&&(b.vx*=-1),b.mass&&(b.vx/=b.mass),b.x=H-b.width,z="right"),k<b.y+b.height&&(m&&(b.vy*=-1),b.mass&&(b.vy/=b.mass),b.y=k-b.height,z="bottom"),z&&x&&x(z),z};v.hitTestPoint=function(b,k){var m,x;return"rectangle"==(m=k.radius?"circle":"rectangle")&&(x=k.x,x=b.x>x&&b.x<k.x+k.width&&b.y>k.y&&b.y<k.y+k.height),"circle"==m&&(m=b.x-k.centerX,b=b.y-k.centerY,x=Math.sqrt(m*m+b*b)<k.radius),x};v.hitTestCircle=function(b,k,m){var x;m=(m=void 0===m?!1:m)?(x=k.gx+k.radius-(b.gx+b.radius),k.gy+k.radius-(b.gy+
b.radius)):(x=k.centerX-b.centerX,k.centerY-b.centerY);return Math.sqrt(x*x+m*m)<b.radius+k.radius};v.hitTestRectangle=function(b,k,m){var x;m=(m=void 0===m?!1:m)?(x=b.gx+b.halfWidth-(k.gx+k.halfWidth),b.gy+b.halfHeight-(k.gy+k.halfHeight)):(x=b.centerX-k.centerX,b.centerY-k.centerY);var z=b.halfWidth+k.halfWidth;b=b.halfHeight+k.halfHeight;return Math.abs(x)<z&&Math.abs(m)<b};v.hitTestCircleRectangle=function(b,k,m){var x,z,C,B=(m=void 0===m?!1:m)?(x=b.gx,z=b.gy,C=k.gx,k.gy):(x=b.x,z=b.y,C=k.x,k.y);
if("topMiddle"==(z=z<B-k.halfHeight?x<C-1-k.halfWidth?"topLeft":x>C+1+k.halfWidth?"topRight":"topMiddle":z>B+k.halfHeight?x<C-1-k.halfWidth?"bottomLeft":x>C+1+k.halfWidth?"bottomRight":"bottomMiddle":x<C-k.halfWidth?"leftMiddle":"rightMiddle")||"bottomMiddle"==z||"leftMiddle"==z||"rightMiddle"==z)b=v.hitTestRectangle(b,k,m);else{x={};switch(z){case "topLeft":x.x=C;x.y=B;break;case "topRight":x.x=C+k.width;x.y=B;break;case "bottomLeft":x.x=C;x.y=B+k.height;break;case "bottomRight":x.x=C+k.width,x.y=
B+k.height}b=v.hitTestCirclePoint(b,x,m)}return b&&z};v.hitTestCirclePoint=function(b,k,m){return void 0===m&&(m=!1),k.diameter=1,k.radius=.5,k.centerX=k.x,k.centerY=k.y,k.gx=k.x,k.gy=k.y,v.hitTestCircle(b,k,m)};v.rectangleCollision=function(b,k,m,x){var z,C,B;return void 0===m&&(m=!1),x=(x=void 0===x?!1:x)?(B=b.gx+b.halfWidth-(k.gx+k.halfWidth),b.gy+b.halfHeight-(k.gy+k.halfHeight)):(B=b.centerX-k.centerX,b.centerY-k.centerY),C=b.halfWidth+k.halfWidth,k=b.halfHeight+k.halfHeight,Math.abs(B)<C&&Math.abs(x)<
k&&((C-=Math.abs(B))>=(k-=Math.abs(x))?(0<x?(z="top",b.y+=k):(z="bottom",b.y-=k),m&&(b.vy*=-1)):(0<B?(z="left",b.x+=C):(z="right",b.x-=C),m&&(b.vx*=-1))),z};v.circleCollision=function(b,k,m,x){var z,C,B,H={},I=!1;return void 0===m&&(m=!0),x=(x=void 0===x?!1:x)?(B=k.gx+k.radius-(b.gx+b.radius),k.gy+k.radius-(b.gy+b.radius)):(B=k.centerX-b.centerX,k.centerY-b.centerY),(z=Math.sqrt(B*B+x*x))<(k=b.radius+k.radius)&&(I=!0,k-=z,C=x/z,b.x-=(k+=.3)*(B/z),b.y-=k*C,m)&&(H.x=x,H.y=-B,z=H,k={},C={},m={},B=(x=
b).mass||1,z.lx=z.y,z.ly=-z.x,z.magnitude=Math.sqrt(z.x*z.x+z.y*z.y),z.dx=z.x/z.magnitude,z.dy=z.y/z.magnitude,H=x.vx*z.dx+x.vy*z.dy,k.vx=H*z.dx,k.vy=H*z.dy,C.vx=z.lx/z.magnitude*(H=z.lx/z.magnitude*x.vx+z.ly/z.magnitude*x.vy),C.vy=z.ly/z.magnitude*H,C.vx*=-1,C.vy*=-1,m.x=k.vx+C.vx,m.y=k.vy+C.vy,x.vx=m.x/B,x.vy=m.y/B),I};v.movingCircleCollision=function(b,k,m){var x,z,C,B,H,I,J,D,y,q,w,A,F,L,E,G,K,O,Q=!1;return b.mass=b.mass||1,k.mass=k.mass||1,(void 0===m?0:m)?(z=k.gx+k.radius-(b.gx+b.radius),C=
k.gy+k.radius-(b.gy+b.radius)):(z=k.centerX-b.centerX,C=k.centerY-b.centerY),B=Math.sqrt(z*z+C*C),m=b.radius+k.radius,B<m&&(Q=!0,m-=B,m+=.3,H=z/B,I=C/B,J=Math.abs(H*m/2),D=Math.abs(I*m/2),m=b.x>k.x?1:-1,x=k.y<b.y?1:-1,b.x+=J*m,b.y+=D*x,k.x+=J*-m,k.y+=D*-x,y=C,q=-z,w=(m=b.vx*H+b.vy*I)*H,A=m*I,F=y/B*(x=y/B*b.vx+q/B*b.vy),L=q/B*x,E=(m=k.vx*H+k.vy*I)*H,G=m*I,K=y/B*(x=y/B*k.vx+q/B*k.vy),O=q/B*x,b.bounce={},b.bounce.x=F+E,b.bounce.y=L+G,k.bounce={},k.bounce.x=w+K,k.bounce.y=A+O,b.vx=b.bounce.x/b.mass,b.vy=
b.bounce.y/b.mass,k.vx=k.bounce.x/k.mass,k.vy=k.bounce.y/k.mass),Q};v.multipleCircleCollision=function(b,k){void 0===k&&(k=!1);for(var m=0;m<b.length;m++)for(var x=b[m],z=m+1;z<b.length;z++)v.movingCircleCollision(x,b[z],k)};v.circlePointCollision=function(b,k,m,x){return void 0===x&&(x=!1),void 0===m&&(m=!1),k.diameter=1,k.radius=.5,k.centerX=k.x,k.centerY=k.y,k.gx=k.x,k.gy=k.y,v.circleCollision(b,k,m,x)};v.circleRectangleCollision=function(b,k,m,x){var z,C,B,H;if(void 0===m&&(m=!1),H=(x=void 0===
x?!1:x)?(z=b.gx,C=b.gy,B=k.gx,k.gy):(z=b.x,C=b.y,B=k.x,k.y),"topMiddle"==(C=C<H-k.halfHeight?z<B-1-k.halfWidth?"topLeft":z>B+1+k.halfWidth?"topRight":"topMiddle":C>H+k.halfHeight?z<B-1-k.halfWidth?"bottomLeft":z>B+1+k.halfWidth?"bottomRight":"bottomMiddle":z<B-k.halfWidth?"leftMiddle":"rightMiddle")||"bottomMiddle"==C||"leftMiddle"==C||"rightMiddle"==C)b=v.rectangleCollision(b,k,m,x);else{z={};switch(C){case "topLeft":z.x=B;z.y=H;break;case "topRight":z.x=B+k.width;z.y=H;break;case "bottomLeft":z.x=
B;z.y=H+k.height;break;case "bottomRight":z.x=B+k.width,z.y=H+k.height}b=v.circlePointCollision(b,z,m,x)}return b&&C};v.hit=function(b,k,m,x,z,C){function B(D,y){var q,w=void 0!==D.parent,A=void 0!==y.parent;if(w&&A)return D.diameter&&y.diameter?(w=D,q=y,m?w.vx+w.vy!==0&&q.vx+q.vy!==0?v.movingCircleCollision(w,q,z):v.circleCollision(w,q,x,z):v.hitTestCircle(w,q,z)):D.diameter&&!y.diameter?(w=D,q=y,m?v.circleRectangleCollision(w,q,x,z):v.hitTestCircleRectangle(w,q,z)):(w=D,m?x?v.rectangleCollision(w,
y,!0,z):v.rectangleCollision(w,y,!1,z):v.hitTestRectangle(w,y,z));if(A&&void 0!==D.x&&void 0!==D.y)return v.hitTestPoint(D,y);throw Error("I'm sorry, "+D+" and "+y+" cannot be use together in a collision test.");}var H;if(m=m||!1,x=x||!1,z=z||!1,k instanceof Array||b instanceof Array)for(var I=(k=b instanceof Array?b:k).length-1;0<=I;I--){var J=k[I];(H=B(b,J))&&C&&C(H,J)}else(H=B(b,k))&&C&&C(H);return H};v.getIndex=function(b,k,m,x,z){var C,B;return C=Math.floor(b/m),B=Math.floor(k/x),C+B*z};v.getTile=
function(b,k,m){var x={};return x.gid=k[b],x.width=m.tilewidth,x.height=m.tileheight,x.halfWidth=m.tilewidth/2,x.halfHeight=m.tileheight/2,x.x=b%m.widthInTiles*m.tilewidth+m.x,x.y=Math.floor(b/m.widthInTiles)*m.tileheight+m.y,x.gx=x.x,x.gy=x.y,x.centerX=x.x+m.tilewidth/2,x.centery=x.y+m.tileheight/2,x};v.surroundingCells=function(b,k){return[b-k-1,b-k,b-k+1,b-1,b,b+1,b+k-1,b+k,b+k+1]};v.getPoints=function(b){var k=b.collisionArea;return void 0!==k?{topLeft:{x:b.x+k.x,y:b.y+k.y},topRight:{x:b.x+k.x+
k.width,y:b.y+k.y},bottomLeft:{x:b.x+k.x,y:b.y+k.y+k.height},bottomRight:{x:b.x+k.x+k.width,y:b.y+k.y+k.height}}:{topLeft:{x:b.x,y:b.y},topRight:{x:b.x+b.width-1,y:b.y},bottomLeft:{x:b.x,y:b.y+b.height-1},bottomRight:{x:b.x+b.width-1,y:b.y+b.height-1}}};v.hitTestTile=function(b,k,m,x,z){function C(H){H=b.collisionPoints[H];return B.index=v.getIndex(H.x,H.y,x.tilewidth,x.tileheight,x.widthInTiles),B.gid=k[B.index],B.gid===m}var B={};switch(z=z||"some"){case "center":b.collisionPoints={center:{x:b.centerX,
y:b.centerY}};B.hit=Object.keys(b.collisionPoints).some(C);break;case "every":b.collisionPoints=v.getPoints(b);B.hit=Object.keys(b.collisionPoints).every(C);break;case "some":b.collisionPoints=v.getPoints(b),B.hit=Object.keys(b.collisionPoints).some(C)}return B};v.updateMap=function(b,k,m){var x=b.map(function(z){return 0});return k instanceof Array?k.forEach(function(z){z.index=v.getIndex(z.centerX,z.centerY,m.tilewidth,m.tileheight,m.widthInTiles);x[z.index]=z.gid}):((b=k).index=v.getIndex(b.centerX,
b.centerY,m.tilewidth,m.tileheight,m.widthInTiles),x[b.index]=b.gid),x};v.fourKeyController=function(b,k,m,x,z,C){b.direction="";leftArrow=v.keyboard(C);upArrow=v.keyboard(m);rightArrow=v.keyboard(x);downArrow=v.keyboard(z);leftArrow.press=function(){b.vx=-k;b.vy=0;b.direction="left"};leftArrow.release=function(){rightArrow.isDown||0!==b.vy||(b.vx=0)};upArrow.press=function(){b.vy=-k;b.vx=0;b.direction="up"};upArrow.release=function(){downArrow.isDown||0!==b.vx||(b.vy=0)};rightArrow.press=function(){b.vx=
k;b.vy=0;b.direction="right"};rightArrow.release=function(){leftArrow.isDown||0!==b.vy||(b.vx=0)};downArrow.press=function(){b.vy=k;b.vx=0;b.direction="down"};downArrow.release=function(){upArrow.isDown||0!==b.vx||(b.vy=0)}};v.makeTiledWorld=function(b,k){b=v.json(b);var m=v.group(),x=(m.tileheight=b.tileheight,m.tilewidth=b.tilewidth,m.width=b.width*b.tilewidth,m.height=b.height*b.tileheight,m.widthInTiles=b.width,m.heightInTiles=b.height,m.objects=[],b.tilesets[0].spacing),z=Math.floor(b.tilesets[0].imagewidth/
(b.tilewidth+x));return b.layers.forEach(function(C){var B=v.group();Object.keys(C).forEach(function(H){"width"!==H&&"height"!==H&&(B[H]=C[H])});B.alpha=C.opacity;m.addChild(B);m.objects.push(B);"tilelayer"===C.type&&C.data.forEach(function(H,I){var J,D,y,q,w,A,F;0!==H&&(D=I%m.widthInTiles,y=Math.floor(I/m.widthInTiles),D*=m.tilewidth,y*=m.tileheight,w=(H-1)%z,q=Math.floor((H-1)/z),w*=m.tilewidth,q*=m.tileheight,0<x&&(w+=x+(H-1)%z*x,q+=x+x*Math.floor((H-1)/z)),w=v.frame(k,w,q,m.tilewidth,m.tileheight),
A=b.tilesets[0].tileproperties,F=String(H-1),A[F]&&A[F].name?(J=v.sprite(w),Object.keys(A[F]).forEach(function(L){J[L]=A[F][L]}),m.objects.push(J)):J=v.sprite(w),J.x=D,J.y=y,J.index=I,J.gid=H,B.addChild(J))});"objectgroup"===C.type&&C.objects.forEach(function(H){(H.group=B).width=m.width;B.height=m.height;m.objects.push(H)})}),m.getObject=function(C){return this.searchForObject=function(){var B;if(m.objects.some(function(H){if(H.name&&H.name===C)return B=H,!0}),B)return B},this.searchForObject()},
m.getObjects=function(C){var B=Array.prototype.slice.call(arguments),H=[];return m.objects.forEach(function(I){I.name&&-1!==B.indexOf(I.name)&&H.push(I)}),H},m};v.fullscreenScale=1;v.requestFullScreen=function(){document.fullscreenEnabled||v.canvas.requestFullscreen()};v.exitFullScreen=function(){document.fullscreenEnabled&&document.exitFullscreen()};v.alignFullscreen=function(){var b=screen.width/v.canvas.width,k=screen.height/v.canvas.height;k=(v.fullscreenScale=Math.min(b,k),0===document.styleSheets.length&&
((b=document.createElement("div")).innerHTML="<style></style>",document.body.appendChild(b)),navigator.userAgent.toLowerCase());v.canvas.width>v.canvas.height?-1!==k.indexOf("safari")||-1!==k.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain}",0):-1!==k.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",
0):-1!==k.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==k.indexOf("explorer")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",
0):-1!==k.indexOf("safari")||-1!==k.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==k.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==k.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==k.indexOf("msie")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",
0):document.styleSheets[0].insertRule("canvas:fullscreen {height: 100%; margin: 0 auto; object-fit: contain;}",0)};v.enableFullscreen=function(b){b=b&&Array.prototype.slice.call(arguments);v.alignFullscreen();v.canvas.addEventListener("mouseup",v.requestFullScreen,!1);v.canvas.addEventListener("touchend",v.requestFullScreen,!1);b&&b.forEach(function(k){window.addEventListener("keyup",function(m){m.keyCode===k&&v.exitFullScreen();m.preventDefault()},!1)})};v.launchFullscreen=function(b){v.hitTestPoint(v.pointer.position,
b)&&v.enableFullscreen()};v.scaleFullscreen=function(){document.fullscreenEnabled?(v.scale=v.fullscreenScale,v.pointer.scale=v.fullscreenScale):v.canvas.scaled||(v.scale=1,v.pointer.scale=1)};v.updateFunctions.push(v.scaleFullscreen);v.actx=new AudioContext;v.makeSound=function(b,k){var m={},x=v.actx;return m.volumeNode=v.actx.createGain(),x.createStereoPanner?m.panNode=x.createStereoPanner():m.panNode=x.createPanner(),m.delayNode=x.createDelay(),m.feedbackNode=x.createGain(),m.filterNode=x.createBiquadFilter(),
m.convolverNode=x.createConvolver(),m.soundNode=null,m.buffer=null,m.source=null,m.loop=!1,m.playing=!1,m.loadHandler=void 0,m.panValue=0,m.volumeValue=1,m.startTime=0,m.startOffset=0,m.playbackRate=1,m.echo=!1,m.delayValue=.3,m.feebackValue=.3,m.filterValue=0,m.reverb=!1,m.reverbImpulse=null,m.play=function(){m.startTime=x.currentTime;m.soundNode=x.createBufferSource();m.soundNode.buffer=m.buffer;m.soundNode.playbackRate.value=this.playbackRate;m.soundNode.connect(m.volumeNode);!1===m.reverb?m.volumeNode.connect(m.panNode):
(m.volumeNode.connect(m.convolverNode),m.convolverNode.connect(m.panNode),m.convolverNode.buffer=m.reverbImpulse);m.panNode.connect(x.destination);m.echo&&(m.feedbackNode.gain.value=m.feebackValue,m.delayNode.delayTime.value=m.delayValue,m.filterNode.frequency.value=m.filterValue,m.delayNode.connect(m.feedbackNode),(0<m.filterValue?(m.feedbackNode.connect(m.filterNode),m.filterNode):m.feedbackNode).connect(m.delayNode),m.volumeNode.connect(m.delayNode),m.delayNode.connect(m.panNode));m.soundNode.loop=
m.loop;m.soundNode.start(0,m.startOffset%m.buffer.duration);m.playing=!0},m.pause=function(){m.playing&&(m.soundNode.stop(0),m.startOffset+=x.currentTime-m.startTime,m.playing=!1)},m.restart=function(){m.playing&&m.soundNode.stop(0);m.startOffset=0;m.play()},m.playFrom=function(z){m.playing&&m.soundNode.stop(0);m.startOffset=z;m.play()},m.setEcho=function(z,C,B){void 0===C&&(C=.3);void 0===B&&(B=0);m.delayValue=void 0===z?.3:z;m.feebackValue=C;m.filterValue=B;m.echo=!0},m.setReverb=function(z,C,B){m.reverbImpulse=
v.impulseResponse(void 0===z?2:z,void 0===C?2:C,void 0===B?!1:B,x);m.reverb=!0},m.fade=function(z,C){m.playing&&(m.volumeNode.gain.linearRampToValueAtTime(m.volumeNode.gain.value,x.currentTime),m.volumeNode.gain.linearRampToValueAtTime(z,x.currentTime+C))},m.fadeIn=function(z){m.volumeNode.gain.value=0;m.fade(1,z)},m.fadeOut=function(z){m.fade(0,z)},Object.defineProperties(m,{volume:{get:function(){return m.volumeValue},set:function(z){m.volumeNode.gain.value=z;m.volumeValue=z},enumerable:!0,configurable:!0},
pan:{get:function(){return x.createStereoPanner?m.panNode.pan.value:m.panValue},set:function(z){var C;x.createStereoPanner?m.panNode.pan.value=z:(C=1-Math.abs(z),m.panNode.setPosition(z,0,C),m.panValue=z)},enumerable:!0,configurable:!0}}),m.load=function(){var z=new XMLHttpRequest;z.open("GET",b,!0);z.responseType="arraybuffer";z.addEventListener("load",function(){x.decodeAudioData(z.response,function(C){m.buffer=C;m.hasLoaded=!0;k&&k()},function(C){throw Error("Audio could not be decoded: "+C);})});
z.send()},m.load(),m};v.sound=function(b){return v.assets[b]};v.soundEffect=function(b,k,m,x,z,C,B,H,I,J,D,y,q){function w(P){var M=G.createConvolver();M.buffer=v.impulseResponse(q[0],q[1],q[2],G);P.connect(M);M.connect(Q)}function A(P){var M=G.createGain(),R=G.createDelay(),S=G.createBiquadFilter();R.delayTime.value=y[0];M.gain.value=y[1];y[2]&&(S.frequency.value=y[2]);R.connect(M);(y[2]?(M.connect(S),S):M).connect(R);P.connect(R);R.connect(Q)}function F(P){P.gain.value=0;P.gain.linearRampToValueAtTime(0,
G.currentTime+B);P.gain.linearRampToValueAtTime(z,G.currentTime+B+k)}function L(P){P.gain.linearRampToValueAtTime(z,G.currentTime+k+B);P.gain.linearRampToValueAtTime(0,G.currentTime+B+k+m)}function E(P){var M=P.frequency.value;I?(P.frequency.linearRampToValueAtTime(M,G.currentTime+B),P.frequency.linearRampToValueAtTime(M+H,G.currentTime+B+k+m)):(P.frequency.linearRampToValueAtTime(M,G.currentTime+B),P.frequency.linearRampToValueAtTime(M-H,G.currentTime+B+k+m))}void 0===b&&(b=200);void 0===k&&(k=0);
void 0===m&&(m=1);void 0===x&&(x="sine");void 0===z&&(z=1);void 0===C&&(C=0);void 0===B&&(B=0);void 0===H&&(H=0);void 0===I&&(I=!1);void 0===J&&(J=0);void 0===D&&(D=0);void 0===y&&(y=void 0);void 0===q&&(q=void 0);var G=v.actx;var K=G.createOscillator();var O=G.createGain();var Q=G.createStereoPanner?G.createStereoPanner():G.createPanner();K.connect(O);O.connect(Q);Q.connect(G.destination);O.gain.value=z;G.createStereoPanner?Q.pan.value=C:Q.setPosition(C,0,1-Math.abs(C));K.type=x;J=0<J?(C=b-J/2,x=
b+J/2,Math.floor(Math.random()*(x-C+1))+C):b;K.frequency.value=J;0<k&&F(O);L(O);0<H&&E(K);y&&A(O);q&&w(O);0<D&&(x=G.createOscillator(),C=G.createOscillator(),b=G.createGain(),O=G.createGain(),b.gain.value=z,O.gain.value=z,x.connect(b),b.connect(G.destination),C.connect(O),O.connect(G.destination),x.type="sawtooth",C.type="sawtooth",x.frequency.value=J+D,C.frequency.value=J-D,0<k&&(F(b),F(O)),0<m&&(L(b),L(O)),0<H&&(E(x),E(C)),y&&(A(b),A(O)),q&&(w(b),w(O)),x.start(G.currentTime+B),C.start(G.currentTime+
B));K.start(G.currentTime+B)};v.impulseResponse=function(b,k,m,x){var z=x.sampleRate*b;b=x.createBuffer(2,z,x.sampleRate);x=b.getChannelData(0);for(var C=b.getChannelData(1),B=0;B<z;B++){var H=m?z-B:B;x[B]=(2*Math.random()-1)*Math.pow(1-H/z,k);C[B]=(2*Math.random()-1)*Math.pow(1-H/z,k)}return b}};
let t,n,i,r,a,o,s=e.create(800,512,function(){a=s.group();i=s.group();n=s.group(t);c=s.group();l=s.rectangle(50*s.canvas.width,100*s.canvas.height,"black","none",0,-1E3,-500);n.addChild(l);s.canvas.ctx.imageSmoothingEnabled=!1;s.canvas.style.border="2px black solid";s.backgroundColor="white";for(var v=0;v<100;v++)d.push(f(64*v,s.canvas.height,Math.floor(2*Math.random())+1));s.stage.width=64*d.length;s.stage.height=5*s.canvas.height;for(var N=0;N<5;N++)v=h(64*N,d[N].y-22),a.addChild(v);v=[];for(N=
0;N<1E3;N++){var b=void 0;for(b=0;b<50;){let k=Math.floor(Math.random()*(10*s.canvas.width-64)),m=Math.floor(Math.random()*(5*s.canvas.height/2-64));if(!v.some(x=>{var z=x.x-k;x=x.y-m;return Math.sqrt(z*z+x*x)<100})){(b=s.sprite("../public/Star.png")).width=12;b.height=12;b.x=k;b.y=m;c.addChild(b);v.push(b);break}b++}}n.addChild(c);n.addChild(i);n.addChild(a);(r=s.rectangle(25,25,"yellow")).x=s.canvas.width-25;r.y=i.children[i.children.length-1].gy;n.addChild(r);(t=s.sprite("../public/Cat.png")).width=
40;t.height=32;t.lastDropTime=0;t.dropCooldown=200;t.grounded=!1;t.x=s.canvas.width/2-t.width/2;t.layingMouses=s.group();n.addChild(t);o=s.worldCamera(n,s.canvas);s.key.a.press=function(){if(t.vx=-3,t.scaleX=-1,0<t.layingMouses.children.length)for(let k=0;k<t.layingMouses.children.length;k++)t.layingMouses.children[k].scaleX=-1,t.layingMouses.children[k].offset=-5};s.key.a.release=function(){s.key.d.isDown||(t.vx=0)};s.key.d.press=function(){if(t.vx=3,t.scaleX=1,0<t.layingMouses.children.length)for(let k=
0;k<t.layingMouses.children.length;k++)t.layingMouses.children[k].scaleX=1,t.layingMouses.children[k].offset=5};s.key.d.release=function(){s.key.a.isDown||(t.vx=0)};s.key.leftArrow.press=function(){if(t.vx=-3,t.scaleX=-1,0<t.layingMouses.children.length)for(let k=0;k<t.layingMouses.children.length;k++)t.layingMouses.children[k].scaleX=-1,t.layingMouses.children[k].offset=-5};s.key.leftArrow.release=function(){s.key.rightArrow.isDown||(t.vx=0)};s.key.rightArrow.press=function(){if(t.vx=3,t.scaleX=
1,0<t.layingMouses.children.length)for(let k=0;k<t.layingMouses.children.length;k++)t.layingMouses.children[k].scaleX=1,t.layingMouses.children[k].offset=5};s.key.rightArrow.release=function(){s.key.leftArrow.isDown||(t.vx=0)};s.key.upArrow.press=function(){t.grounded;t.grounded&&(t.vy-=9,t.grounded=!1)};s.key.space.press=function(){t.grounded;t.grounded&&(t.vy-=9,t.grounded=!1)};s.key.w.press=function(){t.grounded;t.grounded&&(t.vy-=9,t.grounded=!1)};s.state=g},"../public/Cat.png ../public/Mouse_Stand.png ../public/Mouse_Lay.png ../public/Roof1.png ../public/Roof2.png ../public/Star.png ../public/WhiteFont.png".split(" "));
e.plugins(s);s.start();s.scaleToWindow();let l,c,d=[],u=(window.addEventListener("resize",function(v){s.scaleToWindow()}),new class{constructor(){this.menuBackground=this.menuText=null}});function h(v,N){var b=s.sprite("../public/Mouse_Stand.png");return b.width=22,b.height=22,b.x=v,b.y=N,b}
function f(v,N,b){b=1===b?"Roof1.png":"Roof2.png";let k=null;var m=i.lastHeight||20,x=Math.max(1,m-2);m=Math.floor(Math.random()*(m+2-x+1))+x;for(let z=0;z<m;z++)x=s.sprite("../public/"+b),x.width=64,x.height=32,x.x=v,x.y=N-32*z,i.addChild(x),(!k||x.y<k.y)&&(k=x);return i.lastHeight=m,k}
function g(){if(!u.menuBackground&&!u.menuText){u.menuBackground=s.rectangle(50*s.canvas.width,100*s.canvas.height,"black","none",0,-1E3,-500);s.stage.addChild(u.menuBackground);var v=s.group();for(let k=0;k<20;k++){var N,b="THE MIDNIGHT EXPRESS"[k].toUpperCase();b="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(b);-1!==b&&((N=s.sprite("../public/WhiteFont.png")).sourceX=5*b,N.sourceY=0,N.sourceWidth=5,N.sourceHeight=5,N.width=32,N.height=32,N.x=75+32*k,N.y=200,v.addChild(N))}u.menuText=v;s.stage.addChild(u.menuText)}s.key.space.isDown&&
(s.remove(u.menuBackground),s.remove(u.menuText),s.state=p)}
function p(){t.vy+=.4;s.move(t);for(var v=0;v<i.children.length;v++){let b=i.children[v];s.hit(t,b,!0,!1,!1,k=>{"top"===k?t.vy=0:"bottom"===k&&0<=t.vy?(t.vy=0,t.grounded=!0,t.y=b.y-t.height,t.vy=-.4):"left"!==k&&"right"!==k||(t.vx=0);"bottom"!==k&&0<t.vy&&(t.grounded=!1)})}for(v=0;v<a.children.length;v++)a.children[v];for(v=0;v<a.children.length;v++){let b=a.children[v];s.hit(t,b,!0,!1,!1,()=>{var k=s.sprite("../public/Mouse_Lay.png");k.width=20;k.height=20;k.x=t.x;k.y=t.y+10;t.layingMouses.addChild(k);
n.addChild(t.layingMouses);a.removeChild(b)})}v=t.x+(1===t.scaleX?3:19);let N=t.y+5;for(let b=0;b<t.layingMouses.children.length;b++){let k=t.layingMouses.children[b];k.x=v;k.y=N-10*b}for(v=0;v<c.children.length;v++)c.children[v].x-=.05;o.centerOver(t)};
