<!doctype html><title>Black Cat</title><script type=module>var t=t||{};t.VERSION="0.0.1",t.plugins=void 0,t.custom=void 0,t.create=function(e,i,n,o,r){var a,s={};if(s.canvas=document.createElement("canvas"),s.canvas.setAttribute("width",1*e),s.canvas.setAttribute("height",1*i),s.canvas.style.backgroundColor="black",document.body.appendChild(s.canvas),s.canvas.ctx=s.canvas.getContext("2d"),s.stage=(c(a={}),a.stage=!0,a.width=s.canvas.width,a.height=s.canvas.height,a.x=0,a.y=0,a.parent=void 0,a),s.pointer=(()=>{var t={t:0,i:0};return Object.defineProperties(t,{x:{get:()=>t.t/s.scale,enumerable:!0,configurable:!0},y:{get:()=>t.i/s.scale,enumerable:!0,configurable:!0},centerX:{get:()=>t.x,enumerable:!0,configurable:!0},centerY:{get:()=>t.y,enumerable:!0,configurable:!0},position:{get:()=>({x:t.x,y:t.y}),enumerable:!0,configurable:!0}}),t.isDown=!1,t.isUp=!0,t.tapped=!1,t.downTime=0,t.elapsedTime=0,t.press=void 0,t.release=void 0,t.tap=void 0,t.dragSprite=null,t.dragOffsetX=0,t.dragOffsetY=0,t.moveHandler=e=>{t.t=e.pageX-e.target.offsetLeft,t.i=e.pageY-e.target.offsetTop,e.preventDefault()},t.touchmoveHandler=e=>{t.t=e.targetTouches[0].pageX-s.canvas.offsetLeft,t.i=e.targetTouches[0].pageY-s.canvas.offsetTop,e.preventDefault()},t.downHandler=e=>{t.t=e.pageX-e.target.offsetLeft,t.i=e.pageY-e.target.offsetTop,t.isDown=!0,t.isUp=!1,t.tapped=!1,t.downTime=Date.now(),t.press&&t.press(),e.preventDefault()},t.touchstartHandler=e=>{t.t=e.targetTouches[0].pageX-s.canvas.offsetLeft,t.i=e.targetTouches[0].pageY-s.canvas.offsetTop,t.isDown=!0,t.isUp=!1,t.tapped=!1,t.downTime=Date.now(),t.press&&t.press(),e.preventDefault()},t.upHandler=e=>{t.elapsedTime=Math.abs(t.downTime-Date.now()),t.elapsedTime>200||(t.tapped=!0,t.tap&&t.tap()),t.isUp=!0,t.isDown=!1,t.release&&t.release(),e.preventDefault()},s.canvas.addEventListener("mousemove",t.moveHandler.bind(t),!1),s.canvas.addEventListener("mousedown",t.downHandler.bind(t),!1),window.addEventListener("mouseup",t.upHandler.bind(t),!1),s.canvas.addEventListener("touchmove",t.touchmoveHandler.bind(t),!1),s.canvas.addEventListener("touchstart",t.touchstartHandler.bind(t),!1),window.addEventListener("touchend",t.upHandler.bind(t),!1),s.canvas.style.touchAction="none",t.hitTestSprite=e=>{var i=!1;if(e.circular){var n=t.x-(e.gx+e.halfWidth),o=t.y-(e.gy+e.halfHeight);i=e.radius>Math.sqrt(n*n+o*o)}else i=t.x>e.gx&&e.gx+e.width>t.x&&t.y>e.gy&&e.gy+e.height>t.y;return i},t.updateDragAndDrop=()=>{if(t.isDown)if(null===t.dragSprite)for(var e=s.draggableSprites.length-1;e>-1;e--){var i=s.draggableSprites[e];if(i.draggable&&t.hitTestSprite(i)){t.dragOffsetX=t.x-i.gx,t.dragOffsetY=t.y-i.gy,t.dragSprite=i;var n=i.parent.children;n.splice(n.indexOf(i),1),n.push(i),s.draggableSprites.splice(s.draggableSprites.indexOf(i),1),s.draggableSprites.push(i);break}}else t.dragSprite.x=t.x-t.dragOffsetX,t.dragSprite.y=t.y-t.dragOffsetY;t.isUp&&(t.dragSprite=null),s.draggableSprites.some(e=>e.draggable&&t.hitTestSprite(e)?(s.canvas.style.cursor="pointer",!0):(s.canvas.style.cursor="auto",!1))},t})(),s.key=(()=>{var t={};return t.leftArrow=v(37),t.upArrow=v(38),t.rightArrow=v(39),t.downArrow=v(40),t.space=v(32),t.a=v(65),t.d=v(68),t.w=v(87),t.s=v(83),t.q=v(81),t.r=v(82),t})(),s.buttons=[],s.dragAndDrop=!1,s.draggableSprites=[],s.tweens=[],s.state=void 0,s.load=r||void 0,s.setup=n||void 0,void 0===s.setup)throw Error("Please supply the setup function in the constructor");function l(){if(requestAnimationFrame(l,s.canvas),void 0===s.o)u(),s.render(s.canvas,0);else{var t=Date.now(),e=t-s.l;for(e>1e3&&(e=s.u),s.l=t,s.v+=e;s.v>=s.u;)h(),u(),s.v-=s.u;s.render(s.canvas,s.v/s.u)}}function h(){function t(e){e.m=e.x,e.p=e.y,e.children&&e.children.length>0&&e.children.forEach(e=>{t(e)})}s.stage.children.forEach(e=>{t(e)})}function u(){if(s.buttons.length>0){s.canvas.style.cursor="auto";for(var t=s.buttons.length-1;t>=0;t--){var e=s.buttons[t];e.update(s.pointer,s.canvas),"over"!==e.state&&"down"!==e.state||e.stage||(s.canvas.style.cursor="pointer")}}if(s.dragAndDrop&&s.pointer.updateDragAndDrop(),s.state&&!s.paused&&s.state(),0!==s.updateFunctions.length)for(var i=0;s.updateFunctions.length>i;i++)(0,s.updateFunctions[i])()}function c(t){t.x=0,t.y=0,t.vx=0,t.vy=0,t.width=0,t.height=0,t.scaleX=1,t.scaleY=1,t.pivotX=.5,t.pivotY=.5,t.rotation=0,t.visible=!0,t.parent=void 0,t.stage=!1,t.shadow=!1,t.shadowColor="rgba(100, 100, 100, 0.5)",t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowBlur=3,t.blendMode=void 0,t.M=1,t.k=void 0,t.F=0,t.S=!1,t.j=!1,t.m=void 0,t.p=void 0,t.children=[],t.addChild=e=>{e.parent&&e.parent.removeChild(e),e.parent=t,t.children.push(e)},t.removeChild=e=>{if(e.parent!==t)throw Error(e+"is not a child of "+t);t.children.splice(t.children.indexOf(e),1)},t.swapChildren=(e,i)=>{var n=t.children.indexOf(e),o=t.children.indexOf(i);if(-1===n||-1===o)throw Error(child+" Both objects must be a child of the caller "+t);e.childIndex=o,i.childIndex=n,t.children[n]=i,t.children[o]=e},t.add=function(e){var i=[].slice.call(arguments);i.length>1?i.forEach(e=>{t.addChild(e)}):t.addChild(i[0])},t.remove=function(e){var i=[].slice.call(arguments);i.length>1?i.forEach(e=>{t.removeChild(e)}):t.removeChild(i[0])},t.setPosition=(e,i)=>{t.x=e,t.y=i};var e=t;t.putCenter=(i,n,o)=>{o=o||0,i.x=e.x+e.halfWidth-i.halfWidth+(n=n||0),i.y=e.y+e.halfHeight-i.halfHeight+o,t.compensateForParentPosition(e,i)},t.putTop=(i,n,o)=>{o=o||0,i.x=e.x+e.halfWidth-i.halfWidth+(n=n||0),i.y=e.y-i.height+o,t.compensateForParentPosition(e,i)},t.putRight=(i,n,o)=>{o=o||0,i.x=e.x+e.width+(n=n||0),i.y=e.y+e.halfHeight-i.halfHeight+o,t.compensateForParentPosition(e,i)},t.putBottom=(i,n,o)=>{o=o||0,i.x=e.x+e.halfWidth-i.halfWidth+(n=n||0),i.y=e.y+e.height+o,t.compensateForParentPosition(e,i)},t.putLeft=(i,n,o)=>{o=o||0,i.x=e.x-i.width+(n=n||0),i.y=e.y+e.halfHeight-i.halfHeight+o,t.compensateForParentPosition(e,i)},t.compensateForParentPosition=(t,e)=>{0===e.parent.gx&&0===e.parent.gy||(e.x-=t.gx,e.y-=t.gy)},Object.defineProperties(t,{gx:{get(){return this.parent?this.x+this.parent.gx:this.x},enumerable:!0,configurable:!0},gy:{get(){return this.parent?this.y+this.parent.gy:this.y},enumerable:!0,configurable:!0},position:{get:()=>({x:t.x,y:t.y}),enumerable:!0,configurable:!0},alpha:{get:()=>t.parent.M*t.M,set(e){t.M=e},enumerable:!0,configurable:!0},halfWidth:{get:()=>t.width/2,enumerable:!0,configurable:!0},halfHeight:{get:()=>t.height/2,enumerable:!0,configurable:!0},centerX:{get:()=>t.x+t.halfWidth,enumerable:!0,configurable:!0},centerY:{get:()=>t.y+t.halfHeight,enumerable:!0,configurable:!0},layer:{get:()=>t.F,set(e){t.F=e,t.parent.children.sort(g)},enumerable:!0,configurable:!0},circular:{get:()=>t.S,set(e){!0===e&&!1===t.S&&(f(t),t.S=!0),!1===e&&!0===t.S&&(delete t.diameter,delete t.radius,t.S=!1)},enumerable:!0,configurable:!0},draggable:{get:()=>t.k,set(e){!0===e&&(s.draggableSprites.push(t),t.k=!0,!1===s.dragAndDrop&&(s.dragAndDrop=!0)),!1===e&&s.draggableSprites.splice(s.draggableSprites.indexOf(t),1)},enumerable:!0,configurable:!0},interactive:{get:()=>t.j,set(e){!0===e&&(d(t),t.j=!0),!1===e&&(s.buttons.splice(s.buttons.indexOf(t),1),t.j=!1)},enumerable:!0,configurable:!0},localBounds:{get:()=>({x:0,y:0,width:t.width,height:t.height}),enumerable:!0,configurable:!0},globalBounds:{get:()=>(rectangle={x:t.gx,y:t.gy,width:t.gx+t.width,height:t.gy+t.height},rectangle),enumerable:!0,configurable:!0},empty:{get:()=>0===t.children.length,enumerable:!0,configurable:!0}})}function f(t){Object.defineProperties(t,{diameter:{get:()=>t.width,set(e){t.width=e,t.height=e},enumerable:!0,configurable:!0},radius:{get:()=>t.width/2,set(e){t.width=2*e,t.height=2*e},enumerable:!0,configurable:!0}})}function d(t){t.press=t.press||void 0,t.release=t.release||void 0,t.over=t.over||void 0,t.out=t.out||void 0,t.tap=t.tap||void 0,t.state="up",t.action="",t.pressed=!1,t.enabled=!0,t.hoverOver=!1,s.buttons.push(t),t.update=e=>{if(t.enabled){var i=s.pointer.hitTestSprite(t);e.isUp&&(t.state="up","button"===t.subtype&&t.show(0)),i&&(t.state="over",t.frames&&3===t.frames.length&&"button"===t.subtype&&t.show(1),e.isDown&&(t.state="down","button"===t.subtype&&t.show(3===t.frames.length?2:1))),"down"===t.state&&(t.pressed||(t.press&&t.press(),t.pressed=!0,t.action="pressed")),"over"===t.state&&(t.pressed&&(t.release&&t.release(),t.pressed=!1,t.action="released",s.pointer.tapped&&t.tap&&t.tap()),t.hoverOver||(t.over&&t.over(),t.hoverOver=!0)),"up"===t.state&&(t.pressed&&(t.release&&t.release(),t.pressed=!1,t.action="released"),t.hoverOver&&(t.out&&t.out(),t.hoverOver=!1))}}}function v(t){var e={};return e.code=t,e.isDown=!1,e.isUp=!0,e.press=void 0,e.release=void 0,e.downHandler=t=>{t.keyCode===e.code&&(e.isUp&&e.press&&e.press(),e.isDown=!0,e.isUp=!1),t.preventDefault()},e.upHandler=t=>{t.keyCode===e.code&&(e.isDown&&e.release&&e.release(),e.isDown=!1,e.isUp=!0),t.preventDefault()},window.addEventListener("keydown",e.downHandler.bind(e),!1),window.addEventListener("keyup",e.upHandler.bind(e),!1),e}function g(t,e){return e.layer>t.layer?-1:1}return s.assetFilePaths=o||void 0,s.paused=!1,s.o=60,s.l=Date.now(),s.u=1e3/s.o,s.v=0,s.interpolate=!0,s.updateFunctions=[],s.scale=1,s.start=()=>{s.assetFilePaths?(s.assets.whenLoaded=()=>{s.state=void 0,s.setup()},s.assets.load(s.assetFilePaths),s.load&&(s.state=s.load)):s.setup(),l()},s.pause=()=>{s.paused=!0},s.resume=()=>{s.paused=!1},s.hidePointer=()=>{s.canvas.style.cursor="none"},s.showPointer=()=>{s.canvas.style.cursor="auto"},Object.defineProperties(s,{fps:{get:()=>s.o,set(t){s.o=t,s.l=Date.now(),s.u=1e3/s.o},enumerable:!0,configurable:!0},backgroundColor:{set(t){s.canvas.style.backgroundColor=t},enumerable:!0,configurable:!0}}),s.remove=function(t){var e=[].slice.call(arguments);if(e[0]instanceof Array){var i=e[0];if(i.length>0)for(var n=i.length-1;n>=0;n--){var o=i[n];o.parent.removeChild(o),i.splice(i.indexOf(o),1)}}else e.length>1?e.forEach(t=>{t.parent.removeChild(t)}):e[0].parent.removeChild(e[0])},s.group=function(t){var e={};return c(e),e.addChild=t=>{t.parent&&t.parent.removeChild(t),t.parent=e,e.children.push(t),e.calculateSize()},e.removeChild=t=>{if(t.parent!==e)throw Error(t+"is not a child of "+e);e.children.splice(e.children.indexOf(t),1),e.calculateSize()},e.calculateSize=()=>{e.children.length>0&&(e.R=0,e.L=0,e.children.forEach(t=>{t.x+t.width>e.R&&(e.R=t.x+t.width),t.y+t.height>e.L&&(e.L=t.y+t.height)}),e.width=e.R,e.height=e.L)},s.stage.addChild(e),t&&[].slice.call(arguments).forEach(t=>{e.addChild(t)}),e},s.rectangle=(t,e,i,n,o,r,a)=>{var l={};return c(l),l.mask=!1,l.width=t||32,l.height=e||32,l.fillStyle=i||"red",l.strokeStyle=n||"none",l.lineWidth=o||0,l.x=r||0,l.y=a||0,s.stage.addChild(l),l.render=t=>{t.strokeStyle=l.strokeStyle,t.lineWidth=l.lineWidth,t.fillStyle=l.fillStyle,t.beginPath(),t.rect(-l.width*l.pivotX,-l.height*l.pivotY,l.width,l.height),!0===l.mask?t.clip():("none"!==l.strokeStyle&&t.stroke(),"none"!==l.fillStyle&&t.fill())},l},s.circle=(t,e,i,n,o,r)=>{var a={};return c(a),a.mask=!1,a.width=t||32,a.height=t||32,a.fillStyle=e||"red",a.strokeStyle=i||"none",a.lineWidth=n||"none",a.x=o||0,a.y=r||0,s.stage.addChild(a),f(a),a.render=t=>{t.strokeStyle=a.strokeStyle,t.lineWidth=a.lineWidth,t.fillStyle=a.fillStyle,t.beginPath(),t.arc(a.radius+-a.diameter*a.pivotX,a.radius+-a.diameter*a.pivotY,a.radius,0,2*Math.PI,!1),!0===a.mask?t.clip():("none"!==a.strokeStyle&&t.stroke(),"none"!==a.fillStyle&&t.fill())},a},s.line=(t,e,i,n,o,r)=>{var a={};return c(a),i||0===i||(i=0),n||0===n||(n=0),o||0===o||(o=32),r||0===r||(r=32),a.ax=i,a.ay=n,a.bx=o,a.by=r,a.strokeStyle=t||"red",a.lineWidth=e||1,a.lineJoin="round",s.stage.addChild(a),a.render=t=>{t.strokeStyle=a.strokeStyle,t.lineWidth=a.lineWidth,t.lineJoin=a.lineJoin,t.beginPath(),t.moveTo(a.ax,a.ay),t.lineTo(a.bx,a.by),"none"!==a.strokeStyle&&t.stroke(),"none"!==a.fillStyle&&t.fill()},a},s.frame=(t,e,i,n,o)=>{var r={};return r.image=t,r.x=e,r.y=i,r.width=n,r.height=o,r},s.frames=(t,e,i,n)=>{var o={};return o.image=t,o.data=e,o.width=i,o.height=n,o},s.sprite=t=>{var e={};if(void 0===t)throw Error("Sprites require a source");return c(e),e.frames=[],e.loop=!0,e.A=0,e.setTexture=t=>{if(t.image)if(t.image&&!t.data){if(!(s.assets[t.image].source instanceof Image))throw Error(t.image+" is not an image file");e.source=s.assets[t.image].source,e.sourceX=t.x,e.sourceY=t.y,e.width=t.width,e.height=t.height,e.sourceWidth=t.width,e.sourceHeight=t.height}else t.image&&t.data&&(e.source=s.assets[t.image].source,e.frames=t.data,e.sourceX=e.frames[0][0],e.sourceY=e.frames[0][1],e.width=t.width,e.height=t.height,e.sourceWidth=t.width,e.sourceHeight=t.height);else t instanceof Array?(e.frames=t,e.source=s.assets[t[0]].source,e.sourceX=s.assets[t[0]].frame.x,e.sourceY=s.assets[t[0]].frame.y,e.width=s.assets[t[0]].frame.w,e.height=s.assets[t[0]].frame.h,e.sourceWidth=s.assets[t[0]].frame.w,e.sourceHeight=s.assets[t[0]].frame.h):(e.tilesetFrame=s.assets[t],e.source=e.tilesetFrame.source,e.sourceX=e.tilesetFrame.frame.x,e.sourceY=e.tilesetFrame.frame.y,e.width=e.tilesetFrame.frame.w,e.height=e.tilesetFrame.frame.h,e.sourceWidth=e.tilesetFrame.frame.w,e.sourceHeight=e.tilesetFrame.frame.h)},e.setTexture(t),e.gotoAndStop=t=>{if(0>=e.frames.length)throw Error("Frame number "+t+"doesn't exist");e.frames[0]instanceof Array?(e.sourceX=e.frames[t][0],e.sourceY=e.frames[t][1]):s.assets[e.frames[t]].frame&&(e.source=s.assets[e.frames[t]].source,e.sourceX=s.assets[e.frames[t]].frame.x,e.sourceY=s.assets[e.frames[t]].frame.y,e.sourceWidth=s.assets[e.frames[t]].frame.w,e.sourceHeight=s.assets[e.frames[t]].frame.h,e.width=s.assets[e.frames[t]].frame.w,e.height=s.assets[e.frames[t]].frame.h),e.A=t},e.x=0,e.y=0,e.frames.length>0&&(s.addStatePlayer(e),Object.defineProperty(e,"currentFrame",{get:()=>e.A,enumerable:!1,configurable:!1})),s.stage.addChild(e),e.render=t=>{t.drawImage(e.source,e.sourceX,e.sourceY,e.sourceWidth,e.sourceHeight,-e.width*e.pivotX,-e.height*e.pivotY,e.width,e.height)},e},s.button=t=>{var e=s.sprite(t);return e.subtype="button",d(e),e},s.image=t=>s.assets[t],s.json=t=>s.assets[t],s.addStatePlayer=function(t){var e=0,i=0,n=0,o=void 0,r=!1;function a(a){l(),i=a[1]-(n=a[0]),0===n&&(i+=1,e+=1),1===i&&(i=2,e+=1),t.fps||(t.fps=12);var h=1e3/t.fps;t.gotoAndStop(n),r||(o=setInterval(s.bind(this),h),r=!0)}function s(){i>e?(t.gotoAndStop(t.currentFrame+1),e+=1):t.loop&&(t.gotoAndStop(n),e=1)}function l(){void 0!==o&&!0===r&&(r=!1,e=0,n=0,i=0,clearInterval(o))}t.show=e=>{l(),t.gotoAndStop("string"!=typeof e?e:t.frames.indexOf(e))},t.play=()=>{a([0,t.frames.length-1])},t.stop=()=>{l(),t.gotoAndStop(t.currentFrame)},t.playing=r,t.playSequence=a},s.render=(t,e)=>{var i=t.ctx;i.clearRect(0,0,t.width,t.height);for(var n=0;s.stage.children.length>n;n++)o(s.stage.children[n]);function o(n){if(n.visible&&t.width+n.width>n.gx&&n.gx+n.width>=-n.width&&t.height+n.height>n.gy&&n.gy+n.height>=-n.height){if(i.save(),s.interpolate?(n.renderX=void 0!==n.m?(n.x-n.m)*e+n.m:n.x,n.renderY=void 0!==n.p?(n.y-n.p)*e+n.p:n.y):(n.renderX=n.x,n.renderY=n.y),i.translate(n.renderX+n.width*n.pivotX,n.renderY+n.height*n.pivotY),i.globalAlpha=n.alpha,i.rotate(n.rotation),i.scale(n.scaleX,n.scaleY),n.shadow&&(i.shadowColor=n.shadowColor,i.shadowOffsetX=n.shadowOffsetX,i.shadowOffsetY=n.shadowOffsetY,i.shadowBlur=n.shadowBlur),n.blendMode&&(i.globalCompositeOperation=n.blendMode),n.render&&n.render(i),n.children&&n.children.length>0){i.translate(-n.width*n.pivotX,-n.height*n.pivotY);for(var r=0;n.children.length>r;r++)o(n.children[r])}i.restore()}}},s.assets={toLoad:0,loaded:0,imageExtensions:["png","jpg","gif","webp"],fontExtensions:["ttf","otf","ttc","woff"],audioExtensions:["mp3","ogg","wav","webm"],jsonExtensions:["json"],whenLoaded:void 0,load(t){var e=this;e.toLoad=t.length,t.forEach(t=>{var i=t.split(".").pop();if(-1!==e.imageExtensions.indexOf(i)){var n=new Image;n.addEventListener("load",()=>{n.name=t,e[n.name]={source:n,frame:{x:0,y:0,w:n.width,h:n.height}},e.loadHandler()},!1),n.src=t}else if(-1!==e.fontExtensions.indexOf(i)){var o=t.split("/").pop().split(".")[0],r=document.createElement("style");r.appendChild(document.createTextNode("@font-face {font-family: '"+o+"'; src: url('"+t+"');}")),document.head.appendChild(r),e.loadHandler()}else if(-1!==e.audioExtensions.indexOf(i)){var a=s.makeSound(t,e.loadHandler.bind(e));a.name=t,e[a.name]=a}else if(-1!==e.jsonExtensions.indexOf(i)){var l=new XMLHttpRequest,h={};l.open("GET",t,!0),l.addEventListener("readystatechange",()=>{200===l.status&&4===l.readyState&&((h=JSON.parse(l.responseText)).name=t,e[h.name]=h,h.frames?e.createTilesetFrames(h,t):e.loadHandler())}),l.send()}})},createTilesetFrames(t,e){var i=this,n=e.replace(/[^\/]*$/,""),o=new Image;o.addEventListener("load",()=>{i[n+t.meta.image]={source:o,frame:{x:0,y:0,w:o.width,h:o.height}},Object.keys(t.frames).forEach(e=>{i[e]=t.frames[e],i[e].source=o}),i.loadHandler()},!1),o.src=n+t.meta.image},loadHandler(){var t=this;t.loaded+=1,t.toLoad===t.loaded&&(t.toLoad=0,t.loaded=0,t.whenLoaded())}},s.keyboard=v,s.makeDisplayObject=c,void 0!==t.plugins&&t.plugins(s),void 0!==t.custom&&t.custom(s),s},window.ga=t.create,function(t){var e,i,n={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitIsFullScreen",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreen",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},o=n.w3;for(i in n)if(n[i].enabled in t){e=n[i];break}function r(e,i){var n=t.createEvent("Event");n.initEvent(e,!0,!1),i.dispatchEvent(n)}!(o.enabled in t)&&e&&(t.addEventListener(e.events.change,i=>{t[o.enabled]=t[e.enabled],t[o.element]=t[e.element],r(o.events.change,i.target)},!1),t.addEventListener(e.events.error,t=>{r(o.events.error,t.target)},!1),t[o.enabled]=t[e.enabled],t[o.element]=t[e.element],t[o.exit]=t[e.exit],Element.prototype[o.request]=function(){return this[e.request].apply(this,arguments)})}(document),t.plugins=function(t){function e(t){t.x+=0|t.vx,t.y+=0|t.vy}t.move=t=>{if(t instanceof Array==0)e(t);else for(var i=0;t.length>i;i++)e(t[i])},t.distance=(t,e)=>{var i=e.centerX-t.centerX,n=e.centerY-t.centerY;return Math.sqrt(i*i+n*n)},t.randomInt=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,t.randomFloat=(t,e)=>t+Math.random()*(e-t),t.wait=(t,e)=>setTimeout(e,t),t.worldCamera=function(t,e){return{width:e.width,height:e.height,t:0,i:0,get x(){return this.t},set x(e){this.t=e,t.x=-this.t,t.m=t.x},get y(){return this.i},set y(e){this.i=e,t.y=-this.i,t.p=t.y},get centerX(){return this.x+this.width/2},get centerY(){return this.y+this.height/2},get rightInnerBoundary(){return this.x+this.width/2+this.width/4},get leftInnerBoundary(){return this.x+this.width/2-this.width/4},get topInnerBoundary(){return this.y+this.height/2-this.height/4},get bottomInnerBoundary(){return this.y+this.height/2+this.height/4},follow(e){this.leftInnerBoundary>e.x&&(this.x=e.x-this.width/4),this.topInnerBoundary>e.y&&(this.y=e.y-this.height/4),e.x+e.width>this.rightInnerBoundary&&(this.x=e.x+e.width-this.width/4*3),e.y+e.height>this.bottomInnerBoundary&&(this.y=e.y+e.height-this.height/4*3),0>this.x&&(this.x=0),0>this.y&&(this.y=0),this.x+this.width>t.width&&(this.x=t.width-this.width),this.y+this.height>t.height&&(this.y=t.height-this.height)},centerOver(t){this.x=t.x+t.halfWidth-this.width/2,this.y=t.y+t.halfHeight-this.height/2}}},t.scaleToWindow=e=>{var i,n,o,r,a;e=e||"#2C3539",i=window.innerWidth/t.canvas.width,n=window.innerHeight/t.canvas.height,o=Math.min(i,n),t.canvas.style.transformOrigin="0 0",t.canvas.style.transform="scale("+o+")","horizontally"==(r=t.canvas.width>t.canvas.height?t.canvas.width*o<window.innerWidth?"horizontally":"vertically":t.canvas.height*o<window.innerHeight?"vertically":"horizontally")&&(a=(window.innerWidth-t.canvas.width*o)/2,t.canvas.style.marginLeft=a+"px",t.canvas.style.marginRight=a+"px"),"vertically"===r&&(a=(window.innerHeight-t.canvas.height*o)/2,t.canvas.style.marginTop=a+"px",t.canvas.style.marginBottom=a+"px"),t.canvas.style.paddingLeft=0,t.canvas.style.paddingRight=0,t.canvas.style.paddingTop=0,t.canvas.style.paddingBottom=0,t.canvas.style.display="block",document.body.style.backgroundColor=e,t.pointer.scale=o,t.scale=o,t.canvas.scaled=!0;var s=navigator.userAgent.toLowerCase();-1!=s.indexOf("safari")&&(s.indexOf("chrome")>-1||(t.canvas.style.maxHeight="100%",t.canvas.style.minHeight="100%"))},t.scaleToFit=(e,i)=>{var n,o,r;"width"===e&&(n=t.canvas.width/window.innerWidth,o=t.canvas.height/window.innerHeight),"height"===e&&(n=window.innerWidth/t.canvas.width,o=window.innerHeight/t.canvas.height),r=Math.min(n,o),t.canvas.style.transformOrigin="0 0",t.canvas.style.transform="scale("+r+")",document.body.style.backgroundColor=i,t.canvas.style.paddingLeft=0,t.canvas.style.paddingRight=0,t.canvas.style.marginLeft="auto",t.canvas.style.marginRight="auto",t.canvas.style.display="block",t.canvas.style.minHeight="100%";var a=navigator.userAgent.toLowerCase();-1!=a.indexOf("safari")&&(a.indexOf("chrome")>-1||(t.canvas.style.maxHeight="100%",t.canvas.style.minHeight="100%")),t.scale=r},t.hitTestPoint=(t,e)=>{var i,n,o,r;return"rectangle"==(i=e.radius?"circle":"rectangle")&&(r=t.x>e.x&&e.x+e.width>t.x&&t.y>e.y&&e.y+e.height>t.y),"circle"===i&&(r=e.radius>Math.sqrt((n=t.x-e.centerX)*n+(o=t.y-e.centerY)*o)),r},t.hitTestCircle=(t,e,i)=>{var n,o;return void 0===i&&(i=!1),i?(n=e.gx+e.radius-(t.gx+t.radius),o=e.gy+e.radius-(t.gy+t.radius)):(n=e.centerX-t.centerX,o=e.centerY-t.centerY),t.radius+e.radius>Math.sqrt(n*n+o*o)},t.hitTestRectangle=(t,e,i)=>{var n,o,r;return void 0===i&&(i=!1),i?(o=t.gx+t.halfWidth-(e.gx+e.halfWidth),r=t.gy+t.halfHeight-(e.gy+e.halfHeight)):(o=t.centerX-e.centerX,r=t.centerY-e.centerY),n=t.halfHeight+e.halfHeight,t.halfWidth+e.halfWidth>Math.abs(o)&&n>Math.abs(r)},t.hitTestCircleRectangle=(e,i,n)=>{var o,r,a,s,l,h;if(void 0===n&&(n=!1),n?(a=e.gx,s=e.gy,l=i.gx,h=i.gy):(a=e.x,s=e.y,l=i.x,h=i.y),"topMiddle"==(o=h-i.halfHeight>s?l-1-i.halfWidth>a?"topLeft":a>l+1+i.halfWidth?"topRight":"topMiddle":s>h+i.halfHeight?l-1-i.halfWidth>a?"bottomLeft":a>l+1+i.halfWidth?"bottomRight":"bottomMiddle":l-i.halfWidth>a?"leftMiddle":"rightMiddle")||"bottomMiddle"===o||"leftMiddle"===o||"rightMiddle"===o)r=t.hitTestRectangle(e,i,n);else{var u={};switch(o){case"topLeft":u.x=l,u.y=h;break;case"topRight":u.x=l+i.width,u.y=h;break;case"bottomLeft":u.x=l,u.y=h+i.height;break;case"bottomRight":u.x=l+i.width,u.y=h+i.height}r=t.hitTestCirclePoint(e,u,n)}return r?o:r},t.hitTestCirclePoint=(e,i,n)=>(void 0===n&&(n=!1),i.diameter=1,i.radius=.5,i.centerX=i.x,i.centerY=i.y,i.gx=i.x,i.gy=i.y,t.hitTestCircle(e,i,n)),t.rectangleCollision=(t,e,i,n)=>{var o,r,a,s,l,h,u;return void 0===i&&(i=!1),void 0===n&&(n=!1),n?(h=t.gx+t.halfWidth-(e.gx+e.halfWidth),u=t.gy+t.halfHeight-(e.gy+e.halfHeight)):(h=t.centerX-e.centerX,u=t.centerY-e.centerY),a=t.halfHeight+e.halfHeight,(r=t.halfWidth+e.halfWidth)>Math.abs(h)&&a>Math.abs(u)&&(s=r-Math.abs(h),(l=a-Math.abs(u))>s?(h>0?(o="left",t.x=t.x+s):(o="right",t.x=t.x-s),i&&(t.vx*=-1)):(u>0?(o="top",t.y=t.y+l):(o="bottom",t.y=t.y-l),i&&(t.vy*=-1))),o},t.circleCollision=(t,e,i,n)=>{var o,r,a,s,l,h,u={},c=!1;return void 0===i&&(i=!0),void 0===n&&(n=!1),n?(s=e.gx+e.radius-(t.gx+t.radius),l=e.gy+e.radius-(t.gy+t.radius)):(s=e.centerX-t.centerX,l=e.centerY-t.centerY),(r=t.radius+e.radius)>(o=Math.sqrt(s*s+l*l))&&(c=!0,a=r-o,h=l/o,t.x-=(a+=.3)*(s/o),t.y-=a*h,i&&(u.x=l,u.y=-s,((t,e)=>{var i,n,o={},r={},a={},s=t.mass||1;e.lx=e.y,e.ly=-e.x,e.magnitude=Math.sqrt(e.x*e.x+e.y*e.y),e.dx=e.x/e.magnitude,e.dy=e.y/e.magnitude,o.vx=(i=t.vx*e.dx+t.vy*e.dy)*e.dx,o.vy=i*e.dy,r.vx=(n=t.vx*(e.lx/e.magnitude)+t.vy*(e.ly/e.magnitude))*(e.lx/e.magnitude),r.vy=n*(e.ly/e.magnitude),r.vx*=-1,r.vy*=-1,a.x=o.vx+r.vx,a.y=o.vy+r.vy,t.vx=a.x/s,t.vy=a.y/s})(t,u))),c},t.movingCircleCollision=(t,e,i)=>{var n,o,r,a,s={},l={},h={},u={},c={},f=!1;if(t.mass=t.mass||1,e.mass=e.mass||1,void 0===i&&(i=!1),i?(s.vx=e.gx+e.radius-(t.gx+t.radius),s.vy=e.gy+e.radius-(t.gy+t.radius)):(s.vx=e.centerX-t.centerX,s.vy=e.centerY-t.centerY),s.magnitude=Math.sqrt(s.vx*s.vx+s.vy*s.vy),(n=t.radius+e.radius)>s.magnitude){f=!0,o=n-s.magnitude,o+=.3,s.dx=s.vx/s.magnitude,s.dy=s.vy/s.magnitude,s.vxHalf=Math.abs(s.dx*o/2),s.vyHalf=Math.abs(s.dy*o/2),a=t.y>e.y?1:-1,t.x=t.x+s.vxHalf*(r=t.x>e.x?1:-1),t.y=t.y+s.vyHalf*a,e.x=e.x+s.vxHalf*-r,e.y=e.y+s.vyHalf*-a,s.lx=s.vy,s.ly=-s.vx;var d=t.vx*s.dx+t.vy*s.dy;l.x=d*s.dx,l.y=d*s.dy;var v=t.vx*(s.lx/s.magnitude)+t.vy*(s.ly/s.magnitude);h.x=v*(s.lx/s.magnitude),h.y=v*(s.ly/s.magnitude);var g=e.vx*s.dx+e.vy*s.dy;u.x=g*s.dx,u.y=g*s.dy;var m=e.vx*(s.lx/s.magnitude)+e.vy*(s.ly/s.magnitude);c.x=m*(s.lx/s.magnitude),c.y=m*(s.ly/s.magnitude),t.bounce={},t.bounce.x=h.x+u.x,t.bounce.y=h.y+u.y,e.bounce={},e.bounce.x=l.x+c.x,e.bounce.y=l.y+c.y,t.vx=t.bounce.x/t.mass,t.vy=t.bounce.y/t.mass,e.vx=e.bounce.x/e.mass,e.vy=e.bounce.y/e.mass}return f},t.multipleCircleCollision=(e,i)=>{void 0===i&&(i=!1);for(var n=0;e.length>n;n++)for(var o=e[n],r=n+1;e.length>r;r++)t.movingCircleCollision(o,e[r],i)},t.circlePointCollision=(e,i,n,o)=>(void 0===o&&(o=!1),void 0===n&&(n=!1),i.diameter=1,i.radius=.5,i.centerX=i.x,i.centerY=i.y,i.gx=i.x,i.gy=i.y,t.circleCollision(e,i,n,o)),t.circleRectangleCollision=(e,i,n,o)=>{var r,a,s,l,h,u;if(void 0===o&&(o=!1),void 0===n&&(n=!1),o?(s=e.gx,l=e.gy,h=i.gx,u=i.gy):(s=e.x,l=e.y,h=i.x,u=i.y),"topMiddle"==(r=u-i.halfHeight>l?h-1-i.halfWidth>s?"topLeft":s>h+1+i.halfWidth?"topRight":"topMiddle":l>u+i.halfHeight?h-1-i.halfWidth>s?"bottomLeft":s>h+1+i.halfWidth?"bottomRight":"bottomMiddle":h-i.halfWidth>s?"leftMiddle":"rightMiddle")||"bottomMiddle"===r||"leftMiddle"===r||"rightMiddle"===r)a=t.rectangleCollision(e,i,n,o);else{var c={};switch(r){case"topLeft":c.x=h,c.y=u;break;case"topRight":c.x=h+i.width,c.y=u;break;case"bottomLeft":c.x=h,c.y=u+i.height;break;case"bottomRight":c.x=h+i.width,c.y=u+i.height}a=t.circlePointCollision(e,c,n,o)}return a?r:a},t.hit=(e,i,n,o,r,a)=>{var s;return n=n||!1,o=o||!1,r=r||!1,i instanceof Array||e instanceof Array?(()=>{e instanceof Array&&(i=e);for(var t=i.length-1;t>=0;t--){var n=i[t];(s=l(e,n))&&a&&a(s,n)}})():(s=l(e,i))&&a&&a(s),s;function l(e,i){var a=void 0!==i.parent;if(void 0!==e.parent&&a)return e.diameter&&i.diameter?((e,i)=>n?e.vx+e.vy!==0&&i.vx+i.vy!==0?t.movingCircleCollision(e,i,r):t.circleCollision(e,i,o,r):t.hitTestCircle(e,i,r))(e,i):e.diameter&&!i.diameter?((e,i)=>n?t.circleRectangleCollision(e,i,o,r):t.hitTestCircleRectangle(e,i,r))(e,i):((e,i)=>n?t.rectangleCollision(e,i,!!o,r):t.hitTestRectangle(e,i,r))(e,i);if(a&&void 0!==e.x&&void 0!==e.y)return t.hitTestPoint(e,i);throw Error("I'm sorry, "+e+" and "+i+" cannot be use together in a collision test.")}},t.requestFullScreen=()=>{document.fullscreenEnabled||t.canvas.requestFullscreen()},t.exitFullScreen=()=>{document.fullscreenEnabled&&document.exitFullscreen()},t.alignFullscreen=()=>{var e,i;if(e=screen.width/t.canvas.width,i=screen.height/t.canvas.height,t.fullscreenScale=Math.min(e,i),0===document.styleSheets.length){var n=document.createElement("div");n.innerHTML="<style></style>",document.body.appendChild(n)}var o=navigator.userAgent.toLowerCase();t.canvas.width>t.canvas.height?-1!==o.indexOf("safari")||-1!==o.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain}",0):-1!==o.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==o.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==o.indexOf("explorer")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {position: fixed; width: 100%; height: auto; top: 0; right: 0; bottom: 0; left: 0; margin: auto; object-fit: contain;}",0):-1!==o.indexOf("safari")||-1!==o.indexOf("chrome")?document.styleSheets[0].insertRule("canvas:-webkit-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==o.indexOf("firefox")?document.styleSheets[0].insertRule("canvas:-moz-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==o.indexOf("opera")?document.styleSheets[0].insertRule("canvas:-o-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):-1!==o.indexOf("msie")?document.styleSheets[0].insertRule("canvas:-ms-full-screen {height: 100%; margin: 0 auto; object-fit: contain;}",0):document.styleSheets[0].insertRule("canvas:fullscreen {height: 100%; margin: 0 auto; object-fit: contain;}",0)},t.enableFullscreen=function(e){e&&(e=[].slice.call(arguments)),t.alignFullscreen(),t.canvas.addEventListener("mouseup",t.requestFullScreen,!1),t.canvas.addEventListener("touchend",t.requestFullScreen,!1),e&&e.forEach(e=>{window.addEventListener("keyup",i=>{i.keyCode===e&&t.exitFullScreen(),i.preventDefault()},!1)})},t.launchFullscreen=e=>{t.hitTestPoint(t.pointer.position,e)&&t.enableFullscreen()},t.scaleFullscreen=()=>{document.fullscreenEnabled?(t.scale=t.fullscreenScale,t.pointer.scale=t.fullscreenScale):t.canvas.scaled||(t.scale=1,t.pointer.scale=1)},t.updateFunctions.push(t.scaleFullscreen)};let e=new AudioContext,i=(t=1,i=.05,n=220,o=0,r=0,a=.1,s=0,l=1,h=0,u=0,c=0,f=0,d=0,v=0,g=0,m=0,b=0,w=1,p=0,M=0,y=0)=>{let x=Math,k=2*x.PI,E=44100,F=h*=500*k/E/E,S=n*=(1-i+2*i*x.random(i=[]))*k/E,j=0,R=0,L=0,z=1,A=0,C=0,I=0,q=0>y?-1:1,O=k*q*y*2/E,B=x.cos(O),D=x.sin,H=D(O)/4,T=1+H,X=-2*B/T,J=(1-H)/T,P=(1+q*B)/2/T,W=-(q+B)/T,Y=P,_=0,G=0,K=0,N=0;for(u*=500*k/E**3,g*=k/E,c*=k/E,f*=E,d=E*d|0,t*=.3,q=(o=E*o+9)+(p*=E)+(r*=E)+(a*=E)+(b*=E)|0;q>L;i[L++]=I*t)++C%(100*m|0)||(I=s?s>1?s>2?s>3?D(j**3):x.max(x.min(x.tan(j),1),-1):1-(2*j/k%2+2)%2:1-4*x.abs(x.round(j/k)-j/k):D(j),I=(d?1-M+M*D(k*L/d):1)*(0>I?-1:1)*x.abs(I)**l*(o>L?L/o:o+p>L?1-(L-o)/p*(1-w):o+p+r>L?w:q-b>L?(q-L-b)/a*w:0),I=b?I/2+(b>L?0:(q-b>L?1:(q-L)/b)*i[L-b|0]/2/t):I,y&&(I=N=Y*_+W*(_=G)+P*(G=I)-J*K-X*(K=N))),O=(n+=h+=u)*x.cos(g*R++),j+=O+O*v*D(L**5),z&&++z>f&&(n+=c,S+=c,z=0),!d||++A%d||(n=S,h=F,z=z||1);(t=e.createBuffer(1,q,E)).getChannelData(0).set(i),(n=e.createBufferSource()).buffer=t,n.connect(e.destination),n.start()};class n{constructor(t){this.g=t,this.player=null,this.game=null,this.buildings=null,this.dropPoint=void 0,this.mouses=null,this.camera=void 0,this.gravity=.4,this.stars=null,this.topTowers=[],this.worldWidth=0,this.menuStage=1,this.menuText=void 0,this.menuBackground=void 0}setup(){const t=this.g;this.game=t.group(),this.buildings=t.group(),this.mouses=t.group(),this.stars=t.group(),this.player=t.sprite("./Cat.png"),this.player.width=40,this.player.height=32,this.player.lastDropTime=0,this.player.dropCooldown=200,this.player.grounded=!1,this.player.canDropMice=!1,this.player.moveSpeed=3,this.player.speed=3,this.player.hurt=150,this.player.fallSpeed=0,this.player.x=t.canvas.width/2-this.player.width/2,this.levelTimeLimit=30,this.dropPoint=t.sprite("./Elevator.png"),this.player.layingMouses=t.group(),this.player.dropingElevator=!1,this.timeLimitSprite=u("30",t.canvas.width-200,16,32,32),t.stage.addChild(this.timeLimitSprite),((t,e,i,n,o,a)=>{for(let t=0;30>t;t++)i.push(c(64*t,r.canvas.height,Math.floor(2*Math.random())+1));for(let t=0;5>t;t++){let e=l(64*t,i[t].y-22);n.addChild(e)}const s=Math.floor(a.x/64),h=Math.max(0,s-10),u=Math.min(i.length-1,s+10);let f=!1,d=null;for(;!f;){let t=Math.floor(Math.random()*(u-h+1))+h;5>t-s||(d=i[t],1>=d.height||(f=!0))}o.x=d.x+d.width/2-o.width/2,o.y=d.y-o.height})(0,0,this.topTowers,this.mouses,this.dropPoint,this.player);const e=(t=>{let e=null;for(let i=0;o.buildings.children.length>i;i++){const n=o.buildings.children[i];t>=n.x&&n.x+n.width>=t&&(e&&n.y>=e.y||(e=n))}return e})(this.player.x);this.player.y=e.y,this.worldWidth=64*this.topTowers.length,t.stage.width=this.worldWidth,t.stage.height=100*t.canvas.height,((t,e=100)=>{let i=[];for(let n=0;t>n;n++){let t,n=0;for(;50>n;){let a=Math.floor(Math.random()*(10*r.canvas.width-64))-500,s=Math.floor(Math.random()*(5*r.canvas.height/2-64))-700;if(!i.some(t=>{let i=t.x-a,n=t.y-s;return e>Math.sqrt(i*i+n*n)})){t=r.sprite("./Star.png"),t.width=12,t.height=12,t.x=a,t.y=s,o.stars.addChild(t),i.push(t);break}n++}}})(1e3,100),this.game.addChild(this.stars),this.player.addChild(this.player.layingMouses),this.game.addChild(this.buildings),this.game.addChild(this.dropPoint),this.game.addChild(this.mouses),this.game.addChild(this.player),this.camera=t.worldCamera(this.game,t.canvas),this.keyboard(),t.state=f}keyboard(){const t=this.g;t.key.a.press=()=>{v()},t.key.a.release=()=>{t.key.d.isDown||(this.player.vx=0)},t.key.d.press=()=>{d()},t.key.d.release=()=>{t.key.a.isDown||(this.player.vx=0)},t.key.leftArrow.press=()=>{v()},t.key.leftArrow.release=()=>{t.key.rightArrow.isDown||(this.player.vx=0)},t.key.rightArrow.press=()=>{d()},t.key.rightArrow.release=()=>{t.key.leftArrow.isDown||(this.player.vx=0)},t.key.upArrow.press=()=>{g()},t.key.space.press=()=>{t.state===m?g():t.state===f&&(o.menuStage+=1)},t.key.w.press=()=>{g()},t.key.r.press=()=>{s()},t.key.q.release=async()=>{if(this.player.dropingElevator)this.player.layingMouses.removeChild(this.player.layingMouses.children[this.player.layingMouses.children.length-1]),this.player.canDropMice=!1,this.player.moveSpeed=this.player.speed-this.player.layingMouses.children.length/5,a(),0===this.mouses.children.length&&0===this.player.layingMouses.children.length&&s();else if(this.player.layingMouses.children.length>0){await h(this.player),this.player.layingMouses.removeChild(this.player.layingMouses.children[0]);let t=l(this.player.x-25,h(this.player).y-22);o.mouses.addChild(t),this.player.moveSpeed=this.player.speed-this.player.layingMouses.children.length/5}}}}let o=null;const r=t.create(800,512,()=>{o&&"function"==typeof o.setup&&o.setup()},["./Cat.png","./Mouse_Stand.png","./Mouse_Lay.png","./Roof1.png","./Roof2.png","./Star.png","./WhiteFont.png","./Elevator.png"]);function a(){i(...[,,488,.02,.01,.07,,.7,,162,,,,,,,,.82,.04])}function s(){r.state=f,r.remove(o.dropPoint),r.remove(o.player.layingMouses),r.remove(o.player),r.remove(o.stars),r.remove(o.buildings),r.remove(o.mouses),r.remove(o.timeLimitSprite),o=new n(r),o.setup()}function l(t,e){let i=r.sprite("./Mouse_Stand.png");return i.width=22,i.height=22,i.x=t,i.y=e,i}function h(t){let e=null;for(let i=0;o.buildings.children.length>i;i++){let n=o.buildings.children[i];t.x+t.width>n.x&&n.x+n.width>t.x&&(e&&n.y>=e.y||(e=n))}return e}function u(t,e,i,n,o){const a=n,s=o;let l=r.group();for(let n=0;t.length>n;n++){let o=t[n].toUpperCase(),h="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".indexOf(o);if(-1===h)continue;let u=r.sprite("./WhiteFont.png");u.sourceX=5*h,u.sourceY=0,u.sourceWidth=5,u.sourceHeight=5,u.width=a,u.height=s,u.x=e+n*a,u.y=i,l.addChild(u)}return l}function c(t,e,i){let n=1===i?"Roof1.png":"Roof2.png",a=null,s=Math.floor(10*Math.random()),l=o.buildings.lastHeight||10,h=Math.max(1,l-2),u=l+3;20===u&&(u=l-3);let c=Math.floor(Math.random()*(u-h+1))+h;for(;1===c;)h=Math.max(1,l-2),u=l+2,c=Math.floor(Math.random()*(u-h+1))+h;3===s&&(c=1);for(let i=0;c>i;i++){let s=r.sprite("./"+n);s.width=64,s.height=32,s.x=t,s.y=e-32*i,o.buildings.addChild(s),a&&s.y>=a.y||(a=s)}return 3!==s&&(o.buildings.lastHeight=c),a}function f(){o.menuBackground||o.menuText||(o.menuBackground=r.rectangle(50*r.canvas.width,100*r.canvas.height,"black","none",0,-1e3,-500),r.stage.addChild(o.menuBackground),o.menuText=u("PRESS SPACE!",220,220,32,32),r.stage.addChild(o.menuText)),2===o.menuStage&&(r.remove(o.menuText),o.menuText=u("CATS CARGO",240,220,32,32)),3===o.menuStage&&(r.remove(o.menuText),o.menuText=u("JS13K By JUDE HILL",110,220,32,32)),4===o.menuStage&&(r.remove(o.menuText),r.stage.remove(o.menuBackground),o.menuBackground=null,o.menuText=null,o.menuStage=1,r.state=m)}function d(){if(o.player.vx=o.player.moveSpeed,o.player.scaleX=1,o.player.layingMouses.children.length>0)for(let t=0;o.player.layingMouses.children.length>t;t++)o.player.layingMouses.children[t].scaleX=1,o.player.layingMouses.children[t].offset=5}function v(){if(o.player.vx=-o.player.moveSpeed,o.player.scaleX=-1,o.player.layingMouses.children.length>0)for(let t=0;o.player.layingMouses.children.length>t;t++)o.player.layingMouses.children[t].scaleX=-1,o.player.layingMouses.children[t].offset=20}function g(){a(),o.player.grounded&&(o.player.vy-=10,o.player.grounded=!1)}function m(){o.player.vy+=o.gravity,r.move(o.player),o.levelTimeLimit-=.01,r.remove(o.timeLimitSprite),o.timeLimitSprite=u(o.levelTimeLimit+"",r.canvas.width-90,16,32,32),0>o.levelTimeLimit&&s();for(let t=0;o.buildings.children.length>t;t++){let e=o.buildings.children[t];r.hit(o.player,e,!0,!1,!1,t=>{"top"===t?o.player.vy=0:"bottom"!==t||0>o.player.vy?"left"!==t&&"right"!==t||(o.player.vx=0):(o.player.vy=0,o.player.grounded=!0,o.player.fallSpeed>15&&(o.player.hurt+=Math.floor(10*o.player.fallSpeed),0>o.player.hurt&&(o.player.hurt=0),o.player.hurt>150&&s(),i(...[,,50,.1,.2,.6,4,1.5])),o.player.y=e.y-o.player.height,o.player.vy=-o.gravity),"bottom"!==t&&o.player.vy>0&&(o.player.grounded=!1)})}o.player.dropingElevator=!!r.hit(o.player,o.dropPoint,!1,!1,!1),o.player.fallSpeed=o.player.vy;for(let t=0;o.mouses.children.length>t;t++){const e=o.mouses.children[t];r.hit(o.player,e,!0,!1,!1,()=>{const t=r.sprite("./Mouse_Lay.png");t.width=20,t.height=20,t.x=o.player.x,t.y=o.player.y-20,t.layer=2,t.offset=0,o.player.layingMouses.addChild(t),o.mouses.removeChild(e),o.player.moveSpeed=o.player.speed-o.player.layingMouses.children.length/6})}for(let t=0;o.player.layingMouses.children.length>t;t++){const e=o.player.layingMouses.children[t];e.x=(1===o.player.scaleX?3:19)-o.player.layingMouses.children[t].offset,e.y=o.player.height-10*t-25}for(let t=0;o.stars.children.length>t;t++)o.stars.children[t].x-=.05;o.camera.centerOver(o.player)}o=new n(r),t.plugins(r),r.start(),r.scaleToWindow(),r.canvas.ctx.imageSmoothingEnabled=!1,r.canvas.style.border="2px black solid",r.backgroundColor="black",window.addEventListener("resize",()=>{r.scaleToWindow()})</script>